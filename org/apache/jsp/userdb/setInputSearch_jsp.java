/*
 * Generated by the Jasper component of Apache Tomcat
 * Version: JspC/ApacheTomcat8
 * Generated at: 2023-01-06 09:42:43 UTC
 * Note: The last modified time of this file was set to
 *       the last modified time of the source file after
 *       generation to assist with modification tracking.
 */
package org.apache.jsp.userdb;

import javax.servlet.*;
import javax.servlet.http.*;
import javax.servlet.jsp.*;
import java.util.*;
import com.js.oa.userdb.service.CustomDatabaseBD;
import com.js.oa.eform.service.DataBaseInfoBD;
import com.js.util.util.DataSourceBase;

public final class setInputSearch_jsp extends org.apache.jasper.runtime.HttpJspBase
    implements org.apache.jasper.runtime.JspSourceDependent,
                 org.apache.jasper.runtime.JspSourceImports {


/**
 * 分隔sql字段 
 * field[i][0]:字段名称
 * field[i][1]:实际的字段名
 * @param fieldStr
 * @param paraStr
 * @return
 */
private String[][] splitFilterField(String fieldStr,String paraStr){
	//[姓名]empname;;;[帐号]useraccounts;;;[职务]empduy
	if(fieldStr==null || "".equals(fieldStr)){
		return null;
	}
	String temp;
	int i,j;
	String[][] field;
	String[] fieldArr=fieldStr.split(";;;");
	String[] paraArr=paraStr.split(",");
	field=new String[fieldArr.length][2];
	for(i=0;i<fieldArr.length;i++){
		temp=fieldArr[i];
		temp=temp.substring(1,temp.length());
		field[i][0]=temp.substring(0,temp.indexOf("]"));
		field[i][1]=temp.substring(temp.indexOf("]")+1);		
	}	
	return field;
}
private String getOptionValue(String tableName){
	String optionValue = "";
	DataSourceBase base = new DataSourceBase();
	java.sql.ResultSet rs = null;
	String sql = "SELECT field_id,field_name,field_desname FROM tfield,ttable WHERE field_table=table_id AND table_name='"+tableName+"'";
	try{
		base.begin();
		rs = base.executeQuery(sql);
		while(rs.next()){
			optionValue += "<option value=\""+rs.getString(2)+"\">"+rs.getString(3)+"</option>";
		}
		base.end();
	}catch(Exception e){
		base.end();
		e.printStackTrace();
	}
	return optionValue;
}

  private static final javax.servlet.jsp.JspFactory _jspxFactory =
          javax.servlet.jsp.JspFactory.getDefaultFactory();

  private static java.util.Map<java.lang.String,java.lang.Long> _jspx_dependants;

  static {
    _jspx_dependants = new java.util.HashMap<java.lang.String,java.lang.Long>(6);
    _jspx_dependants.put("/WEB-INF/tag-lib/struts-nested.tld", Long.valueOf(1499751390000L));
    _jspx_dependants.put("/WEB-INF/tag-lib/struts-tiles.tld", Long.valueOf(1499751390000L));
    _jspx_dependants.put("/WEB-INF/tag-lib/struts-logic.tld", Long.valueOf(1499751390000L));
    _jspx_dependants.put("/WEB-INF/tag-lib/struts-html.tld", Long.valueOf(1499751390000L));
    _jspx_dependants.put("/WEB-INF/tag-lib/struts-template.tld", Long.valueOf(1499751390000L));
    _jspx_dependants.put("/WEB-INF/tag-lib/struts-bean.tld", Long.valueOf(1499751390000L));
  }

  private static final java.util.Set<java.lang.String> _jspx_imports_packages;

  private static final java.util.Set<java.lang.String> _jspx_imports_classes;

  static {
    _jspx_imports_packages = new java.util.HashSet<>();
    _jspx_imports_packages.add("javax.servlet");
    _jspx_imports_packages.add("java.util");
    _jspx_imports_packages.add("javax.servlet.http");
    _jspx_imports_packages.add("javax.servlet.jsp");
    _jspx_imports_classes = new java.util.HashSet<>();
    _jspx_imports_classes.add("com.js.oa.userdb.service.CustomDatabaseBD");
    _jspx_imports_classes.add("com.js.util.util.DataSourceBase");
    _jspx_imports_classes.add("com.js.oa.eform.service.DataBaseInfoBD");
  }

  private org.apache.jasper.runtime.TagHandlerPool _005fjspx_005ftagPool_005fhtml_005fhtml;

  private volatile javax.el.ExpressionFactory _el_expressionfactory;
  private volatile org.apache.tomcat.InstanceManager _jsp_instancemanager;

  public java.util.Map<java.lang.String,java.lang.Long> getDependants() {
    return _jspx_dependants;
  }

  public java.util.Set<java.lang.String> getPackageImports() {
    return _jspx_imports_packages;
  }

  public java.util.Set<java.lang.String> getClassImports() {
    return _jspx_imports_classes;
  }

  public javax.el.ExpressionFactory _jsp_getExpressionFactory() {
    if (_el_expressionfactory == null) {
      synchronized (this) {
        if (_el_expressionfactory == null) {
          _el_expressionfactory = _jspxFactory.getJspApplicationContext(getServletConfig().getServletContext()).getExpressionFactory();
        }
      }
    }
    return _el_expressionfactory;
  }

  public org.apache.tomcat.InstanceManager _jsp_getInstanceManager() {
    if (_jsp_instancemanager == null) {
      synchronized (this) {
        if (_jsp_instancemanager == null) {
          _jsp_instancemanager = org.apache.jasper.runtime.InstanceManagerFactory.getInstanceManager(getServletConfig());
        }
      }
    }
    return _jsp_instancemanager;
  }

  public void _jspInit() {
    _005fjspx_005ftagPool_005fhtml_005fhtml = org.apache.jasper.runtime.TagHandlerPool.getTagHandlerPool(getServletConfig());
  }

  public void _jspDestroy() {
    _005fjspx_005ftagPool_005fhtml_005fhtml.release();
  }

  public void _jspService(final javax.servlet.http.HttpServletRequest request, final javax.servlet.http.HttpServletResponse response)
      throws java.io.IOException, javax.servlet.ServletException {

    final java.lang.String _jspx_method = request.getMethod();
    if (!"GET".equals(_jspx_method) && !"POST".equals(_jspx_method) && !"HEAD".equals(_jspx_method) && !javax.servlet.DispatcherType.ERROR.equals(request.getDispatcherType())) {
      response.sendError(HttpServletResponse.SC_METHOD_NOT_ALLOWED, "JSPs only permit GET, POST or HEAD. Jasper also permits OPTIONS");
      return;
    }

    final javax.servlet.jsp.PageContext pageContext;
    javax.servlet.http.HttpSession session = null;
    final javax.servlet.ServletContext application;
    final javax.servlet.ServletConfig config;
    javax.servlet.jsp.JspWriter out = null;
    final java.lang.Object page = this;
    javax.servlet.jsp.JspWriter _jspx_out = null;
    javax.servlet.jsp.PageContext _jspx_page_context = null;


    try {
      response.setContentType("text/html; charset=GBK");
      pageContext = _jspxFactory.getPageContext(this, request, response,
      			null, true, 8192, true);
      _jspx_page_context = pageContext;
      application = pageContext.getServletContext();
      config = pageContext.getServletConfig();
      session = pageContext.getSession();
      out = pageContext.getOut();
      _jspx_out = out;

      out.write("\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n");
      out.write("\r\n\r\n");

response.setHeader("Cache-Control","no-store");
response.setHeader("Pragma","no-cache");
response.setDateHeader ("Expires", 0);
response.setCharacterEncoding("GBK");
request.setCharacterEncoding("GBK");

int i,j;

String tableId=request.getParameter("tableId");
//String fieldId=request.getParameter("fieldId");
CustomDatabaseBD bd = new CustomDatabaseBD();
//String[] fieldInfo=bd.getFieldExtProperty(fieldId);
String[][] fieldSimpleInfo=bd.getFieldSimpleInfo(tableId);//某个表的字段
String[] fieldInfo = {"","","","","","","","","","","","",""};
fieldInfo[0] = request.getParameter("setFieldBoxSearch");
fieldInfo[1] = request.getParameter("setFieldChangeMethod");
fieldInfo[2] = request.getParameter("setFieldFetchSql");
fieldInfo[3] = request.getParameter("setFieldScript");
fieldInfo[4] = request.getParameter("setFieldToForm");
fieldInfo[5] = request.getParameter("setFieldShowValue");
fieldInfo[6] = request.getParameter("setFieldFilterList");
fieldInfo[7] = request.getParameter("setFieldFilterSearch");
fieldInfo[8] = request.getParameter("setInputSearchType");
fieldInfo[9] = request.getParameter("setStartRange");
fieldInfo[10] = request.getParameter("setHandleRange");
fieldInfo[11] = request.getParameter("setStartText");
fieldInfo[12] = request.getParameter("setHandleText");
/*
 fieldProp[0] 是否检索
 fieldProp[1] onchage事件标志
 fieldProp[2] fetchSql
 fieldProp[3] script
 fieldProp[4] toffield
 fieldProp[5] fieldvalue
 fieldProp[6] fieldFilterList
 fieldProp[7] fieldFilterSearch 
 fieldProp[8] inputSearchType
 fieldProp[9] startRange
 fieldProp[10] handleRange
 fieldProp[11] startText
 fieldProp[12] handleText
*/
//自定义检索需要的变量
String[] fieldProp = {"","","","","","","","","","","","",""};
List fieldList=new ArrayList();
String[] sqlPara=null;
String dsName="system";
String fieldValue="";
String fieldFilterList = "";
String fieldFilterSearch = "";
//检索设置变量
String tableName = "";//选择的数据库
List<String[]> fieldLiebiao = new ArrayList<String[]>();
List<String[]> fieldDuiying = new ArrayList<String[]>();
String[] fieldSet = {"","","","","","","","","","","","",""};
String optionValue = "";
String sqlCond = "";
String duiyingCond = "";
String[] startText = {"",""};
String[] handleText = {"",""};

//程序接口
String interfaceName="",interfaceMethodName="",interfaceMethodPara="";

if("0".equals(fieldInfo[8])){
	fieldProp = fieldInfo;
	fieldValue=fieldProp[5];
	if(fieldValue==null){
		fieldValue="";
	}
	String sqlParaStr="";
	if(fieldValue!=null && fieldValue.startsWith("$")){
		if(fieldValue.indexOf("].$[")>0){
			dsName=fieldValue.substring(2,fieldValue.indexOf("].$["));
			fieldValue=fieldValue.substring(fieldValue.indexOf("].$[")+4,fieldValue.length()-1);
		}else{
			fieldValue=fieldValue.substring(2,fieldValue.length()-1);
		}
		String fieldValueTmp = fieldValue.toLowerCase(); //注：转为小写后已经与原来的sql语句不一致
		sqlParaStr=fieldValue.substring(fieldValueTmp.indexOf("select")+6,fieldValueTmp.indexOf("from")).trim();
		sqlPara=sqlParaStr.split(",");
		/*for(int s = 0;s<sqlPara.length;s++){
			if(sqlPara[s].toLowerCase().contains(" as ")){
				sqlPara[s] = sqlPara[s].toLowerCase().split(" as ")[1].replace(" ","");
			}
		}*/
	}
	
	String[][] filterListArr=splitFilterField(fieldProp[6],sqlParaStr);
	String[][] filterSearchArr=splitFilterField(fieldProp[7],sqlParaStr);
	
	fieldFilterList=fieldProp[6]+";;;";
	fieldFilterSearch=fieldProp[7]+";;;";
	
	boolean hasField=false;
	if(sqlPara!=null){
		for(i=0;i<sqlPara.length;i++){
			hasField=false;
			if(filterListArr!=null){
				for(j=0;j<filterListArr.length;j++){
					if(sqlPara[i].equals(filterListArr[j][1])){
						fieldList.add(filterListArr[j]);
						hasField=true;
						break;
					}
				}
			}
			if(filterSearchArr!=null){
				if(!hasField){
					for(j=0;j<filterSearchArr.length;j++){
						if(sqlPara[i].equals(filterSearchArr[j][1])){
							fieldList.add(filterSearchArr[j]);
							hasField=true;
							break;
						}
					}
				}
			}
		}
	}
}else if("1".equals(fieldInfo[8])){
	fieldSet = fieldInfo;
	String sql = fieldSet[5];
	if(sql.length()>0){
		if(sql.length()>sql.indexOf(" from ")+6&&sql.indexOf(" where ")>0&&sql.length()>=sql.indexOf(" where ")
			&&sql.indexOf(" where ")>sql.indexOf(" from ")+6){
			tableName = sql.substring(sql.indexOf(" from ")+6,sql.indexOf(" where "));
		}
		if(sql.length()>sql.indexOf("1=1")+4&&sql.length()-1>sql.indexOf("1=1")+4){
			sqlCond = sql.substring(sql.indexOf("1=1")+4,sql.length()-1);
		}else{
			sqlCond = "";
		}
		while(sqlCond.startsWith(" ")){
			sqlCond = sqlCond.substring(1);
		}
	}
	if(fieldSet[2].length()>0){
		if(fieldSet[2].length()>fieldSet[2].indexOf("1=1")+4){
			duiyingCond = fieldSet[2].substring(fieldSet[2].indexOf("1=1")+4);
		}
	}
	optionValue = getOptionValue(tableName);
	String[] listStrings1 = fieldSet[6].split(";;;");
	String[] listStrings2 = fieldSet[7].split(";;;");
	String[] duiyingStrs = fieldSet[4].split(";;;");
	for(int x=0;x<listStrings1.length;x++){
		//[显示]jsf_1111_2223
		if(!"".equals(listStrings1[x])){
			String[] liebiao = new String[4];
			liebiao[1]=listStrings1[x].substring(1,listStrings1[x].indexOf("]"));
			liebiao[0]=listStrings1[x].substring(listStrings1[x].indexOf("]")+1);
			liebiao[2]="1";
			if(fieldSet[7].indexOf(listStrings1[x])>=0){
				liebiao[3]="1";
			}else{
				liebiao[3]="0";
			}
			fieldLiebiao.add(liebiao);
		}
	}
	for(int x=0;x<listStrings2.length;x++){
		if(!listStrings2[x].equals("")&&fieldSet[6].indexOf(listStrings2[x])<0){
			String[] liebiao = new String[4];
			liebiao[1]=listStrings1[x].substring(1,listStrings1[x].indexOf("]"));
			liebiao[0]=listStrings1[x].substring(listStrings1[x].indexOf("]")+1);
			liebiao[2]="0";
			liebiao[3]="1";
			
			fieldLiebiao.add(liebiao);
		}
	}
	for(int x=0;x<duiyingStrs.length;x++){
		if(!"".equals(duiyingStrs[x])){
			String[] duiying = new String[2];
			duiying[0] = duiyingStrs[x].split("=:=")[0];
			duiying[1] = duiyingStrs[x].split("=:=")[1];
			fieldDuiying.add(duiying);
		}
	}
	//System.out.println("----"+fieldSet[11]);
	if(!"".equals(fieldSet[11]) && fieldSet[11].contains(";;;")){
		startText = fieldSet[11].split(";;;");
	}
	//System.out.println("----"+fieldSet[12]);
	if(!"".equals(fieldSet[12]) && fieldSet[12].contains(";;;")){
		handleText = fieldSet[12].split(";;;");
	}
}else{
	//程序接口
	fieldProp = fieldInfo;
	fieldValue=fieldProp[5];
	if(fieldValue==null){
		fieldValue="";
	}
	
	//解析程序接口、方法、参数
	if(fieldValue.length()>0 && fieldValue.startsWith("$")){
		if(fieldValue.indexOf("$[interface:")>=0){
			interfaceName=fieldValue.substring(12,fieldValue.indexOf(";;;"));
			fieldValue=fieldValue.substring(fieldValue.indexOf(";;;")+3);
			if(fieldValue.indexOf(";;;;")>0){
				interfaceMethodName=fieldValue.substring(0,fieldValue.indexOf(";;;;"));
				interfaceMethodPara=fieldValue.substring(fieldValue.indexOf(";;;;")+4,fieldValue.indexOf("]"));
			}else{
				interfaceMethodName=fieldValue.substring(0,fieldValue.indexOf("]"));
			}
		}
	}
	
	//解析列表显示
	String[] interfaceFieldArr=fieldProp[6].split(";;;");
	String[] interfaceFieldTemp;	
	if(interfaceFieldArr.length>0&&fieldProp[6].contains(";;;")){
		String interfaceFieldName,interfaceFieldDisplayName;
		for(i=0;i<interfaceFieldArr.length;i++){
			interfaceFieldDisplayName=interfaceFieldArr[i].substring(1,interfaceFieldArr[i].indexOf("]"));
			interfaceFieldName=interfaceFieldArr[i].substring(interfaceFieldArr[i].indexOf("]")+1);
			interfaceFieldTemp=new String[2];
			interfaceFieldTemp[0]=interfaceFieldDisplayName;
			interfaceFieldTemp[1]=interfaceFieldName;
			fieldList.add(interfaceFieldTemp);
		}
	}
	
	//解析对象表单字段显示
	
	
}

      out.write('\r');
      out.write('\n');
      //  html:html
      org.apache.struts.taglib.html.HtmlTag _jspx_th_html_005fhtml_005f0 = (org.apache.struts.taglib.html.HtmlTag) _005fjspx_005ftagPool_005fhtml_005fhtml.get(org.apache.struts.taglib.html.HtmlTag.class);
      boolean _jspx_th_html_005fhtml_005f0_reused = false;
      try {
        _jspx_th_html_005fhtml_005f0.setPageContext(_jspx_page_context);
        _jspx_th_html_005fhtml_005f0.setParent(null);
        int _jspx_eval_html_005fhtml_005f0 = _jspx_th_html_005fhtml_005f0.doStartTag();
        if (_jspx_eval_html_005fhtml_005f0 != javax.servlet.jsp.tagext.Tag.SKIP_BODY) {
          do {
            out.write("\r\n<head>\r\n<title>选择表</title>\r\n<link href=\"/jsoa/skin/");
            out.print(session.getAttribute("skin"));
            out.write("/style-");
            out.print(session.getAttribute("browserVersion"));
            out.write(".css\" rel=\"stylesheet\" type=\"text/css\" />\r\n<script src=\"/jsoa/js/js.js\" language=\"javascript\"></script>\r\n<SCRIPT language=javascript src=\"/jsoa/js/openEndow.js\"></SCRIPT>\r\n<link rel=stylesheet type=\"text/css\" href=\"/jsoa/public/date_picker/DateObject2.css\">\r\n\r\n</head>\r\n<body leftmargin=\"0\" scroll=\"auto\" topmargin=\"0\" class=\"MainFrameBox Pupwin docBoxNoPanel\" onload=\"loadType()\"> \r\n");
 
	if(request.getParameter("state") != null) 
		out.print("<script>alert('该字段已经存在关联');</script>"); 

            out.write("\r\n\r\n<table width=\"100%\" height=\"100%\" border=\"0\" cellpadding=\"0\" cellspacing=\"5\" class=\"docBoxNoPanel\">\r\n<tr>\r\n\t<td colspan=\"2\" height=25px nowrap>\r\n\t\t <table width=\"100%\" border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\r\n\t\t\t <tr>\r\n\t\t         <td width=\"7%\" nowrap=\"nowrap\" valign=top>&nbsp;&nbsp;检索类型：</td>\r\n\t\t         <td>&nbsp;&nbsp;\r\n\t\t         <input type=\"radio\" id=\"inputSearchType\" name=\"inputSearchType\" value=\"1\" onclick=\"showTable('1');\" ");
            out.print(("1".equals(fieldInfo[8]))?"checked":"" );
            out.write(" />选择数据库表\r\n\t\t         <input type=\"radio\" id=\"inputSearchType\" name=\"inputSearchType\" value=\"0\" onclick=\"showTable('0');\" ");
            out.print(("0".equals(fieldInfo[8]))?"checked":"" );
            out.write(" />自定义sql检索\r\n\t\t         <input type=\"radio\" id=\"inputSearchType\" name=\"inputSearchType\" value=\"2\" onclick=\"showTable('2');\" ");
            out.print(("2".equals(fieldInfo[8]))?"checked":"" );
            out.write(" />程序接口\r\n\t\t         </td>\r\n\t\t     </tr>\r\n\t\t </table>\r\n\t</td>\r\n</tr>\r\n<tr>\r\n   <td valign=\"top\" colspan=2>\r\n       <table id=\"oldTable\" width=\"100%\" border=\"0\" cellpadding=\"0\" cellspacing=\"12\" style=\"display:none;\"> \r\n\t\t\t\t\t\t <tr>\r\n                             <td width=\"7%\" nowrap=\"nowrap\" valign=top>数据源：</td>\r\n                             <td>\r\n                             \t<select name=\"datasourceName\">\r\n                             \t\t<option value=\"system\">系统默认数据源</option>\r\n                             \t\t");

                             		String[] userDataSourceName=com.js.util.config.SystemCommon.getUserDatasourceName();
                             		if(userDataSourceName!=null){
                             			for(String dataSourceName:userDataSourceName){
                             				
            out.write("\r\n                             \t\t\t\t<option value=\"");
            out.print(dataSourceName );
            out.write('"');
            out.write(' ');
if(dsName.equals(dataSourceName)){out.print("selected");} 
            out.write('>');
            out.print(dataSourceName );
            out.write("</option>\r\n                             \t\t\t\t");

                             			}
                             		}
                             		
            out.write("\r\n                             \t</select>\r\n                             </td>\r\n                          </tr>\r\n                          <tr>\r\n                             <td width=\"60\" nowrap=\"nowrap\" valign=top>检索SQL：</td>\r\n                             <td>\r\n                             <textarea rows=\"4\" cols=\"50\" style=\"height:50px;width:80%\" id=\"seqValue\" name=\"seqValue\">");
            out.print(fieldValue );
            out.write("</textarea>\r\n                             </td>\r\n                          </tr>\r\n                          \r\n                          <tr>\r\n                            <td nowrap=\"nowrap\" valign=top>列表显示：</td>\r\n                            <td>\r\n\t\t\t\t\t\t\t\t<table id=\"tableFilterField\" width=\"80%\" border=\"1\" cellpadding=\"1\" cellspacing=\"0\" bordercolor=\"#000000\" id=\"tableSource\" bordercolordark=\"#E1E1E1\">\r\n\t\t\t\t\t\t\t\t    <tr align=\"center\">\r\n\t\t\t\t\t\t\t\t    \t<td width=\"10%\">序号</td>\r\n\t\t\t\t\t\t\t\t\t\t<td width=\"25%\">字段</td>\r\n\t\t\t\t\t\t\t\t\t\t<td width=\"35%\">显示名称</td>\r\n\t\t\t\t\t\t\t\t\t\t<td widht=\"10%\" nowrap>列表显示</td>\r\n\t\t\t\t\t\t\t\t\t\t<td width=\"10%\" nowrap>查询显示</td>\r\n\t\t\t\t\t\t\t\t\t\t<td width=\"10%\"><button class=\"btnButton2font\" style=\"cursor:pointer\" onClick=\"javascript:addFilterField();\">新增</button>\r\n\t\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t    </tr>\r\n\t\t\t\t\t\t\t\t    ");

								    if(sqlPara!=null){
								    	String strTemp;
								    	String[] fieldTemp;
								    	for(i=0;i<fieldList.size();i++){
								    		fieldTemp=(String[])fieldList.get(i);
								    		strTemp="]"+fieldTemp[1].trim()+";;;";
								    		
            out.write("\r\n\t\t\t\t\t\t\t\t    \t\t<tr>\r\n\t\t\t\t\t\t\t\t    \t\t\t<td><input style=\"border-width:0px;width=40px;\" type=\"text\" id=\"filterFieldNum\" name=\"filterFieldNum\" value=\"");
            out.print(i+1 );
            out.write("\" readonly></td>\r\n\t\t\t\t\t\t\t\t    \t\t\t<td><input type=\"text\" id=\"filterSqlField\" name=\"filterSqlField\" value=\"");
            out.print(fieldTemp[1] );
            out.write("\" style=\"width:100%;\"></td>\r\n\t\t\t\t\t\t\t\t    \t\t\t<td><input type=\"text\" id=\"filterDisplayName\" name=\"filterDisplayName\" value=\"");
            out.print(fieldTemp[0] );
            out.write("\" style=\"width:100%;\"></td>\r\n\t\t\t\t\t\t\t\t    \t\t\t<td><input type=\"checkbox\" id=\"filterList\" name=\"filterList\" ");
if(fieldFilterList.indexOf(strTemp)>=0){out.print("checked");} 
            out.write("></td>\r\n\t\t\t\t\t\t\t\t    \t\t\t<td><input type=\"checkbox\" id=\"filterSearch\" name=\"filterSearch\" ");
if(fieldFilterSearch.indexOf(strTemp)>=0){out.print("checked");} 
            out.write("></td>\r\n\t\t\t\t\t\t\t\t    \t\t\t<td align=\"center\"><button class=\"btnButton2font\" style=\"cursor:pointer\" onClick=\"javascript:deleteFilterRow(this);\">删除</button></td>\r\n\t\t\t\t\t\t\t\t    \t\t</tr>\r\n\t\t\t\t\t\t\t\t    \t\t");
								    		
								    	}
								    }
								    
            out.write("\t\t\t\t\t\t\t\t    \r\n\t\t\t\t\t\t\t\t    \r\n\t\t\t\t\t\t\t\t</table>\r\n\t\t\t\t\t\t\t</td>\r\n                          </tr>\r\n                          <tr>\r\n                            <td nowrap=\"nowrap\">选中事件：</td>\r\n                            <td>\r\n                                <input type=\"hidden\" id=\"onchangeMethod\" name=\"onchangeMethod\" value=\"0\">\r\n\t\t\t\t\t\t\t\t<input type=\"checkbox\" id=\"ckonchangeMethod\" name=\"ckonchangeMethod\" value=\"1\" ");
if("1".equals(fieldProp[1]) || "3".equals(fieldProp[1])){out.print("checked");} 
            out.write(" onclick=\"changeMethod('0');\">提取数据&nbsp;&nbsp;<input type=\"checkbox\" name=\"ckonchangeMethod\" value=\"2\" ");
if("2".equals(fieldProp[1]) || "3".equals(fieldProp[1])){out.print("checked");} 
            out.write(" onclick=\"changeMethod('0');\">执行JavaScript脚本\r\n                            </td>\r\n                          </tr>\r\n                          <tr id=\"fetchSqlTR\"  style=\"display:none;\">\r\n                            <td nowrap=\"nowrap\" valign=\"top\">提取SQL：</td>\r\n                            <td>\r\n\t\t\t\t\t\t\t\t<textarea rows=\"4\" cols=\"50\" title=\"注意sql语句中select和from要使用小写\" style=\"height:50px;width:80%\" id=\"fetchSqlValue\" name=\"fetchSqlValue\">");
if(fieldProp[2]!=null){out.print(fieldProp[2]==null?"":fieldProp[2]);} 
            out.write("</textarea>\r\n                            </td>\r\n                          </tr>\r\n                          <tr id=\"fetchSqlFieldTR\"  style=\"display:none;\">\r\n                            <td nowrap=\"nowrap\" valign=\"top\">对应字段：</td>\r\n                            <td>\r\n\t\t\t\t\t\t\t\t<table id=\"tableField\" width=\"80%\" border=\"1\" cellpadding=\"1\" cellspacing=\"0\" bordercolor=\"#000000\" bordercolordark=\"#E1E1E1\">\r\n\t\t\t\t\t\t\t\t    <tr align=\"center\">\r\n\t\t\t\t\t\t\t\t    \t<td width=\"10%\">序号</td>\r\n\t\t\t\t\t\t\t\t\t\t<td width=\"35%\">表单中字段</td>\r\n\t\t\t\t\t\t\t\t\t\t<td width=\"45%\">对应提取的字段</td>\r\n\t\t\t\t\t\t\t\t\t\t<td width=\"10%\"><button class=\"btnButton2font\" style=\"cursor:pointer\" onClick=\"javascript:addField();\">新增</button>\r\n\t\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t    </tr>\r\n\t\t\t\t\t\t\t\t    ");

								    if(fieldProp[4]!=null && fieldProp[4].length()>0){								    	
								    	String[] toffieldArr=fieldProp[4].split(";;;");
								    	String fieldVal,fieldText;
								    	for(i=0;i<toffieldArr.length;i++){
								    		fieldVal=toffieldArr[i].substring(0,toffieldArr[i].indexOf("=:="));
								    		fieldText=toffieldArr[i].substring(toffieldArr[i].indexOf("=:=")+3);
								    		
            out.write("\r\n\t\t\t\t\t\t\t\t    \t\t<tr>\r\n\t\t\t\t\t\t\t\t    \t\t    <td><input style=\"border-width:0px;width=40px;\" type=\"text\" id=\"fieldNum\" name=\"fieldNum\" value=\"");
            out.print((i+1) );
            out.write("\" readonly></td>\r\n\t\t\t\t\t\t\t\t    \t\t    <td>\r\n\t\t\t\t\t\t\t\t    \t\t    <select id=\"toFormField\" name=\"toFormField\">\r\n\t\t\t\t\t\t\t\t    \t\t        ");

								    		        for(j=0;j<fieldSimpleInfo.length;j++){
								    		        
            out.write("\r\n\t\t\t\t\t\t\t\t    \t\t    \t<option value=\"");
            out.print(fieldSimpleInfo[j][2] );
            out.write('"');
            out.write(' ');
if(fieldVal.equals(fieldSimpleInfo[j][2])){out.print("selected");} 
            out.write('>');
            out.print(fieldSimpleInfo[j][1] );
            out.write("</option>\r\n\t\t\t\t\t\t\t\t    \t\t    \t");
} 
            out.write("\t\t\t\t\t\t\t\t    \t\t    \t\r\n\t\t\t\t\t\t\t\t    \t\t    </select>\r\n\t\t\t\t\t\t\t\t    \t\t    </td>\r\n\t\t\t\t\t\t\t\t    \t\t    <td><input type=\"text\" id=\"fetchSqlField\" name=\"fetchSqlField\" style=\"width:100%;\" value=\"");
            out.print(fieldText );
            out.write("\"></td>\r\n\t\t\t\t\t\t\t\t    \t\t    <td align=\"center\"><button class=\"btnButton2font\" style=\"cursor:pointer\" onClick=\"javascript:deleteRow(this);\">删除</button></td>\r\n\t\t\t\t\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t\t\t    \t\t");

								    	}
								    
            out.write("\r\n\t\t\t\t\t\t\t\t    ");
} 
            out.write("\r\n\t\t\t\t\t\t\t\t</table>\r\n                            </td>\r\n                          </tr>\r\n                           <tr id=\"scriptTR\" style=\"display:none;\">\r\n                            <td nowrap=\"nowrap\" valign=\"top\">编辑脚本：</td>\r\n                            <td>\r\n\t\t\t\t\t\t\t\t<textarea rows=\"4\" cols=\"50\" style=\"height:100px;width:80%\" id=\"fieldScriptValue\" name=\"fieldScriptValue\">");
if(fieldProp[3]!=null){out.print(fieldProp[3]==null?"":fieldProp[3]);} 
            out.write("</textarea>\r\n                            </td>\r\n                          </tr>\r\n      </table>\r\n\t\t");

		String[][] tableInfo ;
		String domainId =  session.getAttribute("domainId").toString();
		String userName = session.getAttribute("userName").toString();		
		String userId = session.getAttribute("userId").toString();		
		String orgId = session.getAttribute("orgId").toString();
		String orgName=session.getAttribute("orgName").toString();
		DataBaseInfoBD dbInfo = new DataBaseInfoBD();
		if(com.js.util.config.SystemCommon.getMultiDepart()==1){
			tableInfo= dbInfo.getTableInfoByRange(domainId,userId,orgId);
		}else{
			tableInfo= dbInfo.getTableInfo(domainId);
		}
		if (tableInfo == null){
			tableInfo = new String[0][0];
		}
		
            out.write("\r\n   <table id=\"newTable\" width=\"100%\" border=\"0\" cellpadding=\"\" cellspacing=\"12\" style=\"display:;\">\r\n      <tr>\r\n        <td nowrap=\"nowrap\" width=\"7%\" valign=top>列表显示：</td>\r\n        <td>\r\n\t\t\t<table id=\"tableFilterField1\" width=\"80%\" border=\"1\" cellpadding=\"1\" cellspacing=\"0\" bordercolor=\"#000000\" id=\"tableSource1\" bordercolordark=\"#E1E1E1\">\r\n\t\t\t\t<tr><td colspan=2 nowrap>&nbsp;数据表：\r\n\t\t\t\t<select name=\"baseName\" id=\"baseName\" style=\"width:200px;\" onchange=\"setOption(this);\">\r\n\t\t\t\t<option value=\"\">---请选择---</option>\r\n\t\t\t\t");
for(int t=0;t<tableInfo.length;t++){ 
            out.write("\r\n\t\t\t\t<option value=\"");
            out.print(tableInfo[t][2] );
            out.write('"');
            out.write(' ');
            out.print(tableName.equals(tableInfo[t][2])?"selected":"" );
            out.write('>');
            out.print(tableInfo[t][1] );
            out.write("</option>\r\n\t\t\t\t");
} 
            out.write("\r\n\t\t\t\t</select>\r\n\t\t\t\t</td>\r\n\t\t\t\t<td colspan=4>条件：<input type=\"text\" name=\"Sqlcond\" id=\"Sqlcond\" style=\"width:80%\" value=\"");
            out.print(sqlCond );
            out.write("\" /></td></tr>\r\n\t\t\t\t<tr align=\"center\">\r\n\t\t\t\t\t<td width=\"10%\">序号</td>\r\n\t\t\t\t\t<td width=\"25%\">字段</td>\r\n\t\t\t\t\t<td width=\"35%\">显示名称</td>\r\n\t\t\t\t\t<td widht=\"10%\" nowrap>列表显示</td>\r\n\t\t\t\t\t<td width=\"10%\" nowrap>查询显示</td>\r\n\t\t\t\t\t<td width=\"10%\"><button class=\"btnButton2font\" style=\"cursor:pointer\" onClick=\"javascript:addFilterNewField();\">新增</button>\r\n\t\t\t\t\t</td>\r\n\t\t\t\t</tr>\r\n\t\t\t\t");
for(int x=0;x<fieldLiebiao.size();x++){ 
				String[] liebiao = fieldLiebiao.get(x); 
            out.write("\r\n\t\t\t\t<tr>\r\n\t\t\t\t\t<td><input style=\"border-width:0px;width=40px;\" type=\"text\" name=\"filterFieldNum1\" value=\"");
            out.print(x+1 );
            out.write("\" readonly></td>\r\n\t\t\t\t\t<td>\r\n\t\t\t\t\t<select name=\"filterSqlField1\" id=\"filterSqlField1\" style=\"width:100%\" onchange=\"setDisplayName(this)\">\r\n\t\t\t\t\t<option value=\"\">---请选择---</option>\r\n\t\t\t\t\t");
            out.print(optionValue.replace("\""+liebiao[0]+"\"", "\""+liebiao[0]+"\" selected") );
            out.write("\r\n\t\t\t\t\t</select></td>\r\n\t\t\t\t\t<td><input type=\"text\" id=\"filterDisplayName1\" name=\"filterDisplayName1\" value=\"");
            out.print(liebiao[1] );
            out.write("\" style=\"width:100%;\"></td>\r\n\t\t\t\t\t<td><input type=\"checkbox\" id=\"filterList1\" name=\"filterList1\" ");
if(liebiao[2].equals("1")){out.print("checked");} 
            out.write("></td>\r\n\t\t\t\t\t<td><input type=\"checkbox\" id=\"filterSearch1\" name=\"filterSearch1\" ");
if(liebiao[3].equals("1")){out.print("checked");} 
            out.write("></td>\r\n\t\t\t\t\t<td align=\"center\"><button class=\"btnButton2font\" style=\"cursor:pointer\" onClick=\"javascript:deleteFilterNewRow(this);\">删除</button></td>\r\n\t\t\t\t</tr>\r\n\t\t\t\t");
} 
            out.write("\r\n\t\t\t</table>\r\n\t\t</td>\r\n    </tr>\r\n    <tr>\r\n\t    <td nowrap=\"nowrap\">&nbsp;</td>\r\n\t    <td>发起人范围：\r\n\t\t<input type=\"radio\" id=\"startRange\" name=\"startRange\" value=\"0\" onclick=\"radioSet('0',this);\" ");
            out.print(fieldSet[9].equals("0")?"checked":"" );
            out.write(" />全部\r\n\t\t<input type=\"radio\" id=\"startRange\" name=\"startRange\" value=\"1\" onclick=\"radioSet('0',this);\" ");
            out.print(fieldSet[9].equals("1")?"checked":"" );
            out.write(" />本人\r\n\t\t<input type=\"radio\" id=\"startRange\" name=\"startRange\" value=\"2\" onclick=\"radioSet('0',this);\" ");
            out.print(fieldSet[9].equals("2")?"checked":"" );
            out.write(" />本部门\r\n\t\t<input type=\"radio\" id=\"startRange\" name=\"startRange\" value=\"3\" onclick=\"radioSet('0',this);\" ");
            out.print(fieldSet[9].equals("3")?"checked":"" );
            out.write(" />本部门及下属部门\r\n\t\t<input type=\"radio\" id=\"startRange\" name=\"startRange\" value=\"4\" onclick=\"radioSet('0',this);\" ");
            out.print(fieldSet[9].equals("4")?"checked":"" );
            out.write(" />自定义范围\r\n\t\t<span id=\"startSpan\" style=\"display:");
            out.print(fieldSet[9].equals("4")?"":"none" );
            out.write(";\">\r\n\t\t&nbsp;<input type=text class=\"inputText\" style=\"width:200px;cursor:pointer\" id=\"startShow\" name=\"startShow\" value=\"");
            out.print(startText[1] );
            out.write("\" \r\n\t\ttitle=\"请点击选择\" onClick=\"javascript:selectEndow('startText','startShow','org','','org','*0*');\" readonly=\"true\"/>\r\n\t\t<input type=\"hidden\" name=\"startText\" id=\"startText\" value=\"");
            out.print(startText[0] );
            out.write("\" ></span>\r\n\t\t</td>\r\n\t</tr>\r\n\t<tr>\r\n\t\t<td nowrap=\"nowrap\">&nbsp;</td>\r\n\t\t<td>办理人范围：\r\n\t\t<input type=\"radio\" id=\"handleRange\" name=\"handleRange\" value=\"0\" onclick=\"radioSet('1',this);\" ");
            out.print(fieldSet[10].equals("0")?"checked":"" );
            out.write(" />全部\r\n\t\t<input type=\"radio\" id=\"handleRange\" name=\"handleRange\" value=\"1\" onclick=\"radioSet('1',this);\" ");
            out.print(fieldSet[10].equals("1")?"checked":"" );
            out.write(" />本人\r\n\t\t<input type=\"radio\" id=\"handleRange\" name=\"handleRange\" value=\"2\" onclick=\"radioSet('1',this);\" ");
            out.print(fieldSet[10].equals("2")?"checked":"" );
            out.write(" />本部门\r\n\t\t<input type=\"radio\" id=\"handleRange\" name=\"handleRange\" value=\"3\" onclick=\"radioSet('1',this);\" ");
            out.print(fieldSet[10].equals("3")?"checked":"" );
            out.write(" />本部门及下属部门\r\n\t\t<input type=\"radio\" id=\"handleRange\" name=\"handleRange\" value=\"4\" onclick=\"radioSet('1',this);\" ");
            out.print(fieldSet[10].equals("4")?"checked":"" );
            out.write(" />自定义范围\r\n\t\t<span id=\"handleSpan\" style=\"display:");
            out.print(fieldSet[10].equals("4")?"":"none" );
            out.write(";\">\r\n\t\t&nbsp;<input type=text class=\"inputText\" style=\"width:200px;cursor:pointer\" id=\"handleShow\" name=\"handleShow\" value=\"");
            out.print(handleText[1] );
            out.write("\" \r\n\t\ttitle=\"请点击选择\" onClick=\"javascript:selectEndow('handleText','handleShow','org','','org','*0*');\" readonly=\"true\"/>\r\n\t\t<input type=\"hidden\" name=\"handleText\" id=\"handleText\" value=\"");
            out.print(handleText[0] );
            out.write("\" ></span>\r\n\t\t</td>\r\n\t </tr>\r\n     <tr><td nowrap=\"nowrap\">选中事件：</td>\r\n         <td>\r\n\t\t\t<input type=\"hidden\" id=\"onchangeMethod1\" name=\"onchangeMethod1\" value=\"0\">\r\n\t\t\t<input type=\"checkbox\" id=\"ckonchangeMethod1\" name=\"ckonchangeMethod1\" value=\"1\" \r\n\t\t\t");
if("1".equals(fieldSet[1]) || "3".equals(fieldSet[1])){out.print("checked");} 
            out.write(" onclick=\"changeMethod('1');\">\r\n\t\t\t提取数据&nbsp;&nbsp;<input type=\"checkbox\" id=\"ckonchangeMethod1\" name=\"ckonchangeMethod1\" value=\"2\" \r\n\t\t\t");
if("2".equals(fieldSet[1]) || "3".equals(fieldSet[1])){out.print("checked");} 
            out.write(" onclick=\"changeMethod('1');\">\r\n\t\t\t执行JavaScript脚本\r\n         </td>\r\n      </tr>\r\n      <tr id=\"fetchSqlFieldTR1\"  style=\"display:none;\">\r\n          <td nowrap=\"nowrap\" valign=\"top\">对应字段：</td>\r\n      \t  <td>\r\n\t\t      <table id=\"tableField1\" width=\"80%\" border=\"1\" cellpadding=\"1\" cellspacing=\"0\" bordercolor=\"#000000\"  bordercolordark=\"#E1E1E1\">\r\n\t\t\t\t\t<!-- <tr><td colspan=4>条件：<input type=\"hidden\" name=\"duiyingCond\" id=\"duiyingCond\" style=\"width:80%\" value=\"");
            out.print(duiyingCond );
            out.write("\" /></td></tr> -->\r\n\t\t\t\t\t<input type=\"hidden\" name=\"duiyingCond\" id=\"duiyingCond\" style=\"width:80%\" value=\"\" />\r\n\t\t\t\t\t<tr align=\"center\">\r\n\t\t\t\t\t\t<td width=\"10%\">序号</td>\r\n\t\t\t\t\t\t<td width=\"35%\">表单中字段</td>\r\n\t\t\t\t\t\t<td width=\"45%\">对应提取的字段</td>\r\n\t\t\t\t\t\t<td width=\"10%\"><button class=\"btnButton2font\" style=\"cursor:pointer\" onClick=\"javascript:addNewField();\">新增</button>\r\n\t\t\t\t\t\t</td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t\t");
for(int x=0;x<fieldDuiying.size();x++){ 
					String[] duiying = fieldDuiying.get(x); 
            out.write("\r\n\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t<td><input style=\"border-width:0px;width=40px;\" type=\"text\" id=\"fieldNum1\" name=\"fieldNum1\" value=\"");
            out.print((x+1) );
            out.write("\" readonly></td>\r\n\t\t\t\t\t\t<td><select id=\"toFormField1\" name=\"toFormField1\" style=\"width:100%\">");

							for(int y=0;y<fieldSimpleInfo.length;y++){
            out.write("\r\n\t\t\t\t\t\t\t<option value=\"");
            out.print(fieldSimpleInfo[y][2] );
            out.write('"');
            out.write(' ');
if(duiying[0].equals(fieldSimpleInfo[y][2])){out.print("selected");} 
            out.write('>');
            out.print(fieldSimpleInfo[y][1] );
            out.write("</option>\r\n\t\t\t\t\t\t\t");
} 
            out.write("</select></td>\r\n\t\t\t\t\t\t<td><select name=\"fetchSqlField1\" id=\"fetchSqlField1\" style=\"width:100%\">\r\n\t\t\t\t\t\t<option value=\"\">---请选择---</option>\r\n\t\t\t\t\t\t");
            out.print(optionValue.replace("\""+duiying[1]+"\"", "\""+duiying[1]+"\" selected") );
            out.write("\r\n\t\t\t\t\t\t</select></td>\r\n\t\t\t\t\t\t<td align=\"center\"><button class=\"btnButton2font\" style=\"cursor:pointer\" onClick=\"javascript:deleteNewRow(this);\">删除</button></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t\t");
} 
            out.write("\r\n\t\t\t\t</table>\r\n             </td>\r\n        </tr>\r\n        <tr id=\"scriptTR1\" style=\"display:none;\">\r\n             <td nowrap=\"nowrap\" valign=\"top\">编辑脚本：</td>\r\n             <td><textarea rows=\"4\" cols=\"50\" style=\"height:100px;width:80%\" id=\"fieldScriptValue1\" name=\"fieldScriptValue1\">");
            out.print(fieldSet[3] );
            out.write("</textarea></td>\r\n        </tr>\r\n    </table>\r\n    \r\n    <table id=\"interfaceTable\" width=\"100%\" border=\"0\" cellpadding=\"\" cellspacing=\"12\" style=\"display:none;\">\r\n\t    <tr>\r\n\t        <td nowrap=\"nowrap\" width=\"7%\" valign=top>接口类名：</td>\r\n\t         <td>\r\n\t         <input type=\"text\" name=\"interfaceName\" id=\"interfaceName\" value=\"");
            out.print(interfaceName );
            out.write("\" style=\"width:60%;\"/>\r\n\t         </td>\r\n\t    </tr>\r\n\t    <tr>\r\n\t        <td nowrap=\"nowrap\" width=\"7%\" valign=top>方&nbsp;法&nbsp;名：</td>\r\n\t         <td>\r\n\t         <input type=\"text\" name=\"interfaceMethodName\" id=\"interfaceMethodName\"  value=\"");
            out.print(interfaceMethodName );
            out.write("\" style=\"width:60%;\" />\r\n\t         </td>\r\n\t    </tr>\r\n\t     <tr>\r\n\t        <td nowrap=\"nowrap\" width=\"7%\" valign=top>方法参数：</td>\r\n\t         <td>\r\n\t         <input type=\"text\" name=\"interfaceMethodPara\" id=\"interfaceMethodPara\"  value=\"");
            out.print(interfaceMethodPara );
            out.write("\" style=\"width:60%;\" />\r\n\t         </td>\r\n\t    </tr>\r\n\t    <tr>\r\n            <td nowrap=\"nowrap\" valign=top>列表显示：</td>\r\n            <td>\r\n\t\t\t\t<table id=\"interfaceFieldTable\" width=\"80%\" border=\"1\" cellpadding=\"1\" cellspacing=\"0\" bordercolor=\"#000000\"  bordercolordark=\"#E1E1E1\">\r\n\t\t\t\t    <tr align=\"center\">\r\n\t\t\t\t    \t<td width=\"10%\">序号</td>\r\n\t\t\t\t\t\t<td width=\"30%\">字段</td>\r\n\t\t\t\t\t\t<td width=\"35%\">显示名称</td>\r\n\t\t\t\t\t\t<!-- <td widht=\"10%\" nowrap>列表显示</td> -->\r\n\t\t\t\t\t\t<td width=\"15%\"><button class=\"btnButton2font\" style=\"cursor:pointer\" onClick=\"javascript:addInterfaceField();\">新增</button>\r\n\t\t\t\t\t\t</td>\r\n\t\t\t\t    </tr>\r\n\t\t\t\t    ");

				    //if(sqlPara!=null){
				    	String[] fieldTemp;
				    	for(i=0;i<fieldList.size();i++){
				    		fieldTemp=(String[])fieldList.get(i);
				    		
            out.write("\r\n\t\t\t\t   \r\n\t\t\t\t    \t\t<tr>\r\n\t\t\t\t    \t\t\t<td><input style=\"border-width:0px;width=40px;\" type=\"text\" name=\"interfaceFieldNum\" value=\"");
            out.print((i+1) );
            out.write("\" readonly></td>\r\n\t\t\t\t    \t\t\t<td><input type=\"text\" name=\"interfaceFieldName\" id=\"interfaceFieldName\" value=\"");
            out.print(fieldTemp[1] );
            out.write("\" style=\"width:100%;\"></td>\r\n\t\t\t\t    \t\t\t<td><input type=\"text\" name=\"interfaceDisplayName\" id=\"interfaceDisplayName\" value=\"");
            out.print(fieldTemp[0] );
            out.write("\" style=\"width:100%;\"></td>\r\n\t\t\t\t    \t\t\t<!-- <td><input type=\"checkbox\" name=\"interfaceList\" ></td>-->\r\n\t\t\t\t    \t\t\t<td align=\"center\"><button class=\"btnButton2font\" style=\"cursor:pointer\" onClick=\"javascript:deleteInterfaceRow(this);\">删除</button></td>\r\n\t\t\t\t    \t\t</tr>\r\n\t\t\t\t    \t\t");
								    		
				    	 }
				     //}
				    
            out.write("\t\t\t\t\t\t\t\t    \r\n\t\t\t\t    \r\n\t\t\t\t</table>\r\n\t\t\t</td>\r\n         </tr>\r\n         <tr>\r\n             <td nowrap=\"nowrap\">选中事件：</td>\r\n             <td>\r\n             <input type=\"hidden\" name=\"interfaceOnchangeMethod\" id=\"interfaceOnchangeMethod\" value=\"0\">\r\n             <input type=\"checkbox\" name=\"interfaceCkOnchangeMethod\" id=\"interfaceCkOnchangeMethod\" value=\"1\" ");
if("1".equals(fieldProp[1]) || "3".equals(fieldProp[1])){out.print("checked");} 
            out.write(" onclick=\"interfaceChangeMethod();\">提取数据&nbsp;&nbsp;\r\n             <input type=\"checkbox\" name=\"interfaceCkOnchangeMethod\" id=\"interfaceCkOnchangeMethod\" value=\"2\" ");
if("2".equals(fieldProp[1]) || "3".equals(fieldProp[1])){out.print("checked");} 
            out.write(" onclick=\"interfaceChangeMethod();\">执行JavaScript脚本\r\n           </td>\r\n         </tr>\r\n         \r\n         <tr id=\"interfaceFetchFieldTR\"  style=\"display:none;\">\r\n           <td nowrap=\"nowrap\" valign=\"top\">对应字段：</td>\r\n           <td>\r\n\t\t\t<table id=\"interfaceFetchTable\" name=\"interfaceFetchTable\" width=\"80%\" border=\"1\" cellpadding=\"1\" cellspacing=\"0\" bordercolor=\"#000000\" bordercolordark=\"#E1E1E1\">\r\n\t\t\t    <tr align=\"center\">\r\n\t\t\t    \t<td width=\"10%\">序号</td>\r\n\t\t\t\t\t<td width=\"35%\">表单中字段</td>\r\n\t\t\t\t\t<td width=\"45%\">对应提取的字段</td>\r\n\t\t\t\t\t<td width=\"10%\"><button class=\"btnButton2font\" style=\"cursor:pointer\" onClick=\"javascript:addInterfaceFetchField();\">新增</button>\r\n\t\t\t\t\t</td>\r\n\t\t\t    </tr>\t\t     \r\n\t\t\t\t\t\t\t\t    \r\n\t\t\t\t");

			    if(fieldProp[4]!=null && fieldProp[4].length()>0){								    	
			    	String[] toffieldArr=fieldProp[4].split(";;;");
			    	String fieldVal,fieldText;
			    	for(i=0;i<toffieldArr.length;i++){
			    		fieldVal=toffieldArr[i].substring(0,toffieldArr[i].indexOf("=:="));
			    		fieldText=toffieldArr[i].substring(toffieldArr[i].indexOf("=:=")+3);
			    		
            out.write("\t    \r\n\t\t\t   \r\n\t\t\t    \t\t<tr>\r\n\t\t\t    \t\t    <td><input style=\"border-width:0px;width=40px;\" type=\"text\" name=\"interfaceFetchFieldNum\" value=\"");
            out.print((i+1) );
            out.write("\" readonly></td>\r\n\t\t\t    \t\t    <td>\r\n\t\t\t    \t\t    <select id=\"interfaceToFormField\" name=\"interfaceToFormField\" style=\"width:90%;\">\r\n\t\t\t    \t\t     ");

			    		        for(j=0;j<fieldSimpleInfo.length;j++){
			    		        
            out.write("\r\n\t\t\t    \t\t    \t<option value=\"");
            out.print(fieldSimpleInfo[j][2] );
            out.write('"');
            out.write(' ');
if(fieldVal.equals(fieldSimpleInfo[j][2])){out.print("selected");} 
            out.write('>');
            out.print(fieldSimpleInfo[j][1] );
            out.write("</option>\r\n\t\t\t    \t\t     ");
} 
            out.write("  \t\t\t\t\t\t\t\t    \t\t    \t\r\n\t\t\t    \t\t    </select>\r\n\t\t\t    \t\t    </td>\r\n\t\t\t    \t\t    <td><input type=\"text\" id=\"interfaceFetchField\" name=\"interfaceFetchField\" style=\"width:100%;\" value=\"");
            out.print(fieldText );
            out.write("\"></td>\r\n\t\t\t    \t\t    <td align=\"center\"><button class=\"btnButton2font\" style=\"cursor:pointer\" onClick=\"javascript:deleteInterfaceFetchRow(this);\">删除</button></td>\r\n\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t");

				    	}
				  } 
            out.write("\r\n\t\t\t    \t\r\n\t\t\t</table>\r\n          </td>\r\n        </tr>\r\n        <tr id=\"interfaceScriptTR\" style=\"display:none;\">\r\n           <td nowrap=\"nowrap\" valign=\"top\">编辑脚本：</td>\r\n           <td>\r\n           <textarea rows=\"4\" cols=\"50\" style=\"height:100px;width:80%\" name=\"interfaceFieldScriptValue\" id=\"interfaceFieldScriptValue\">");
if(fieldProp[3]!=null){out.print(fieldProp[3]==null?"":fieldProp[3]);} 
            out.write("</textarea>\r\n          </td>\r\n        </tr>\r\n    </table>\r\n\t<div>\r\n\t\t<button class=\"btnButton4font\" onclick=\"javascript:save();\">保存退出</button>\r\n\t\t<button class=\"btnButton2font\" onclick=\"window.location.reload();\">重置</button>\r\n\t\t<button class=\"btnButton2font\" onclick=\"javascript:window.close()\">退出</button>\r\n\t</div>\r\n\r\n  </td>\r\n  </tr>\r\n</table>\r\n</body>\r\n<script language=\"javascript\">\r\nfunction showTable(flag){\r\n\tif(\"0\"==flag){\r\n\t\tdocument.getElementById(\"oldTable\").style.display=\"\";\r\n\t\tdocument.getElementById(\"newTable\").style.display=\"none\";\r\n\t\tdocument.getElementById(\"interfaceTable\").style.display=\"none\";\r\n\t}else if(\"1\"==flag){\r\n\t\tdocument.getElementById(\"oldTable\").style.display=\"none\";\r\n\t\tdocument.getElementById(\"newTable\").style.display=\"\";\r\n\t\tdocument.getElementById(\"interfaceTable\").style.display=\"none\";\r\n\t}else{\r\n\t\tdocument.getElementById(\"oldTable\").style.display=\"none\";\r\n\t\tdocument.getElementById(\"newTable\").style.display=\"none\";\r\n\t\tdocument.getElementById(\"interfaceTable\").style.display=\"\";\r\n\t\tif(document.getElementsByName(\"interfaceCkOnchangeMethod\")[0].checked){\r\n");
            out.write("\t\t\tdocument.getElementById(\"interfaceFetchFieldTR\").style.display=\"\";\r\n\t\t}\r\n\t\tif(document.getElementsByName(\"interfaceCkOnchangeMethod\")[1].checked){\r\n\t\t\tdocument.getElementById(\"interfaceScriptTR\").style.display=\"\";\r\n\t\t}\r\n\t}\r\n}\r\n\tfunction save(){\r\n\t\tvar valIndex=");
            out.print(request.getParameter("index"));
            out.write("; //设置的第几个字段\r\n\t\tvar valEles=opener.document.getElementsByName(\"fieldShowValue\");\r\n\t\tvar boxSearchEles=opener.document.getElementsByName(\"fieldBoxSearch\");\r\n\t\tvar changeMethodEles=opener.document.getElementsByName(\"fieldChangeMethod\");\r\n\t\tvar fetchSqlEles=opener.document.getElementsByName(\"fieldFetchSql\");\r\n\t\tvar scriptEles=opener.document.getElementsByName(\"fieldScript\");\r\n\t\tvar fieldToFormEles=opener.document.getElementsByName(\"fieldToForm\");\t\r\n\t\t\r\n\t\tvar filterFieldListEles=opener.document.getElementsByName(\"fieldFilterList\");\r\n\t\tvar filterFieldSearchEles=opener.document.getElementsByName(\"fieldFilterSearch\");\t\r\n\t\tvar inputSearchTypeEles =opener.document.getElementsByName(\"inputSearchType\"); \r\n\t\tvar startRangeEles = opener.document.getElementsByName(\"startRange\");\r\n\t\tvar handleRangeEles = opener.document.getElementsByName(\"handleRange\");\r\n\t\tvar startTextEles = opener.document.getElementsByName(\"startText\");\r\n\t\tvar handleTextEles = opener.document.getElementsByName(\"handleText\");\r\n\t\t\r\n\t\tvar inputSearchType = document.getElementsByName(\"inputSearchType\");\r\n");
            out.write("\t\t\r\n\t\tvar typeValue = \"\";\r\n\t\tfor(var i=0;i<inputSearchType.length;i++){\r\n\t\t\tif(inputSearchType[i].checked){\r\n\t\t\t\ttypeValue=inputSearchType[i].value;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif(\"0\"==typeValue){\r\n\t\t\tvar result=\"$[\"+document.all.seqValue.value+\"]\";\r\n\t\t\tvar tSqlValue = document.all.seqValue.value;\r\n\t\t\tif(tSqlValue.toLocaleLowerCase().indexOf(\"select \")<0 || tSqlValue.toLocaleLowerCase().indexOf(\" from \")<0){\r\n\t\t\t\talert(\"请输入正确的SQL语句！\");\r\n\t\t\t\tdocument.all.seqValue.select();\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\tif(document.all.datasourceName.value!=\"system\"){\r\n\t\t\t\tresult=\"$[\"+document.all.datasourceName.value+\"].\"+result;\r\n\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\ttry{\r\n\t\t\t\tvalEles[valIndex].value=result;\r\n\t\t\t\t\r\n\t\t\t\t//检索页面标题与字段对应关系\r\n\t\t\t\tvar filterSqlFieldObj=document.getElementsByName(\"filterSqlField\");\r\n\t\t\t\tvar filterDisplayNameObj=document.getElementsByName(\"filterDisplayName\");\r\n\t\t\t\tvar filterListObj=document.getElementsByName(\"filterList\");\r\n\t\t\t\tvar filterSearchObj=document.getElementsByName(\"filterSearch\");\r\n\t\t\t\t\r\n\t\t\t\tvar filterFieldListVal=\"\",filterFieldSearchVal=\"\";\r\n");
            out.write("\t\t\t\t\r\n\t\t\t\tfor(var i=0;i<filterSqlFieldObj.length;i++){\r\n\t\t\t\t\tif(filterListObj[i].checked){\r\n\t\t\t\t\t\tfilterFieldListVal+=\"[\"+filterDisplayNameObj[i].value+\"]\"+filterSqlFieldObj[i].value+\";;;\";\t\t\t\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(filterSearchObj[i].checked){\r\n\t\t\t\t\t\tfilterFieldSearchVal+=\"[\"+filterDisplayNameObj[i].value+\"]\"+filterSqlFieldObj[i].value+\";;;\";\t\t\t\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tif(filterFieldListVal.length>0){\r\n\t\t\t\t\tfilterFieldListVal=filterFieldListVal.substring(0,filterFieldListVal.length-3);\r\n\t\t\t\t}\r\n\t\t\t\tif(filterFieldSearchVal.length>0){\r\n\t\t\t\t\tfilterFieldSearchVal=filterFieldSearchVal.substring(0,filterFieldSearchVal.length-3);\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tfilterFieldListEles[valIndex].value=filterFieldListVal;\r\n\t\t\t\tfilterFieldSearchEles[valIndex].value=filterFieldSearchVal;\t\t\t\r\n\t\t\t\t\r\n\t\t\t\t//onchange方法字段对应关系\r\n\t\t\t\tvar scriptTemp=\"\";\r\n\t\t\t\tvar fetchSqlTemp=\"\";\r\n\t\t\t\tvar fieldToFormValue=\"\";\r\n\t\t\t\t\r\n\t\t\t\tvar toFormFieldObj=document.getElementsByName(\"toFormField\");\r\n\t\t\t\tvar fetchSqlFieldObj=document.getElementsByName(\"fetchSqlField\");\r\n");
            out.write("\t\t\t\t\r\n\t\t\t\tfor(var i=0;i<toFormFieldObj.length;i++){\r\n\t\t\t\t\tfieldToFormValue+=toFormFieldObj[i].value+\"=:=\"+fetchSqlFieldObj[i].value+\";;;\";\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tif(fieldToFormValue.length>0){\r\n\t\t\t\t\tfieldToFormValue=fieldToFormValue.substring(0,fieldToFormValue.length-3);\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\t\t\t\t\r\n\t\t\t\tvar ckonchangeMethodObj=document.getElementsByName(\"ckonchangeMethod\");\r\n\t\t\t\t\r\n\t\t\t\tvar parentChangeMethodVal=0;\r\n\t\t\t\t\r\n\t\t\t\tif(ckonchangeMethodObj[0].checked){\r\n\t\t\t\t\tparentChangeMethodVal+=1;\r\n\t\t\t\t\tfieldToFormEles[valIndex].value=fieldToFormValue;\r\n\t\t\t\t\tfetchSqlEles[valIndex].value=document.all.fetchSqlValue.value;\t\t\t\t\r\n\t\t\t\t}else{\r\n\t\t\t\t\tfieldToFormEles[valIndex].value=\"\";\r\n\t\t\t\t\tfetchSqlEles[valIndex].value=\"\";\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tif(ckonchangeMethodObj[1].checked){\r\n\t\t\t\t\tparentChangeMethodVal+=2;\r\n\t\t\t\t\tscriptEles[valIndex].value=document.all.fieldScriptValue.value;\t\r\n\t\t\t\t}else{\r\n\t\t\t\t\tscriptEles[valIndex].value=\"\";\t\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tchangeMethodEles[valIndex].value=parentChangeMethodVal;\r\n\t\t\t\tinputSearchTypeEles[valIndex].value=\"0\";\r\n");
            out.write("\t\t\t\tstartRangeEles[valIndex].value = \"0\";\r\n\t\t\t\thandleRangeEles[valIndex].value = \"0\";\t\t\t\t\t\r\n\t\t\t}catch(e){}\r\n\t\t}else if(\"1\"==typeValue){\r\n\t\t\tvar result = \"$[select \";\r\n\t\t\tvar filterSqlField = document.getElementsByName('filterSqlField1');\r\n\t\t\tif(filterSqlField.length<=0||\"\"==document.getElementById('baseName').value){\r\n\t\t\t\tresult = \"\";\r\n\t\t\t}else{\r\n\t\t\t\tresult += document.getElementById('baseName').value+\"_id,\";\r\n\t\t\t\tfor(var i=0;i<filterSqlField.length;i++){\r\n\t\t\t\t\tif(filterSqlField[i].value!=\"\"){\r\n\t\t\t\t\t\tresult += filterSqlField[i].value+\",\"\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tvar Sqlcond = document.getElementById(\"Sqlcond\").value;\r\n\t\t\t\twhile(\" \"==Sqlcond.substring(0,1)){\r\n\t\t\t\t\tSqlcond = Sqlcond.substring(1);\r\n\t\t\t\t}\r\n\t\t\t\tif(Sqlcond==\"\"||\"and\"==(Sqlcond.substring(0,3).toLocaleLowerCase())){\t\r\n\t\t\t\t}else{\r\n\t\t\t\t\tSqlcond = \"and \"+Sqlcond;\r\n\t\t\t\t}\r\n\t\t\t\tresult = result.substring(0, result.length-1)+\" from \"+document.getElementById('baseName').value+\" where 1=1 \"+Sqlcond+\"]\";\r\n\t\t\t}\r\n\t\t\t//alert(result);\r\n\t\t\tvalEles[valIndex].value=result;\t\r\n");
            out.write("\t\t\t\r\n\t\t\tvar filterListValue = \"\";\r\n\t\t\tvar filterSearchValue = \"\";\r\n\t\t\tvar filterList = document.getElementsByName(\"filterList1\");\r\n\t\t\tvar filterSearch = document.getElementsByName(\"filterSearch1\");\r\n\t\t\tvar filterDisplayName = document.getElementsByName(\"filterDisplayName1\");\r\n\t\t\tfor(var i=0;i<filterSqlField.length;i++){\r\n\t\t\t\tif(filterSqlField[i].value!=\"\"){\r\n\t\t\t\t\tif(filterList[i].checked){\r\n\t\t\t\t\t\tfilterListValue += \"[\"+filterDisplayName[i].value+\"]\"+filterSqlField[i].value+\";;;\" \r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(filterSearch[i].checked){\r\n\t\t\t\t\t\tfilterSearchValue += \"[\"+filterDisplayName[i].value+\"]\"+filterSqlField[i].value+\";;;\" \r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tfilterListValue = filterListValue.substring(0,filterListValue.length-3);\r\n\t\t\tfilterSearchValue = filterSearchValue.substring(0,filterSearchValue.length-3);\r\n\t\t\t//alert(filterListValue);\r\n\t\t\t//alert(filterSearchValue);\r\n\t\t\tfilterFieldListEles[valIndex].value = filterListValue;\r\n\t\t\tfilterFieldSearchEles[valIndex].value=filterSearchValue;\r\n\t\t\t\r\n\t\t\tvar fieldToFormValue=\"\";\r\n\t\t\tvar fetchSql = \"select \";\r\n");
            out.write("\t\t\tvar toFormFieldObj=document.getElementsByName(\"toFormField1\");\r\n\t\t\tvar fetchSqlFieldObj=document.getElementsByName(\"fetchSqlField1\");\r\n\t\t\t\t\r\n\t\t\tfor(var i=0;i<toFormFieldObj.length;i++){\r\n\t\t\t\tfetchSql += fetchSqlFieldObj[i].value+\",\";\r\n\t\t\t\tfieldToFormValue+=toFormFieldObj[i].value+\"=:=\"+fetchSqlFieldObj[i].value+\";;;\";\r\n\t\t\t}\r\n\t\t\tif(\"\"==document.getElementById('baseName').value||\"select \"==fetchSql){\r\n\t\t\t\tfetchSql = \"\";\r\n\t\t\t}else{\r\n\t\t\t\tvar duiyingCond = document.getElementById(\"duiyingCond\").value;\r\n\t\t\t\twhile(\" \"==duiyingCond.substring(0,1)){\r\n\t\t\t\t\tduiyingCond = duiyingCond.substring(1);\r\n\t\t\t\t}\r\n\t\t\t\tif(duiyingCond==\"\"||\"and\"==(duiyingCond.substring(0,3).toLocaleLowerCase())){\t\r\n\t\t\t\t}else{\r\n\t\t\t\t\tduiyingCond = \"and \"+duiyingCond;\r\n\t\t\t\t}\r\n\t\t\t\tfetchSql = fetchSql.substring(0,fetchSql.length-1)+\" from \"+document.getElementById('baseName').value+\" where \"+\r\n\t\t\t\tdocument.getElementById('baseName').value+\"_id=@$@selValue@$@ \"+duiyingCond;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif(fieldToFormValue.length>0){\r\n\t\t\t\tfieldToFormValue=fieldToFormValue.substring(0,fieldToFormValue.length-3);\r\n");
            out.write("\t\t\t}\r\n\t\t\tvar ckonchangeMethodObj=document.getElementsByName(\"ckonchangeMethod1\");\r\n\t\t\t\t\r\n\t\t\tvar parentChangeMethodVal=0;\r\n\t\t\t\t\r\n\t\t\tif(ckonchangeMethodObj[0].checked){\r\n\t\t\t\tparentChangeMethodVal+=1;\r\n\t\t\t\tfieldToFormEles[valIndex].value=fieldToFormValue;\r\n\t\t\t\tfetchSqlEles[valIndex].value=fetchSql;\t\t\t\r\n\t\t\t}else{\r\n\t\t\t\tfieldToFormEles[valIndex].value=\"\";\r\n\t\t\t\tfetchSqlEles[valIndex].value=\"\";\r\n\t\t\t}\r\n\t\t\t\t\r\n\t\t\tif(ckonchangeMethodObj[1].checked){\r\n\t\t\t\tparentChangeMethodVal+=2;\r\n\t\t\t\tscriptEles[valIndex].value=document.all.fieldScriptValue1.value;\t\r\n\t\t\t}else{\r\n\t\t\t\tscriptEles[valIndex].value=\"\";\t\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tchangeMethodEles[valIndex].value=parentChangeMethodVal;\r\n\t\t\tinputSearchTypeEles[valIndex].value=\"1\";\r\n\t\t\tvar tt = \"0\";\r\n\t\t\tvar xx = document.getElementsByName(\"startRange\");\r\n\t\t\tfor(var t=0;t<xx.length;t++){\r\n\t\t\t\tif(xx[t].checked){\r\n\t\t\t\t\ttt = xx[t].value;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif(\"4\"==tt){\r\n\t\t\t\tstartTextEles[valIndex].value=document.getElementById(\"startText\").value+\";;;\"+document.getElementById(\"startShow\").value;\r\n\t\t\t}else{\r\n");
            out.write("\t\t\t\tstartTextEles[valIndex].value=\"\";\r\n\t\t\t}\r\n\t\t\tstartRangeEles[valIndex].value = tt;\r\n\t\t\ttt = \"0\";\r\n\t\t\tvar xx = document.getElementsByName(\"handleRange\");\r\n\t\t\tfor(var t=0;t<xx.length;t++){\r\n\t\t\t\tif(xx[t].checked){\r\n\t\t\t\t\ttt = xx[t].value;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif(\"4\"==tt){\r\n\t\t\t\thandleTextEles[valIndex].value=document.getElementById(\"handleText\").value+\";;;\"+document.getElementById(\"handleShow\").value;\r\n\t\t\t}else{\r\n\t\t\t\thandleTextEles[valIndex].value=\"\";\r\n\t\t\t}\r\n\t\t\thandleRangeEles[valIndex].value = tt;\t\r\n\t\t}else if(\"2\"==typeValue){\r\n\t\t\t//程序接口方式\r\n\t\t\tvar result=\"$[interface:\"+document.all.interfaceName.value;\r\n\t\t\tvar iMethod=document.getElementById(\"interfaceMethodName\").value;\r\n\t\t\tvar iMethodPara=document.getElementById(\"interfaceMethodPara\").value;\r\n\t\t\t\r\n\t\t\tresult+=\";;;\"+iMethod;\r\n\t\t\tif(iMethodPara.length>0){\r\n\t\t\t\tresult+=\";;;;\"+iMethodPara;\r\n\t\t\t}\t\t\t\r\n\t\t\t\r\n\t\t\tresult+=\"]\";\r\n\t\t\t\t\t\r\n\t\t\ttry{\r\n\t\t\t\tvalEles[valIndex].value=result;\r\n\t\t\t\t\r\n\t\t\t\t//检索页面标题与字段对应关系\t\t\t\t\r\n\t\t\t\tvar interfaceFieldName=document.getElementsByName(\"interfaceFieldName\");\r\n");
            out.write("\t\t\t\tvar interfaceDisplayName=document.getElementsByName(\"interfaceDisplayName\");\r\n\t\t\t\t\r\n\t\t\t\t//取值的列表显示字段\r\n\t\t\t\tvar interfaceFieldListVal=\"\";\t\t\t\r\n\t\t\t\tfor(var i=0;i<interfaceFieldName.length;i++){\t\t\t\t\t\r\n\t\t\t\t\tinterfaceFieldListVal+=\"[\"+interfaceDisplayName[i].value+\"]\"+interfaceFieldName[i].value+\";;;\";\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t\r\n\t\t\t\tif(interfaceFieldListVal.length>0){\r\n\t\t\t\t\tinterfaceFieldListVal=interfaceFieldListVal.substring(0,interfaceFieldListVal.length-3);\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t//字段列表写会父页面\r\n\t\t\t\tfilterFieldListEles[valIndex].value=interfaceFieldListVal;\r\n\t\t\t\t\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t//onchange方法字段对应关系\r\n\t\t\t\tvar scriptTemp=\"\";\r\n\t\t\t\tvar fieldToFormValue=\"\";\r\n\t\t\t\t\r\n\t\t\t\tvar interfaceToFormField=document.getElementsByName(\"interfaceToFormField\");\r\n\t\t\t\tvar interfaceFetchField=document.getElementsByName(\"interfaceFetchField\");\r\n\t\t\t\t\r\n\t\t\t\tfor(var i=0;i<interfaceToFormField.length;i++){\r\n\t\t\t\t\tfieldToFormValue+=interfaceToFormField[i].value+\"=:=\"+interfaceFetchField[i].value+\";;;\";\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tif(fieldToFormValue.length>0){\r\n\t\t\t\t\tfieldToFormValue=fieldToFormValue.substring(0,fieldToFormValue.length-3);\r\n");
            out.write("\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\t\t\t\t\r\n\t\t\t\tvar interfaceCkOnchangeMethod=document.getElementsByName(\"interfaceCkOnchangeMethod\");\r\n\t\t\t\t\r\n\t\t\t\tvar parentChangeMethodVal=0;\r\n\t\t\t\t\r\n\t\t\t\tif(interfaceCkOnchangeMethod[0].checked){\r\n\t\t\t\t\tparentChangeMethodVal+=1;\r\n\t\t\t\t\tfieldToFormEles[valIndex].value=fieldToFormValue;\t\t\t\r\n\t\t\t\t}else{\r\n\t\t\t\t\tfieldToFormEles[valIndex].value=\"\";\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tif(interfaceCkOnchangeMethod[1].checked){\r\n\t\t\t\t\tparentChangeMethodVal+=2;\r\n\t\t\t\t\tscriptEles[valIndex].value=document.all.interfaceFieldScriptValue.value;\t\r\n\t\t\t\t}else{\r\n\t\t\t\t\tscriptEles[valIndex].value=\"\";\t\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tchangeMethodEles[valIndex].value=parentChangeMethodVal;\r\n\t\t\t\tinputSearchTypeEles[valIndex].value=\"2\";\r\n\t\t\t\tstartRangeEles[valIndex].value = \"0\";\r\n\t\t\t\thandleRangeEles[valIndex].value = \"0\";\t\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t}catch(e){\r\n\t\t\t\talert(e);\r\n\t\t\t}\r\n\t\t}\r\n\t\twindow.close();\r\n\t}\t\r\n\r\n\t\t\r\nfunction loadType(){\r\nvar pindex=\"");
            out.print(request.getParameter("index"));
            out.write("\";\r\n");
if("0".equals(fieldInfo[8])){ 
            out.write("\r\n\tshowTable('0');\r\n\tvar pvalue;\r\n\tif(document.all.ckonchangeMethod[0].checked){\r\n\t\tdocument.all.fetchSqlTR.style.display='';\r\n\t\tdocument.all.fetchSqlFieldTR.style.display='';\r\n\t}\r\n\tif(document.all.ckonchangeMethod[1].checked){\r\n\t\tdocument.all.scriptTR.style.display='';\r\n\t}\t\r\n");
}else if("1".equals(fieldInfo[8])){ 
            out.write("\t\r\n\tshowTable('1');\r\n\tvar pvalue;\r\n\tif(document.all.ckonchangeMethod1[0].checked){\r\n\t\tdocument.all.fetchSqlFieldTR1.style.display='';\r\n\t}\r\n\tif(document.all.ckonchangeMethod1[1].checked){\r\n\t\tdocument.all.scriptTR1.style.display='';\r\n\t}\r\n");
}else{ 
            out.write("\r\n\tshowTable('2');\r\n\tvar pvalue;\r\n\tif(document.all.ckonchangeMethod1[0].checked){\r\n\t\tdocument.all.fetchSqlFieldTR1.style.display='';\r\n\t}\r\n\tif(document.all.ckonchangeMethod1[1].checked){\r\n\t\tdocument.all.scriptTR1.style.display='';\r\n\t}\r\n");
}
            out.write("\r\n}\r\n\t\t\r\n\t\tfunction changeMethod(flag){\r\n\t\t\tif(\"0\"==flag){\r\n\t\t\t\tvar obj=document.getElementsByName(\"ckonchangeMethod\");\r\n\t\t\t\tif(obj[0].checked){\r\n\t\t\t\t\tdocument.all.fetchSqlTR.style.display='';\r\n\t\t\t\t\tdocument.all.fetchSqlFieldTR.style.display='';\r\n\t\t\t\t}else{\r\n\t\t\t\t\tdocument.all.fetchSqlTR.style.display='none';\r\n\t\t\t\t\tdocument.all.fetchSqlFieldTR.style.display='none';\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tif(obj[1].checked){\r\n\t\t\t\t\tdocument.all.scriptTR.style.display='';\r\n\t\t\t\t}else{\r\n\t\t\t\t\tdocument.all.scriptTR.style.display='none';\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tvar obj=document.getElementsByName(\"ckonchangeMethod1\");\r\n\t\t\t\tif(obj[0].checked){\r\n\t\t\t\t\tdocument.all.fetchSqlFieldTR1.style.display='';\r\n\t\t\t\t}else{\r\n\t\t\t\t\tdocument.all.fetchSqlFieldTR1.style.display='none';\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tif(obj[1].checked){\r\n\t\t\t\t\tdocument.all.scriptTR1.style.display='';\r\n\t\t\t\t}else{\r\n\t\t\t\t\tdocument.all.scriptTR1.style.display='none';\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tfunction addField(){\r\n\t\t\tvar tableField=document.all.tableField;\r\n\t\t    var oRows=tableField.insertRow(tableField.rows.length);\r\n");
            out.write("\t\t    var aRows=tableField.rows;\t\r\n\t\t    var aCells=oRows.cells;\r\n\t\t    var oCell1=aRows[oRows.rowIndex].insertCell(aCells.length);\r\n\t\t\tvar oCell2=aRows[oRows.rowIndex].insertCell(aCells.length);\r\n\t\t\tvar oCell3=aRows[oRows.rowIndex].insertCell(aCells.length);\r\n\t\t\tvar oCell4=aRows[oRows.rowIndex].insertCell(aCells.length);\r\n\t\t\t\r\n\t\t\tvar fieldSysNameObj=opener.document.getElementsByName(\"fieldSysName\");\r\n\t\t\tvar fieldNameObj=opener.document.getElementsByName(\"fieldDispalyName\");\t\t\t\r\n\t\t\t\r\n\t\t\tvar selectHTML=\"<select name=toFormField>\";\r\n\t\t\tfor(var i=0;i<fieldSysNameObj.length;i++){\r\n\t\t\t\tselectHTML+=\"<option value=\\\"\"+fieldSysNameObj[i].value+\"\\\">\"+fieldNameObj[i].value+\"</option>\";\r\n\t\t\t}\r\n\t\t\tselectHTML+=\"</select>\";\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\toCell1.innerHTML=\"<input style=\\\"border-width:0px;width=40px;\\\" type=\\\"text\\\" name=\\\"fieldNum\\\" readonly value='1'>\";\r\n\t\t\toCell2.innerHTML=selectHTML; \r\n\t\t\toCell3.innerHTML=\"<input type=\\\"text\\\" name=\\\"fetchSqlField\\\" style=\\\"width:100%;\\\">\";\r\n\t\t\toCell4.innerHTML=\"<input type='button' class=\\\"btnButton2font\\\" style=\\\"cursor:pointer\\\" onClick=\\\"javascript:deleteRow(this);\\\" value='删除' />\";\r\n");
            out.write("\t\t\toCell4.align=\"center\";\r\n\t\t\t\r\n\t\t\tsortFetchFields(document.all.fieldNum);\r\n\t\t}\r\n\t\t\r\n\t\tfunction addFilterField(){\r\n\t\t\tvar tableFilterField=document.all.tableFilterField;\r\n\t\t    var oRows=tableFilterField.insertRow(tableFilterField.rows.length);\r\n\t\t    var aRows=tableFilterField.rows;\t\r\n\t\t    var aCells=oRows.cells;\r\n\t\t    var oCell1=aRows[oRows.rowIndex].insertCell(aCells.length);\r\n\t\t\tvar oCell2=aRows[oRows.rowIndex].insertCell(aCells.length);\r\n\t\t\tvar oCell3=aRows[oRows.rowIndex].insertCell(aCells.length);\r\n\t\t\tvar oCell4=aRows[oRows.rowIndex].insertCell(aCells.length);\r\n\t\t\tvar oCell5=aRows[oRows.rowIndex].insertCell(aCells.length);\t\r\n\t\t\tvar oCell6=aRows[oRows.rowIndex].insertCell(aCells.length);\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\toCell1.innerHTML=\"<input style=\\\"border-width:0px;width=40px;\\\" type=\\\"text\\\" name=\\\"filterFieldNum\\\" readonly value='1'>\";\r\n\t\t\toCell2.innerHTML=\"<input type=\\\"text\\\" name=\\\"filterSqlField\\\" style=\\\"width:100%;\\\">\";\r\n\t\t\toCell3.innerHTML=\"<input type=\\\"text\\\" name=\\\"filterDisplayName\\\" style=\\\"width:100%;\\\">\";\r\n");
            out.write("\t\t\toCell4.innerHTML=\"<input type=\\\"checkbox\\\" name=\\\"filterList\\\" checked>\";\r\n\t\t\toCell5.innerHTML=\"<input type=\\\"checkbox\\\" name=\\\"filterSearch\\\">\";\r\n\t\t\toCell6.innerHTML=\"<button class=\\\"btnButton2font\\\" style=\\\"cursor:pointer\\\" onClick=\\\"javascript:deleteFilterRow(this);\\\">删除</button>\";\r\n\t\t\toCell6.align=\"center\";\r\n\t\t\t\r\n\t\t\tsortFetchFields(document.all.filterFieldNum);\r\n\t\t}\r\n\t\tfunction deleteRow(r){\r\n\t\t\tvar i=r.parentNode.parentNode.rowIndex;\r\n    \t\tdocument.getElementById(\"tableField\").deleteRow(i);\r\n\t\t   //document.all.tableField.deleteRow(window.event.srcElement.parentElement.parentElement.rowIndex);\r\n\t\t   //sortFetchFields(document.all.fieldNum);\r\n\t\t}\r\n\t\tfunction deleteFilterRow(r){\r\n\t\t\tvar i=r.parentNode.parentNode.rowIndex;\r\n    \t\tdocument.getElementById(\"tableFilterField\").deleteRow(i);\r\n\t\t   //document.all.tableFilterField.deleteRow(window.event.srcElement.parentElement.parentElement.rowIndex);\r\n\t\t   //sortFetchFields(document.all.filterFieldNum);\r\n\t\t}\r\n\t\tfunction sortFetchFields(obj){\r\n\t\t\tfor(var i=0;i<obj.length;i++){\r\n");
            out.write("\t\t\t\tobj[i].value=i+1;\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n//一下为新增内容\r\nfunction getXmlHttp(){\r\n\tvar xmlhttp;\r\n\t//开始初始化XMLHttpRequest对象\r\n\tif(window.XMLHttpRequest) { //Mozilla 浏览器\r\n\t\txmlhttp = new XMLHttpRequest();\r\n\t\tif (xmlhttp.overrideMimeType) {//设置MiME类别\r\n\t\t\txmlhttp.overrideMimeType('text/xml');\r\n\t\t}\r\n\t}\r\n\telse if (window.ActiveXObject) { // IE浏览器\r\n\t\ttry {\r\n\t\t\txmlhttp = new ActiveXObject(\"Microsoft.XMLHTTP\");\r\n\t\t} catch (e) {\r\n\t\t\ttry {\r\n\t\t\t\txmlhttp = new ActiveXObject(\"MSXML2.XMLHTTP\");\r\n\t\t\t} catch (e) {\r\n\t\t\t\talert(\"您看到此信息，说明您的浏览器不支持XML解析。\\r\\n请在弹出页面中下载XML解析器并安装！\");\t\t\t\t\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\treturn xmlhttp;\t\r\n}\r\nvar selectOption = \"\";\r\nvar selectValue = \"\";\r\n");
for(j=0;j<fieldSimpleInfo.length;j++){
            out.write("\r\n\tselectValue+=\"<option value=\\\"");
            out.print(fieldSimpleInfo[j][2] );
            out.write('\\');
            out.write('"');
            out.write('>');
            out.print(fieldSimpleInfo[j][1] );
            out.write("</option>\"\r\n");
} 
            out.write("\t\r\nfunction setOption(obj){\r\n\tgetOption(obj.value);\r\n\tvar tableFilterField=document.all.tableFilterField1;\r\n\twhile(tableFilterField.rows.length>2){\r\n\t\ttableFilterField.deleteRow(tableFilterField.rows.length-1);\r\n\t}\r\n\tvar tableField=document.all.tableField1;\r\n\twhile(tableField.rows.length>1){\r\n\t\ttableField.deleteRow(tableField.rows.length-1);\r\n\t}\r\n}\r\nfunction getOption(baseId){\r\n\tselectOption = \"<option value=''>---请选择---</option>\";\r\n\tvar xmlhttp = getXmlHttp();\t\r\n\txmlhttp.open(\"get\",\"/jsoa/userdb/jiansuo.jsp?type=1&tableName=\"+baseId,false);\r\n\txmlhttp.send();\r\n\tvar newData;\r\n\tif(xmlhttp.readyState==4) {\r\n\t\tif(xmlhttp.status==200) {\r\n\t\t\tnewData = xmlhttp.responseText;\r\n\t\t}\r\n\t}\r\n\tselectOption += newData; \r\n}\r\nfunction addFilterNewField(){\r\n\t\t\tvar tableFilterField=document.all.tableFilterField1;\r\n\t\t    var oRows=tableFilterField.insertRow(tableFilterField.rows.length);\r\n\t\t    var aRows=tableFilterField.rows;\t\r\n\t\t    var aCells=oRows.cells;\r\n\t\t    var oCell1=aRows[oRows.rowIndex].insertCell(aCells.length);\r\n\t\t\tvar oCell2=aRows[oRows.rowIndex].insertCell(aCells.length);\r\n");
            out.write("\t\t\tvar oCell3=aRows[oRows.rowIndex].insertCell(aCells.length);\r\n\t\t\tvar oCell4=aRows[oRows.rowIndex].insertCell(aCells.length);\r\n\t\t\tvar oCell5=aRows[oRows.rowIndex].insertCell(aCells.length);\t\r\n\t\t\tvar oCell6=aRows[oRows.rowIndex].insertCell(aCells.length);\t\t\t\t\t\t\t\r\n\t\t\t\r\n\t\t\tif(selectOption==\"\"){\r\n\t\t\t\tvar baseId = document.getElementById(\"baseName\").value;\r\n\t\t\t\tgetOption(baseId);\r\n\t\t\t}\t\t\t\t\t\t\t\r\n\t\t\toCell1.innerHTML=\"<input style=\\\"border-width:0px;width=40px;\\\" type=\\\"text\\\" name=\\\"filterFieldNum1\\\" readonly value='1'>\";\r\n\t\t\toCell2.innerHTML=\"<select name=\\\"filterSqlField1\\\" onchange=\\\"setDisplayName(this)\\\" style=\\\"width:100%;\\\">\"+selectOption+\"</select>\";\r\n\t\t\toCell3.innerHTML=\"<input type=\\\"text\\\" name=\\\"filterDisplayName1\\\" style=\\\"width:100%;\\\">\";\r\n\t\t\toCell4.innerHTML=\"<input type=\\\"checkbox\\\" name=\\\"filterList1\\\" checked>\";\r\n\t\t\toCell5.innerHTML=\"<input type=\\\"checkbox\\\" name=\\\"filterSearch1\\\">\";\r\n\t\t\toCell6.innerHTML=\"<button class=\\\"btnButton2font\\\" style=\\\"cursor:pointer\\\" onClick=\\\"javascript:deleteFilterNewRow(this);\\\">删除</button>\";\r\n");
            out.write("\t\t\toCell6.align=\"center\";\r\n\t\t\t\r\n\t\t\tsortFetchFields(document.all.filterFieldNum1);\r\n\t\t}\r\nfunction deleteFilterNewRow(r){\r\n\t\t   var i=r.parentNode.parentNode.rowIndex;\r\n    \t\tdocument.getElementById(\"tableFilterField1\").deleteRow(i);\r\n\t\t}\r\nfunction addNewField(){\r\n\t\t\tvar tableField=document.all.tableField1;\r\n\t\t    var oRows=tableField.insertRow(tableField.rows.length);\r\n\t\t    var aRows=tableField.rows;\t\r\n\t\t    var aCells=oRows.cells;\r\n\t\t    var oCell1=aRows[oRows.rowIndex].insertCell(aCells.length);\r\n\t\t\tvar oCell2=aRows[oRows.rowIndex].insertCell(aCells.length);\r\n\t\t\tvar oCell3=aRows[oRows.rowIndex].insertCell(aCells.length);\r\n\t\t\tvar oCell4=aRows[oRows.rowIndex].insertCell(aCells.length);\r\n\t\t\t\r\n\t\t\tvar fieldSysNameObj=opener.document.getElementsByName(\"fieldSysName\");\r\n\t\t\tvar fieldNameObj=opener.document.getElementsByName(\"fieldDispalyName\");\t\t\t\r\n\t\t\t\r\n\t\t\tvar selectHTML=\"<select name=toFormField1 style='width:100%'>\";\r\n\t\t\tfor(var i=0;i<fieldSysNameObj.length;i++){\r\n\t\t\t\tselectHTML+=\"<option value=\\\"\"+fieldSysNameObj[i].value+\"\\\">\"+fieldNameObj[i].value+\"</option>\";\r\n");
            out.write("\t\t\t}\r\n\t\t\tselectHTML+=\"</select>\";\r\n\t\t\tif(selectOption==\"\"){\r\n\t\t\t\tvar baseId = document.getElementById(\"baseName\").value;\r\n\t\t\t\tgetOption(baseId);\r\n\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\toCell1.innerHTML=\"<input style=\\\"border-width:0px;width=40px;\\\" type=\\\"text\\\" name=\\\"fieldNum1\\\" readonly value='1'>\";\r\n\t\t\toCell2.innerHTML=selectHTML; \r\n\t\t\toCell3.innerHTML=\"<select name=\\\"fetchSqlField1\\\" style=\\\"width:100%;\\\">\"+selectOption+\"</select>\";\r\n\t\t\toCell4.innerHTML=\"<button class=\\\"btnButton2font\\\" style=\\\"cursor:pointer\\\" onClick=\\\"javascript:deleteNewRow(this);\\\">删除</button>\";\r\n\t\t\toCell4.align=\"center\";\r\n\t\t\t\r\n\t\t\tsortFetchFields(document.all.fieldNum1);\r\n\t\t}\r\n\t\tfunction deleteNewRow(r){\r\n\t\t   var i=r.parentNode.parentNode.rowIndex;\r\n    \t\tdocument.getElementById(\"tableField1\").deleteRow(i);\r\n\t\t}\t\r\nfunction setDisplayName(obj){\r\n\tvar num = 0;\r\n\tvar filterSqlField = document.getElementsByName(\"filterSqlField1\");\r\n\tfor(var i=0;i<filterSqlField.length;i++){\r\n\t\tif(obj==filterSqlField[i]){\r\n\t\t\tnum = i;\r\n\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\tvar text = \"\";\r\n");
            out.write("\tvar l=obj.length;\r\n\tfor(var i=0;i<l;i++){\r\n\t\tif(obj.value==obj.options[i].value){\r\n\t\t\ttext = obj.options[i].text;\r\n\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\tvar filterDisplayName = document.getElementsByName(\"filterDisplayName1\");\r\n\tfilterDisplayName[num].value = text;\r\n}\r\nfunction radioSet(flag,obj){\r\n//startRange  handleRange\r\n\tif(\"0\"==flag){\r\n\t\tvar tt = obj.value;\r\n\t\tif(\"4\"==tt){\r\n\t\t\tdocument.getElementById(\"startSpan\").style.display=\"\";\r\n\t\t}else{\r\n\t\t\tdocument.getElementById(\"startSpan\").style.display=\"none\";\r\n\t\t}\r\n\t}else{\r\n\t\tvar tt = obj.value;\r\n\t\tif(\"4\"==tt){\r\n\t\t\tdocument.getElementById(\"handleSpan\").style.display=\"\";\r\n\t\t}else{\r\n\t\t\tdocument.getElementById(\"handleSpan\").style.display=\"none\";\r\n\t\t}\r\n\t}\r\n}\r\nfunction selectEndow(contrId,contrName,type,single,show,range){\r\n    var selectedId=eval(\"document.all.\"+contrId+\".value\");\r\n    var selectedName=eval(\"document.all.\"+contrName+\".value\");\r\n    if(selectedId==null || selectedId==\"null\" || selectedId==\"\"){\r\n        selectedId=\"\";\r\n        selectedName=\"\";\r\n    }\r\n    openEndow(contrId,contrName,selectedId,selectedName,type,single,show,range);\r\n");
            out.write("}\r\n\r\nfunction addInterfaceField(){\r\n\tvar interfaceFieldTable=document.all.interfaceFieldTable;\r\n    var oRows=interfaceFieldTable.insertRow(interfaceFieldTable.rows.length);\r\n    var aRows=interfaceFieldTable.rows;\t\r\n    var aCells=oRows.cells;\r\n    var oCell1=aRows[oRows.rowIndex].insertCell(aCells.length);\r\n\tvar oCell2=aRows[oRows.rowIndex].insertCell(aCells.length);\r\n\tvar oCell3=aRows[oRows.rowIndex].insertCell(aCells.length);\r\n\tvar oCell4=aRows[oRows.rowIndex].insertCell(aCells.length);\r\n\t//var oCell5=aRows[oRows.rowIndex].insertCell(aCells.length);\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t\r\n\toCell1.innerHTML=\"<input style=\\\"border-width:0px;width=40px;\\\" type=\\\"text\\\"  id=\\\"interfaceFieldNum\\\" name=\\\"interfaceFieldNum\\\" readonly value='1'>\";\r\n\toCell2.innerHTML=\"<input type=\\\"text\\\"  id=\\\"interfaceFieldName\\\" name=\\\"interfaceFieldName\\\" style=\\\"width:100%;\\\">\";\r\n\toCell3.innerHTML=\"<input type=\\\"text\\\" id=\\\"interfaceDisplayName\\\" name=\\\"interfaceDisplayName\\\" style=\\\"width:100%;\\\">\";\r\n\t//oCell4.innerHTML=\"<input type=\\\"checkbox\\\" id=\\\"interfaceList\\\" name=\\\"interfaceList\\\" checked>\";\r\n");
            out.write("\toCell4.innerHTML=\"<button class=\\\"btnButton2font\\\" style=\\\"cursor:pointer\\\" onClick=\\\"javascript:deleteInterfaceRow(this);\\\">删除</button>\";\r\n\toCell4.align=\"center\";\r\n\t\r\n\tsortFetchFields(document.all.interfaceFieldNum);\r\n}\r\nfunction deleteInterfaceRow(r){\r\n\tvar i=r.parentNode.parentNode.rowIndex;\r\n    document.getElementById(\"interfaceFieldTable\").deleteRow(i);\r\n}\r\nfunction addInterfaceFetchField(){\r\n\tvar tableField=document.all.interfaceFetchTable;\r\n    var oRows=tableField.insertRow(tableField.rows.length);\r\n    var aRows=tableField.rows;\t\r\n    var aCells=oRows.cells;\r\n    var oCell1=aRows[oRows.rowIndex].insertCell(aCells.length);\r\n\tvar oCell2=aRows[oRows.rowIndex].insertCell(aCells.length);\r\n\tvar oCell3=aRows[oRows.rowIndex].insertCell(aCells.length);\r\n\tvar oCell4=aRows[oRows.rowIndex].insertCell(aCells.length);\r\n\t\r\n\tvar fieldSysNameObj=opener.document.getElementsByName(\"fieldSysName\");\r\n\tvar fieldNameObj=opener.document.getElementsByName(\"fieldDispalyName\");\t\t\t\r\n\t\r\n\tvar selectHTML=\"<select name=interfaceToFormField>\";\r\n");
            out.write("\tfor(var i=0;i<fieldSysNameObj.length;i++){\r\n\t\tselectHTML+=\"<option value=\\\"\"+fieldSysNameObj[i].value+\"\\\">\"+fieldNameObj[i].value+\"</option>\";\r\n\t}\r\n\tselectHTML+=\"</select>\";\r\n\t\t\t\t\t\t\t\r\n\toCell1.innerHTML=\"<input style=\\\"border-width:0px;width=40px;\\\" type=\\\"text\\\" id=\\\"interfaceFetchFieldNum\\\" name=\\\"interfaceFetchFieldNum\\\" readonly value='1'>\";\r\n\toCell2.innerHTML=selectHTML; \r\n\toCell3.innerHTML=\"<input type=\\\"text\\\" id=\\\"interfaceFetchField\\\" name=\\\"interfaceFetchField\\\" style=\\\"width:100%;\\\">\";\r\n\toCell4.innerHTML=\"<button class=\\\"btnButton2font\\\" style=\\\"cursor:pointer\\\" onClick=\\\"javascript:deleteInterfaceFetchRow(this);\\\">删除</button>\";\r\n\toCell4.align=\"center\";\r\n\t\r\n\tsortFetchFields(document.all.interfaceFetchFieldNum);\r\n}\r\nfunction interfaceChangeMethod(flag){\t\r\n\tvar obj=document.getElementsByName(\"interfaceCkOnchangeMethod\");\r\n\tif(obj[0].checked){\r\n\t\tdocument.all.interfaceFetchFieldTR.style.display='';\r\n\t}else{\r\n\t\tdocument.all.interfaceFetchFieldTR.style.display='none';\r\n\t}\r\n\t\r\n\tif(obj[1].checked){\r\n\t\tdocument.all.interfaceScriptTR.style.display='';\r\n");
            out.write("\t}else{\r\n\t\tdocument.all.interfaceScriptTR.style.display='none';\r\n\t}\t\r\n}\r\nfunction deleteInterfaceFetchRow(r){\r\n\tvar i=r.parentNode.parentNode.rowIndex;\r\n    document.getElementById(\"interfaceFetchTable\").deleteRow(i);\r\n}\r\n</script>\r\n<script src=\"/jsoa/js/util.js\"></script>\r\n");
            int evalDoAfterBody = _jspx_th_html_005fhtml_005f0.doAfterBody();
            if (evalDoAfterBody != javax.servlet.jsp.tagext.BodyTag.EVAL_BODY_AGAIN)
              break;
          } while (true);
        }
        if (_jspx_th_html_005fhtml_005f0.doEndTag() == javax.servlet.jsp.tagext.Tag.SKIP_PAGE) {
          return;
        }
        _005fjspx_005ftagPool_005fhtml_005fhtml.reuse(_jspx_th_html_005fhtml_005f0);
        _jspx_th_html_005fhtml_005f0_reused = true;
      } finally {
        org.apache.jasper.runtime.JspRuntimeLibrary.releaseTag(_jspx_th_html_005fhtml_005f0, _jsp_getInstanceManager(), _jspx_th_html_005fhtml_005f0_reused);
      }
    } catch (java.lang.Throwable t) {
      if (!(t instanceof javax.servlet.jsp.SkipPageException)){
        out = _jspx_out;
        if (out != null && out.getBufferSize() != 0)
          try {
            if (response.isCommitted()) {
              out.flush();
            } else {
              out.clearBuffer();
            }
          } catch (java.io.IOException e) {}
        if (_jspx_page_context != null) _jspx_page_context.handlePageException(t);
        else throw new ServletException(t);
      }
    } finally {
      _jspxFactory.releasePageContext(_jspx_page_context);
    }
  }
}
