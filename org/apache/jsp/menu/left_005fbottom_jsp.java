/*
 * Generated by the Jasper component of Apache Tomcat
 * Version: JspC/ApacheTomcat8
 * Generated at: 2023-01-06 10:02:55 UTC
 * Note: The last modified time of this file was set to
 *       the last modified time of the source file after
 *       generation to assist with modification tracking.
 */
package org.apache.jsp.menu;

import javax.servlet.*;
import javax.servlet.http.*;
import javax.servlet.jsp.*;
import com.js.system.manager.service.ManagerService;
import com.js.oa.message.service.MsManageBD;
import java.util.List;
import com.js.util.config.SystemCommon;

public final class left_005fbottom_jsp extends org.apache.jasper.runtime.HttpJspBase
    implements org.apache.jasper.runtime.JspSourceDependent,
                 org.apache.jasper.runtime.JspSourceImports {

  private static final javax.servlet.jsp.JspFactory _jspxFactory =
          javax.servlet.jsp.JspFactory.getDefaultFactory();

  private static java.util.Map<java.lang.String,java.lang.Long> _jspx_dependants;

  private static final java.util.Set<java.lang.String> _jspx_imports_packages;

  private static final java.util.Set<java.lang.String> _jspx_imports_classes;

  static {
    _jspx_imports_packages = new java.util.HashSet<>();
    _jspx_imports_packages.add("javax.servlet");
    _jspx_imports_packages.add("javax.servlet.http");
    _jspx_imports_packages.add("javax.servlet.jsp");
    _jspx_imports_classes = new java.util.HashSet<>();
    _jspx_imports_classes.add("java.util.List");
    _jspx_imports_classes.add("com.js.oa.message.service.MsManageBD");
    _jspx_imports_classes.add("com.js.util.config.SystemCommon");
    _jspx_imports_classes.add("com.js.system.manager.service.ManagerService");
  }

  private volatile javax.el.ExpressionFactory _el_expressionfactory;
  private volatile org.apache.tomcat.InstanceManager _jsp_instancemanager;

  public java.util.Map<java.lang.String,java.lang.Long> getDependants() {
    return _jspx_dependants;
  }

  public java.util.Set<java.lang.String> getPackageImports() {
    return _jspx_imports_packages;
  }

  public java.util.Set<java.lang.String> getClassImports() {
    return _jspx_imports_classes;
  }

  public javax.el.ExpressionFactory _jsp_getExpressionFactory() {
    if (_el_expressionfactory == null) {
      synchronized (this) {
        if (_el_expressionfactory == null) {
          _el_expressionfactory = _jspxFactory.getJspApplicationContext(getServletConfig().getServletContext()).getExpressionFactory();
        }
      }
    }
    return _el_expressionfactory;
  }

  public org.apache.tomcat.InstanceManager _jsp_getInstanceManager() {
    if (_jsp_instancemanager == null) {
      synchronized (this) {
        if (_jsp_instancemanager == null) {
          _jsp_instancemanager = org.apache.jasper.runtime.InstanceManagerFactory.getInstanceManager(getServletConfig());
        }
      }
    }
    return _jsp_instancemanager;
  }

  public void _jspInit() {
  }

  public void _jspDestroy() {
  }

  public void _jspService(final javax.servlet.http.HttpServletRequest request, final javax.servlet.http.HttpServletResponse response)
      throws java.io.IOException, javax.servlet.ServletException {

    final java.lang.String _jspx_method = request.getMethod();
    if (!"GET".equals(_jspx_method) && !"POST".equals(_jspx_method) && !"HEAD".equals(_jspx_method) && !javax.servlet.DispatcherType.ERROR.equals(request.getDispatcherType())) {
      response.sendError(HttpServletResponse.SC_METHOD_NOT_ALLOWED, "JSPs only permit GET, POST or HEAD. Jasper also permits OPTIONS");
      return;
    }

    final javax.servlet.jsp.PageContext pageContext;
    javax.servlet.http.HttpSession session = null;
    final javax.servlet.ServletContext application;
    final javax.servlet.ServletConfig config;
    javax.servlet.jsp.JspWriter out = null;
    final java.lang.Object page = this;
    javax.servlet.jsp.JspWriter _jspx_out = null;
    javax.servlet.jsp.PageContext _jspx_page_context = null;


    try {
      response.setContentType("text/html; charset=GBK");
      pageContext = _jspxFactory.getPageContext(this, request, response,
      			null, true, 8192, true);
      _jspx_page_context = pageContext;
      application = pageContext.getServletContext();
      config = pageContext.getServletConfig();
      session = pageContext.getSession();
      out = pageContext.getOut();
      _jspx_out = out;

      out.write("\r\n\r\n\r\n\r\n\r\n");

response.setHeader("Cache-Control","no-store");
response.setHeader("Pragma","no-cache");
response.setDateHeader ("Expires", 0);
String userId=session.getAttribute("userId").toString();
ManagerService managerBD = new ManagerService();
boolean wfFlag=managerBD.hasRight(userId, "02*02");//工作流
//boolean fwFlag=managerBD.hasRight(userId, "03*03*01");
//boolean swFlag=managerBD.hasRight(userId, "03*06*01");
//boolean mbFlag=managerBD.hasRight(userId, "03*03*01")||managerBD.hasRight(userId, "04*01*02")||managerBD.hasRight(userId, "01*02");
//boolean xmFlag=managerBD.hasRight(userId, "04*04*02");
StringBuffer rights=new StringBuffer("02*02*02,02*02*04,"); //工作流程设置
rights.append("02*04*01,"); //工作流程 分类维护
rights.append("03*03*01,"); //发文
rights.append("03*06*01,"); //收文
rights.append("03*03*01,04*01*02,01*02*01,"); //模板设置
rights.append("07*19*02,"); //会议管理
rights.append("07*02*01,"); //人事管理 设置
rights.append("07*55*09,"); //考勤维护
rights.append("07*55*10,"); //工资管理
rights.append("06*02*02,"); //公共信息
rights.append("07*14*02,"); //综合办公 车辆管理
rights.append("07*03*02,"); //综合办公-仓库管理
rights.append("07*18*01,"); //综合办公-设备管理
rights.append("08*04*01,"); //关联系统
rights.append("07*23*01,");//档案管理-设置     维护
rights.append("04*10*01,");//计划管理项目分类
rights.append("04*07*02,");//计划管理任务分类
rights.append("08*02*02,");//个人设置-公共联系人类别
rights.append("09*00*01,");//提醒设置
rights.append("07*10*02,");//公共信息贺卡管理
rights.append("09*09*01,");//报表管理-分类设置-维护
rights.append("09*01*02,");//数据采集-采集类别管理-维护

boolean hasAaaSetup=managerBD.hasRights(userId,rights.toString());



      out.write("\r\n\r\n<!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Transitional//EN\" \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd\">\r\n<html xmlns=\"http://www.w3.org/1999/xhtml\">\r\n<head>\r\n<meta http-equiv=\"Content-Type\" content=\"text/html; charset=gb2312\" />\r\n<title>无标题文档</title>\r\n</head>\r\n\r\n<body style=\"margin:0px; font-size:12px;background-image:url(/jsoa/imges/left-cent.gif);\" onload=\"load();\">\r\n<div valign=\"bottom\" style=\"float:left; height:100%; color:#003366;\">\r\n<table valign=\"bottom\" width=\"131\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\">\r\n  <tr>\r\n    <td style=\" background-image:url(/jsoa/imges/gjl.gif);\">\r\n      <div style=\"height:28px; width:131px; padding-top:7px; float:left;\">\r\n      <div style=\"float:left;padding-left:8px;padding-right:2px;\"><img id=\"changeLeftIMG\" src=\"/jsoa/imges/9s.gif\"></img></div>\r\n      <div style=\"float:left;padding-top:3px;\"><b>常用工具</b></div>\r\n      <div style=\"float:left;padding-left:2px;\"><img src=\"/jsoa/imges/9s.gif\" id=\"changeRightIMG\"></img></div>\r\n      </div>\r\n    </td>\r\n  </tr>\r\n");
      out.write("  ");

  int i=0;
  com.js.oa.menu.service.ShortCutBD bd=new com.js.oa.menu.service.ShortCutBD();
  bd.init();
  java.util.List menuList=bd.getLeftMenu(session.getAttribute("userId").toString(),1);
  bd.close();
  String[] obj;
  String name,url,urlType,img;
  for(i=0;i<menuList.size();i++){
    obj=(String[])menuList.get(i);
    name=obj[1];
    urlType=obj[2];
    url=obj[3];
    img=obj[4];
  
      out.write(" \r\n  <tr>\r\n    <td height=\"27\" align=\"left\" valign=\"middle\" style=\"color:#000;cursor:pointer;\" onclick=\"");
if("0".equals(urlType)){ 
      out.write("jumpMain");
}else{ 
      out.write("openURL");
} 
      out.write('(');
      out.write('\'');
      out.print(url );
      out.write("')\">&nbsp;&nbsp;&nbsp;<img src=\"");
      out.print(img );
      out.write("\" />&nbsp;");
      out.print(name );
      out.write("</td>\r\n  </tr>\r\n  ");
}
      out.write("  \r\n  <tr>\r\n    <td height=\"2\"><img src=\"/jsoa/imges/x2.gif\" /></td>\r\n  </tr>\r\n  <tr>\r\n    <td height=\"20\" align=\"right\" valign=\"top\">\r\n    \t<table width=\"80%\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\" height=\"25\">\r\n\t      <tr>\r\n\t         <td align=\"right\"  valign=\"bottom\">\r\n\t           <img id=\"menu_set\" src=\"/jsoa/imges/di4.gif\"  style=\"cursor:pointer;\" onclick=\"jumpMain('/jsoa/StatusSetupAction.do?flag=load');\" title=\"个人设置\"/>&nbsp;\r\n\t           ");

	           if(hasAaaSetup){
	           String _url="";
	           if(wfFlag){
	              _url="/jsoa/WFProcessAction.do?moduleId=1";
	            }else{
	              _url="/jsoa/PersonClassAction.do?action=list&userType=0";
	            }
	           
      out.write("\r\n\t           <img id=\"p_set\" src=\"/jsoa/imges/di1.gif\" style=\"cursor:pointer;\" onclick=\"jump('/jsoa/menu/setup_app.jsp','');\" title=\"应用设置\"/>&nbsp;\r\n\t           ");
}else{ 
	        	   out.print("&nbsp;");
	           }
      out.write("\r\n\t           ");
//是否管理员
				String sysManager = session.getAttribute("sysManager").toString();
				if (!"0".equals(sysManager)){
					String mainURL = "";
					if("1".equals(sysManager)){
						mainURL = "/jsoa/setup/systemmanager_sysSetup.jsp";
					}else if (sysManager.indexOf("2")>=0){
						mainURL = "/jsoa/ListUserAction.do?status=active";
					}else if ("3".equals(sysManager)){
						mainURL = "/jsoa/CustomDesktopLayoutAction.do?action=view";
					}
				
      out.write("\r\n\t           <img id=\"p_set\" src=\"/jsoa/imges/di5.gif\" style=\"cursor:pointer;\" onclick=\"jump('/jsoa/menu/setup.jsp','");
      out.print(mainURL);
      out.write("');\" title=\"系统设置\"/>&nbsp;\r\n\t            ");
} 
      out.write("\r\n\t             ");

	           if(1==SystemCommon.getAudit()){//如果开启了审计功能
	           	MsManageBD msBD=new MsManageBD();
	           	String sql="select po.managerId,po.empId from com.js.oa.audit.po.AuditManager po where po.empId="+userId;
				List reList=msBD.getListByYourSQL(sql);
				if(null!=reList&&0!=reList.size()){//取出list
				
      out.write("\r\n\t\t\t\t<img id=\"p_set\" src=\"/jsoa/images/cxtj.gif\" style=\"cursor:pointer\" onclick=\"jump('/jsoa/menu/auditSetup.jsp','/jsoa/AuditLogAction.do?action=daiShenHeList');\" title=\"审计设置\"/>&nbsp;&nbsp;\r\n\t\t\t\t");

				}
	           }
	           
      out.write("\r\n\t         </td>\r\n\t      </tr>\r\n\t    </table>\r\n    </td>\r\n  </tr>\r\n</table>\r\n</div>\r\n</body>\r\n</html>\r\n<script>\r\nfunction jumpMain(url){   \r\n    parent.document.all.content2.style.display='none';\r\n\tparent.document.all.MainDesktop.src= url;\r\n}\r\n\r\nfunction jump(leftUrl,rightUrl){\r\n   parent.document.all.menuTop_1001.src=leftUrl;\r\n   if(rightUrl!=\"\"){\r\n\t   parent.document.all.MainDesktop.src=rightUrl;\r\n\t   parent.document.all.content2.style.display='none';   \r\n   }\r\n   parent.document.getElementById(\"TR_MenuTop_ORT\").style.display='none';\r\n   parent.document.getElementById(\"TR_MenuTop_NEW\").style.display='';\r\n}\r\n\r\nfunction load(){\r\n   var menuNum=\"");
      out.print(i);
      out.write("\";\r\n   if(menuNum==\"1\"){\r\n     parent.document.all.leftBottomTR.height=\"96px\";\r\n   }else if(menuNum==\"2\"){\r\n     parent.document.all.leftBottomTR.height=\"123px\";\r\n   }else if(menuNum==\"3\"){\r\n     parent.document.all.leftBottomTR.height=\"150px\";\r\n   }else{\r\n     parent.document.all.leftBottomTR.height=\"177px\";\r\n   }\r\n}\r\n\r\nfunction openURL(url){\r\n    var element=parent.document.all.content1;\r\n    var offsetTop = element.offsetTop; \r\n    var offsetLeft = element.offsetLeft; \r\n    var offsetWidth = element.offsetWidth; \r\n    var offsetHeight = element.offsetHeight; \r\n    while( element = element.offsetParent ) \r\n    { \r\n        offsetTop += element.offsetTop; \r\n        offsetLeft += element.offsetLeft; \r\n    }\r\n    var winTop=parent.window.screenTop;\r\n    var winLeft=parent.window.screenLeft; \r\n    \r\n    var Top=offsetTop+winTop;\r\n    var Left=offsetLeft+winLeft;\r\n    \r\n    offsetHeight=offsetHeight-33;\r\n    offsetWidth=offsetWidth-10;\r\n    \r\n    window.open(url,'','TOP='+Top+',LEFT='+Left+',scrollbars=yes,resizable=yes,width='+offsetWidth+',height='+offsetHeight);\r\n");
      out.write("\r\n}\r\n\r\nfunction shortFocus(obj){\r\n  obj.src=\"/jsoa/imges/9s2.gif\";\r\n}\r\nfunction shortBlur(obj){\r\n   obj.src=\"/jsoa/imges/9s.gif\";\r\n}\r\n\r\nfunction changePanle(flag){\r\n   var url=parent.document.all.menuTop.src;\r\n   if(url.indexOf(\"left_top.jsp\")>0){\r\n\t   var i=0;\r\n\t   var f=-1;\r\n\t   while(parent.document.all.topMenuTD[i]){\r\n\t       if(parent.document.all.topMenuTD[i].className==\"topMenuFocus\"){\r\n\t          f=i;\r\n\t          break;\r\n\t       }\r\n\t       i++;\r\n\t   }\r\n\t   if(f>=0){\r\n\t      parent.document.all.menuTop.src=parent.document.all.topMenuLeftURL[f].value;\r\n\t   }\r\n   }else{\r\n       parent.document.all.menuTop.src=\"/jsoa/menu/left_top.jsp\";\r\n   }\r\n}\r\n</script>\r\n<script src=\"/jsoa/js/util.js\"></script>");
    } catch (java.lang.Throwable t) {
      if (!(t instanceof javax.servlet.jsp.SkipPageException)){
        out = _jspx_out;
        if (out != null && out.getBufferSize() != 0)
          try {
            if (response.isCommitted()) {
              out.flush();
            } else {
              out.clearBuffer();
            }
          } catch (java.io.IOException e) {}
        if (_jspx_page_context != null) _jspx_page_context.handlePageException(t);
        else throw new ServletException(t);
      }
    } finally {
      _jspxFactory.releasePageContext(_jspx_page_context);
    }
  }
}
