/*
 * Generated by the Jasper component of Apache Tomcat
 * Version: JspC/ApacheTomcat8
 * Generated at: 2023-01-06 10:08:18 UTC
 * Note: The last modified time of this file was set to
 *       the last modified time of the source file after
 *       generation to assist with modification tracking.
 */
package org.apache.jsp.jsflow.senduser;

import javax.servlet.*;
import javax.servlet.http.*;
import javax.servlet.jsp.*;

public final class rightType_jsp extends org.apache.jasper.runtime.HttpJspBase
    implements org.apache.jasper.runtime.JspSourceDependent,
                 org.apache.jasper.runtime.JspSourceImports {

  private static final javax.servlet.jsp.JspFactory _jspxFactory =
          javax.servlet.jsp.JspFactory.getDefaultFactory();

  private static java.util.Map<java.lang.String,java.lang.Long> _jspx_dependants;

  private static final java.util.Set<java.lang.String> _jspx_imports_packages;

  private static final java.util.Set<java.lang.String> _jspx_imports_classes;

  static {
    _jspx_imports_packages = new java.util.HashSet<>();
    _jspx_imports_packages.add("javax.servlet");
    _jspx_imports_packages.add("javax.servlet.http");
    _jspx_imports_packages.add("javax.servlet.jsp");
    _jspx_imports_classes = null;
  }

  private volatile javax.el.ExpressionFactory _el_expressionfactory;
  private volatile org.apache.tomcat.InstanceManager _jsp_instancemanager;

  public java.util.Map<java.lang.String,java.lang.Long> getDependants() {
    return _jspx_dependants;
  }

  public java.util.Set<java.lang.String> getPackageImports() {
    return _jspx_imports_packages;
  }

  public java.util.Set<java.lang.String> getClassImports() {
    return _jspx_imports_classes;
  }

  public javax.el.ExpressionFactory _jsp_getExpressionFactory() {
    if (_el_expressionfactory == null) {
      synchronized (this) {
        if (_el_expressionfactory == null) {
          _el_expressionfactory = _jspxFactory.getJspApplicationContext(getServletConfig().getServletContext()).getExpressionFactory();
        }
      }
    }
    return _el_expressionfactory;
  }

  public org.apache.tomcat.InstanceManager _jsp_getInstanceManager() {
    if (_jsp_instancemanager == null) {
      synchronized (this) {
        if (_jsp_instancemanager == null) {
          _jsp_instancemanager = org.apache.jasper.runtime.InstanceManagerFactory.getInstanceManager(getServletConfig());
        }
      }
    }
    return _jsp_instancemanager;
  }

  public void _jspInit() {
  }

  public void _jspDestroy() {
  }

  public void _jspService(final javax.servlet.http.HttpServletRequest request, final javax.servlet.http.HttpServletResponse response)
      throws java.io.IOException, javax.servlet.ServletException {

    final java.lang.String _jspx_method = request.getMethod();
    if (!"GET".equals(_jspx_method) && !"POST".equals(_jspx_method) && !"HEAD".equals(_jspx_method) && !javax.servlet.DispatcherType.ERROR.equals(request.getDispatcherType())) {
      response.sendError(HttpServletResponse.SC_METHOD_NOT_ALLOWED, "JSPs only permit GET, POST or HEAD. Jasper also permits OPTIONS");
      return;
    }

    final javax.servlet.jsp.PageContext pageContext;
    javax.servlet.http.HttpSession session = null;
    final javax.servlet.ServletContext application;
    final javax.servlet.ServletConfig config;
    javax.servlet.jsp.JspWriter out = null;
    final java.lang.Object page = this;
    javax.servlet.jsp.JspWriter _jspx_out = null;
    javax.servlet.jsp.PageContext _jspx_page_context = null;


    try {
      response.setContentType("text/html;charset=gbk");
      pageContext = _jspxFactory.getPageContext(this, request, response,
      			null, true, 8192, true);
      _jspx_page_context = pageContext;
      application = pageContext.getServletContext();
      config = pageContext.getServletConfig();
      session = pageContext.getSession();
      out = pageContext.getOut();
      _jspx_out = out;

      out.write('\r');
      out.write('\n');

String orgInputType=request.getParameter("orgInputType");

String allowId=request.getParameter("formAttr1");
String allowName=request.getParameter("formAttr");
String show=request.getParameter("show");

String inputType=request.getParameter("inputType").toString();


      out.write("\r\n<!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.01 Transitional//EN\">\r\n<html>\r\n<head>\r\n<script type=\"text/javascript\">\r\nvar a='';\r\nvar objID=parent.opener.document.all.");
      out.print(allowId);
      out.write(".value;\r\nvar allowName=parent.opener.document.all.");
      out.print(allowName);
      out.write(".value;\r\nvar selectType='");
      out.print(inputType);
      out.write("';//选择类型，多、单\r\nvar personMobile=parent.opener.document.all.");
      out.print(show);
      out.write(";\r\n\r\nfunction init(){\r\nvar selectTypeValue=window.parent.leftTopFrame.document.getElementById(\"selectType\").value;\r\nif(selectTypeValue.indexOf(\"org\")>=0){\r\n    a=\"o\";\r\n}if(selectTypeValue.indexOf(\"group\")>=0){\r\n    a=\"g\";\r\n}if(selectTypeValue.indexOf(\"private\")>=0){\r\n    a=\"m\";\r\n}if(selectTypeValue.indexOf(\"public\")>=0){\r\n    a=\"p\";\r\n}\r\n}\r\n\r\nvar flag='");
      out.print(orgInputType);
      out.write("';\r\nfunction goRight(){\r\nvar orgId,orgName;\r\n if(flag.indexOf('only')<0){\r\n     orgId=window.parent.leftBottonFrame.document.getElementById(\"orgId\").value;\r\n     orgName=window.parent.leftBottonFrame.document.getElementById(\"orgName\").value;\r\n  }else{\r\n     orgId=window.parent.rightTopFrame.document.getElementById(\"orgId\").value;\r\n     orgName=window.parent.rightTopFrame.document.getElementById(\"orgName\").value;\r\n  }\r\n   var orgHiddenValue=document.getElementById(\"orgIds\").value;\r\n   var groupHiddenValue=document.getElementById(\"groupIds\").value;\r\n   if(flag!=''&&flag!=null){\r\n    if(orgId!=null&&orgId!='null'&&orgId!=''){\r\n      if(orgHiddenValue.indexOf(orgId)<0){\r\n         if(groupHiddenValue.indexOf(orgId)<0){\r\n           if(flag=='yes'||flag=='yesonly'){\r\n             createDiv(orgId,orgName);\r\n           }if(flag=='noonly'){\r\n             document.getElementById(\"orgDivList\").innerText=\"\";\r\n             document.getElementById(\"groupDivList\").innerText=\"\";\r\n             document.getElementById(\"orgIds\").value=\"\";\r\n");
      out.write("             document.getElementById(\"groupIds\").value=\"\";\r\n             createDiv(orgId,orgName);\r\n           }\r\n       }else{\r\n          alert('组('+orgName+')重复选择！');\r\n          return false;\r\n       }\r\n       }else{\r\n         alert('部门('+orgName+')重复选择！');\r\n         return false;\r\n       }\r\n     }else{\r\n       alert('请选择一个部门或组！');\r\n       return false;\r\n     }\r\n    }else{\r\n      alert('不允许选择部门或组！');\r\n      return false;\r\n    }\r\n  }\r\n\r\n\r\nfunction createDiv(orgId,orgName){\r\n  var divId=document.getElementById(orgId);//判断div是否存在\r\n  var orgIds=document.getElementById(\"orgIds\").value;\r\n  var groupIds=document.getElementById(\"groupIds\").value;\r\n   if(!divId&&orgName!=''&&orgName!=null){\r\n\t   var my=document.createElement(\"div\");\r\n\t   if(orgId.indexOf('*')>=0){\r\n\t     document.getElementById(\"orgDivList\").appendChild(my);\r\n\t   }else{\r\n\t      document.getElementById(\"groupDivList\").appendChild(my);\r\n\t   }\r\n\t   my.id=orgId;\r\n\t   my.setAttribute(\"onclick\",function(){changeDivColor(orgId);reMoveOrg(orgId)});\r\n\t   my.setAttribute(\"ondblclick\",function(){dropDiv(orgId)});\r\n");
      out.write("\t   my.style.backgroundColor=\"\";\r\n\t   my.style.color=\"#000000\";\r\n\t   my.style.cursor=\"pointer\";\r\n\t   my.style.styleFloat=\"left\";\r\n\t   my.style.fontSize = \"13px\"; \r\n\t   my.style.width=\"100%\";\r\n\t   //my.innerText=orgName+',';\r\n\t    if(orgId.indexOf('*')>=0){\r\n\t       if(flag=='noonly'){\r\n\t           document.getElementById(\"orgIds\").value+=orgId.substring(1,orgId.length-1);\r\n\t           my.innerText=orgName;\r\n\t       }else{\r\n\t           document.getElementById(\"orgIds\").value+=orgId;\r\n\t           my.innerText=orgName+',';\r\n\t       }\r\n\t    }else{\r\n\t       document.getElementById(\"groupIds\").value+=orgId;\r\n\t       my.innerText=orgName+',';\r\n\t    }\r\n   }else{\r\n       document.getElementById(\"orgIds\").value=orgIds;\r\n       document.getElementById(\"groupIds\").value=groupIds;\r\n   }\r\n}\r\n\r\n\r\nfunction changeDivColor(orgId){\r\n   var obj;\r\n   var objDiv=window.parent.rightFrame.document.getElementsByTagName(\"div\");\r\n     obj=window.parent.rightFrame.document.getElementById(orgId);\r\n     changeColor(objDiv,obj,orgId);\r\n}\r\n\r\n");
      out.write("function changeColor(objDiv,obj,orgId){\r\n   if(objDiv.length>1){\r\n        for(var i=1;i<objDiv.length;i++){\r\n           if(objDiv[i].id==orgId){\r\n              objDiv[i].style.backgroundColor=\"#316ac5\";\r\n              objDiv[i].style.color=\"#FFFFFF\";\r\n           }else{\r\n             objDiv[i].style.backgroundColor=\"\";\r\n              objDiv[i].style.color=\"#000000\";\r\n           }\r\n        }\r\n      }\r\n}\r\n\r\nfunction dropDiv(orgId){\r\n    var orgIds=document.getElementById(\"orgIds\").value;\r\n    var groupIds=document.getElementById(\"groupIds\").value;\r\n    var sb=new StringBuffer();\r\n   if(orgId.indexOf('*')>=0&&orgIds.indexOf(orgId)>=0){\r\n       var selectTemp=orgIds.substring(1,orgIds.length-1).split('\\**');\r\n       for(var k=0;k<selectTemp.length;k++){\r\n          if(selectTemp[k]!=orgId.substring(1,orgId.length-1).split('\\**')[0]){\r\n            sb.append('*'+selectTemp[k]+'*');\r\n          }\r\n       }\r\n    }\r\n    if(orgId.indexOf('@')>=0&&groupIds.indexOf(orgId)>=0){\r\n       groupIds=groupIds.replaceAll(orgId,'');\r\n");
      out.write("    }\r\n    window.parent.rightFrame.document.getElementById(orgId).removeNode(true);\r\n    document.getElementById(\"orgIds\").value=sb.toString();\r\n    document.getElementById(\"groupIds\").value=groupIds;\r\n}\r\n\r\nvar orgID;\r\nfunction reMoveOrg(obj){\r\norgID=obj;\r\n}\r\nfunction delOrgDiv(){\r\ndropDiv(orgID);\r\norgID=\"\";\r\n}\r\n\r\nfunction StringBuffer(){\r\n     this.__strings=new Array();\r\n }\r\n \r\nStringBuffer.prototype.append=function(str){\r\n      this.__strings.push(str);\r\n }\r\nStringBuffer.prototype.toString=function(){\r\n     return this.__strings.join(\"\");\r\n }\r\n\r\n\r\nString.prototype.replaceAll  = function(s1,s2){    \r\n    return this.replace(new RegExp(s1,\"g\"),s2);    \r\n  } \r\n  \r\n\r\n//objID,allowName,selectType\r\nvar k=0;\r\nfunction initDiv(){\r\n  var selected,selectedOther,orgSelected,groupSelected;\r\n  var mobileList, mobile;\r\n  if(objID!=null&&objID!=''&&allowName!=null&&allowName!=''){\r\n    var objValue;\r\n    if(allowName.indexOf(',')>=0){\r\n      objValue=allowName.substring(0,allowName.lastIndexOf(\",\")).split(\",\");\r\n    }else{\r\n");
      out.write("      objValue=allowName.split(',');\r\n    }\r\n    var selectedDivArry;\r\n    var selectedOtherDivArry;\r\n    var orgDivArry;\r\n    var groupDivArry;\r\n     \r\n    if(flag!='noonly'){\r\n      if(objID.indexOf(\"*\")>=0){\r\n  \t      orgSelected=objID.substring(objID.indexOf(\"*\"),objID.lastIndexOf(\"*\")+1);\r\n  \t      orgDivArry=objID.substring(objID.indexOf(\"*\")+1,objID.lastIndexOf(\"*\")).split(\"\\**\");\r\n  \t   }\r\n  \t }else{\r\n  \t      orgSelected=objID;\r\n  \t      orgDivArry=objID.substring(0,objID.length).split(\"\\**\");\r\n  \t }\r\n  \t  \r\n  \t //公共个人组无选状态\r\n  \t if(objID.indexOf(\"@\")>=0){\r\n  \t      groupSelected=objID.substring(objID.indexOf(\"@\"),objID.lastIndexOf(\"@\")+1);\r\n  \t      groupDivArry=objID.substring(objID.indexOf(\"@\")+1,objID.lastIndexOf(\"@\")).split(\"\\@@\");\r\n  \t }\r\n  \t \r\n  \t if(selectType!='yes'){\r\n\t  \tif(objID.indexOf(\"$\")>=0){\r\n\t\t    selected=objID.substring(objID.indexOf(\"$\"),objID.lastIndexOf(\"$\")+1);\r\n\t\t    selectedDivArry=objID.substring(objID.indexOf(\"$\")+1,objID.lastIndexOf(\"$\")).split(\"$$\");\r\n\t\t    document.getElementById('selectIds').value=selected;\r\n");
      out.write("\t   \t}\r\n\t }else{\r\n\t     selected=objID;\r\n\t     selectedDivArry=objID.substring(0,objID.length).split(\"$$\");\r\n\t     document.getElementById('selectIds').value=selected;\r\n\t }\r\n\t //外部人员无单选状态\r\n   \t if(objID.indexOf(\"#\")>=0){\r\n  \t      selectedOther=objID.substring(objID.indexOf(\"#\"),objID.lastIndexOf(\"#\")+1);\r\n  \t      selectedOtherDivArry=objID.substring(objID.indexOf(\"#\")+1,objID.lastIndexOf(\"#\")).split(\"##\");\r\n  \t      document.getElementById('otherSelectIds').value=selectedOther;\r\n  \t }\r\n\r\n  \t if(orgDivArry!=null&&orgDivArry!=''){\r\n  \t     for(var a=0;a<orgDivArry.length;a++){\r\n  \t        createDiv('*'+orgDivArry[a]+'*',objValue[k]);\r\n  \t        k++;\r\n  \t     }\r\n  \t }if(groupDivArry!=null&&groupDivArry!=''){\r\n  \t     for(var d=0;d<groupDivArry.length;d++){\r\n  \t        createDiv('@'+groupDivArry[d]+'@',objValue[k]);\r\n  \t        k++;\r\n  \t     }\r\n  \t }\r\n\r\n  \t if(personMobile){\r\n  \t    document.getElementById(\"personMobile\").value=personMobile.value;\r\n  \t    mobileList=personMobile.value.substring(0,personMobile.value.lastIndexOf(',')).split(',');\r\n");
      out.write("  \t }\r\n  \t \r\n  \t if(selectedDivArry!=null&&selectedDivArry!=''){\r\n  \t     var name;\r\n\t     for(var b=0;b<selectedDivArry.length;b++){\r\n\t\t     if(mobileList==undefined){\r\n\t  \t      mobile='123';\r\n\t  \t     }else{\r\n\t  \t        mobile=mobileList[k];\r\n\t  \t     }if(selectType!='yes'){\r\n\t  \t       name=objValue[k]+',';\r\n\t  \t     }else{\r\n\t  \t       name=objValue[k];\r\n\t  \t     }\r\n\t        var htmlDiv=\"<div id='$\"+selectedDivArry[b]+\"$' ondblclick='drop(\"+selectedDivArry[b]+\",2,\"+mobile+\")' onclick='changePerson(\"+selectedDivArry[b]+\",2,\"+mobile+\")' style='cursor:pointer;float:left;width:100%;fontSize:13px;'>\" +name+\"</div>\";\r\n\t        document.getElementById(\"persionList\").innerHTML += htmlDiv;\r\n\t        k++;\r\n\t     }\r\n  \t }\r\n  \t //外部人员无单选状态\r\n  \t if(selectedOtherDivArry!=null&&selectedOtherDivArry!=''){\r\n  \t   var name1;\r\n  \t     for(var c=0;c<selectedOtherDivArry.length;c++){\r\n  \t       if(mobileList==undefined){\r\n\t  \t      mobile='123';\r\n\t  \t     }else{\r\n\t  \t        mobile=mobileList[k];\r\n\t  \t     }if(selectType!='yes'){\r\n");
      out.write("\t  \t       name1=objValue[k]+',';\r\n\t  \t     }else{\r\n\t  \t       name1=objValue[k];\r\n\t  \t     }\r\n  \t        var htmlDiv=\"<div id='#\"+selectedOtherDivArry[c]+\"#' ondblclick='drop(\"+selectedOtherDivArry[c]+\",3,\"+mobile+\")' onclick='changePerson(\"+selectedOtherDivArry[c]+\",3,\"+mobile+\")'  style='cursor:pointer;float:left;width:100%;fontSize:13px;'>\" +name1+\"</div>\";\r\n  \t        document.getElementById(\"persionList\").innerHTML += htmlDiv;\r\n  \t        k++;\r\n  \t     }\r\n  \t }\r\n  \t \r\n  }\r\n}\r\n\r\n\r\nfunction delDiv(){\r\nif(orgID==undefined||orgID==\"\"){\r\n window.parent.leftBottonFrame.delPersonDiv();\r\n}else{\r\n delOrgDiv();\r\n}\r\n}\r\n\r\nfunction changePerson(obj,flag,mobile){\r\nvar char;\r\nif(flag=='2'){\r\nchar='$';\r\n}if(flag=='3'){\r\nchar='#';\r\n}\r\nwindow.parent.leftBottonFrame.changeDivColor(char+obj+char);\r\nwindow.parent.leftBottonFrame.reMovePerson(char+obj+char,mobile);\r\n}\r\n\r\nfunction drop(obj,flag,mobile){\r\nvar char;\r\nif(flag=='2'){\r\nchar='$';\r\n}if(flag=='3'){\r\nchar='#';\r\n}\r\nwindow.parent.leftBottonFrame.dropDiv(char+obj+char,mobile);\r\n");
      out.write("}\r\n\r\n\r\n</script>\r\n<body leftmargin=\"0\" rightmargin=\"0\" bottommargin=\"0\" style=\"background:#FDF8D6; margin:0px; padding:0px;\" onLoad=\"initDiv()\">\r\n<form name=\"orgTreeBar\" target=\"mainFrame\" method=\"post\">\r\n <table border=\"0\" height=\"373\"  style=\"margin-right:10px;\">\r\n <tr>\r\n <td valign=\"top\" width=\"30\" style=\"font-size:12px;\"><br/><br/><br/><br/><br/>\r\n <input name=\"button\" type=\"button\" onClick=\"goRight()\" value=\">>\"><br/><br/>\r\n <input name=\"button\" type=\"button\" onClick=\"delDiv()\" value=\"<<\"\\\">\r\n </td>\r\n   <td valign=\"top\" width=\"230\" height=\"362\" style=\"background:#F0F7FF; border:1px solid #ADADAD;\">\r\n   \t<div align=\"left\"  style=\"font-size:13px;width:100%;height:100%;overflow-x:auto;overflow-y:auto; white-space:nowrap;\">\r\n   \t  \t<div id=\"orgDivList\" align=\"top\"></div>\r\n   \t  \t<div id=\"groupDivList\" align=\"top\"></div>\r\n   \t  \t<div id=\"persionList\" align=\"top\"></div>\r\n   \t</div>\r\n   </td>\r\n </tr>\r\n <input type=\"hidden\" id=\"selectIds\">\r\n <input type=\"hidden\" id=\"orgIds\">\r\n <input type=\"hidden\" id=\"groupIds\">\r\n");
      out.write(" \r\n <input type=\"hidden\" id=\"otherSelectIds\">\r\n \r\n <input type=\"hidden\" id=\"personMobile\">\r\n </table>\r\n</form>\r\n</body>\r\n</html>");
    } catch (java.lang.Throwable t) {
      if (!(t instanceof javax.servlet.jsp.SkipPageException)){
        out = _jspx_out;
        if (out != null && out.getBufferSize() != 0)
          try {
            if (response.isCommitted()) {
              out.flush();
            } else {
              out.clearBuffer();
            }
          } catch (java.io.IOException e) {}
        if (_jspx_page_context != null) _jspx_page_context.handlePageException(t);
        else throw new ServletException(t);
      }
    } finally {
      _jspxFactory.releasePageContext(_jspx_page_context);
    }
  }
}
