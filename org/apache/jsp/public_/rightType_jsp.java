/*
 * Generated by the Jasper component of Apache Tomcat
 * Version: JspC/ApacheTomcat8
 * Generated at: 2023-01-06 09:56:35 UTC
 * Note: The last modified time of this file was set to
 *       the last modified time of the source file after
 *       generation to assist with modification tracking.
 */
package org.apache.jsp.public_;

import javax.servlet.*;
import javax.servlet.http.*;
import javax.servlet.jsp.*;
import com.js.util.util.BrowserJudge;

public final class rightType_jsp extends org.apache.jasper.runtime.HttpJspBase
    implements org.apache.jasper.runtime.JspSourceDependent,
                 org.apache.jasper.runtime.JspSourceImports {

  private static final javax.servlet.jsp.JspFactory _jspxFactory =
          javax.servlet.jsp.JspFactory.getDefaultFactory();

  private static java.util.Map<java.lang.String,java.lang.Long> _jspx_dependants;

  private static final java.util.Set<java.lang.String> _jspx_imports_packages;

  private static final java.util.Set<java.lang.String> _jspx_imports_classes;

  static {
    _jspx_imports_packages = new java.util.HashSet<>();
    _jspx_imports_packages.add("javax.servlet");
    _jspx_imports_packages.add("javax.servlet.http");
    _jspx_imports_packages.add("javax.servlet.jsp");
    _jspx_imports_classes = new java.util.HashSet<>();
    _jspx_imports_classes.add("com.js.util.util.BrowserJudge");
  }

  private volatile javax.el.ExpressionFactory _el_expressionfactory;
  private volatile org.apache.tomcat.InstanceManager _jsp_instancemanager;

  public java.util.Map<java.lang.String,java.lang.Long> getDependants() {
    return _jspx_dependants;
  }

  public java.util.Set<java.lang.String> getPackageImports() {
    return _jspx_imports_packages;
  }

  public java.util.Set<java.lang.String> getClassImports() {
    return _jspx_imports_classes;
  }

  public javax.el.ExpressionFactory _jsp_getExpressionFactory() {
    if (_el_expressionfactory == null) {
      synchronized (this) {
        if (_el_expressionfactory == null) {
          _el_expressionfactory = _jspxFactory.getJspApplicationContext(getServletConfig().getServletContext()).getExpressionFactory();
        }
      }
    }
    return _el_expressionfactory;
  }

  public org.apache.tomcat.InstanceManager _jsp_getInstanceManager() {
    if (_jsp_instancemanager == null) {
      synchronized (this) {
        if (_jsp_instancemanager == null) {
          _jsp_instancemanager = org.apache.jasper.runtime.InstanceManagerFactory.getInstanceManager(getServletConfig());
        }
      }
    }
    return _jsp_instancemanager;
  }

  public void _jspInit() {
  }

  public void _jspDestroy() {
  }

  public void _jspService(final javax.servlet.http.HttpServletRequest request, final javax.servlet.http.HttpServletResponse response)
      throws java.io.IOException, javax.servlet.ServletException {

    final java.lang.String _jspx_method = request.getMethod();
    if (!"GET".equals(_jspx_method) && !"POST".equals(_jspx_method) && !"HEAD".equals(_jspx_method) && !javax.servlet.DispatcherType.ERROR.equals(request.getDispatcherType())) {
      response.sendError(HttpServletResponse.SC_METHOD_NOT_ALLOWED, "JSPs only permit GET, POST or HEAD. Jasper also permits OPTIONS");
      return;
    }

    final javax.servlet.jsp.PageContext pageContext;
    javax.servlet.http.HttpSession session = null;
    final javax.servlet.ServletContext application;
    final javax.servlet.ServletConfig config;
    javax.servlet.jsp.JspWriter out = null;
    final java.lang.Object page = this;
    javax.servlet.jsp.JspWriter _jspx_out = null;
    javax.servlet.jsp.PageContext _jspx_page_context = null;


    try {
      response.setContentType("text/html;charset=gbk");
      pageContext = _jspxFactory.getPageContext(this, request, response,
      			null, true, 8192, true);
      _jspx_page_context = pageContext;
      application = pageContext.getServletContext();
      config = pageContext.getServletConfig();
      session = pageContext.getSession();
      out = pageContext.getOut();
      _jspx_out = out;

      out.write("\r\n\r\n");

boolean bflag=true;
if(!BrowserJudge.isMSIE(request))bflag=false;
String orgInputType=request.getParameter("orgInputType");
String allowId=request.getParameter("formAttr1");//已存在的id
String allowName=request.getParameter("formAttr");//也存在的id对应名称
String show=request.getParameter("show");//是否允许现选择根部门
String inputType=request.getParameter("inputType").toString();//人员单选 or 多选
String objIndex=request.getParameter("objIndex");
if(objIndex==null || "null".equals(objIndex)){
	objIndex="0";
}

      out.write("\r\n<!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.01 Transitional//EN\">\r\n<html>\r\n<head>\r\n<script src=\"/jsoa/webmail/ajax_util.js\"></script>\r\n<script type=\"text/javascript\">\r\nvar a='';\r\nvar objID=window.parent.opener.document.getElementsByName(\"");
      out.print(allowId);
      out.write('"');
      out.write(')');
      out.write('[');
      out.print(objIndex);
      out.write("].value;\r\nvar allowName=window.parent.opener.document.getElementsByName(\"");
      out.print(allowName);
      out.write('"');
      out.write(')');
      out.write('[');
      out.print(objIndex);
      out.write("].value;\r\nvar selectType='");
      out.print(inputType);
      out.write("';//选择类型，多、单\r\nvar personMobile=parent.opener.document.all.");
      out.print(show);
      out.write(";\r\n\r\nfunction init(){\r\nvar selectTypeValue=window.parent.leftTopFrame.document.getElementById(\"selectType\").value;\r\nif(selectTypeValue.indexOf(\"org\")>=0){//组织\r\n    a=\"o\";\r\n}if(selectTypeValue.indexOf(\"group\")>=0){//群组\r\n    a=\"g\";\r\n}if(selectTypeValue.indexOf(\"private\")>=0){//个人\r\n    a=\"m\";\r\n}if(selectTypeValue.indexOf(\"public\")>=0){//公共\r\n    a=\"p\";\r\n}\r\n}\r\n//yes即可选组合又可选人，可选多个;''不允许选组或组织、yesonly只能选择组织,可选多个组织,noonly只能选择一个组织\r\nvar flag='");
      out.print(orgInputType);
      out.write("';\r\nfunction goRight(){\r\nvar orgId,orgName,childId,childName;\r\n if(flag.indexOf('only')<0){//人员组织都能选择\r\n     orgId=window.parent.leftBottonFrame.document.getElementById(\"orgId\").value;\r\n     orgName=window.parent.leftBottonFrame.document.getElementById(\"orgName\").value;\r\n     childId=window.parent.leftBottonFrame.document.getElementById(\"allDeptIdBuffer\").value;\r\n     childName=window.parent.leftBottonFrame.document.getElementById(\"allDeptNameBuffer\").value;\r\n  }else{//只能选组织\r\n     orgId=window.parent.rightTopFrame.document.getElementById(\"orgId\").value;\r\n     orgName=window.parent.rightTopFrame.document.getElementById(\"orgName\").value;\r\n     childId=window.parent.rightTopFrame.document.getElementById(\"allDeptIdBuffer\").value;\r\n     childName=window.parent.rightTopFrame.document.getElementById(\"allDeptNameBuffer\").value;\r\n  }\r\n   var orgHiddenValue=document.getElementById(\"orgIds\").value;//已选组织\r\n   var groupHiddenValue=document.getElementById(\"groupIds\").value;//已选组\r\n   if(flag!=''&&flag!=null){\r\n    if(orgId!=null&&orgId!='null'&&orgId!=''){\r\n");
      out.write("      if(orgHiddenValue.indexOf('*'+'-1'+'*')<0){\r\n      if(orgHiddenValue.indexOf(orgId)<0){\r\n      \tdelSelectedChildOrg(flag,orgId);\r\n      \t //包含子组织\r\n      \t var temp=checkContainChild(flag,childId,childName,orgId,orgName);\r\n      \t if(temp){\r\n      \t \treturn false;\r\n      \t }\r\n         if(groupHiddenValue.indexOf(orgId)<0){\r\n           if(flag=='yes'||flag=='yesonly'||flag=='yesonly_j'){\r\n             createDiv(orgId,orgName);\r\n           }if(flag=='noonly'){\r\n             document.getElementById(\"orgDivList\").innerHTML=\"\";\r\n             document.getElementById(\"groupDivList\").innerHTML=\"\";\r\n             document.getElementById(\"orgIds\").value=\"\";\r\n             document.getElementById(\"groupIds\").value=\"\";\r\n             createDiv(orgId,orgName);\r\n           }\r\n         }else{\r\n            alert('组('+orgName+')重复选择！');\r\n            return false;\r\n          }\r\n       }else{\r\n         alert('部门('+orgName+')重复选择！');\r\n         return false;\r\n       }\r\n      }else{\r\n        alert('已经选择了全部组织及人员！');\r\n        return false;\r\n");
      out.write("      }\r\n    }else{\r\n       rePortError('0');\r\n    }\r\n    }else{\r\n      rePortError('1');\r\n    }\r\n  }\r\n/**\r\n* 检查已选区域内是否是预选组织的子组织\r\n* flag 选择类型\r\n* childId 已选组织id\r\n* childName 已选组织名称\r\n* orgId 预选组织id\r\n* orgName 预选组织名称\r\n*/\r\nfunction checkContainChild(flag,childId,childName,orgId,orgName){\r\n\tif(flag=='yes'){//既能选组织还是你选人员\r\n\t  var orgIdString=window.parent.leftBottonFrame.document.getElementById(\"orgIdString\").value;\r\n \t  var orgIds=window.document.getElementById(\"orgIds\").value;\r\n \t  var orgIdsArr=orgIds.substring(1,orgIds.length-1).split('\\**');\r\n\t  for(var i=0;i<orgIdsArr.length;i++){\r\n\t\t if(orgIdString.indexOf('$'+orgIdsArr[i]+'$')>=0){\r\n\t\t \tvar url=\"/jsoa/selectObj.do?method=getOrgName&orgId=\"+orgIdsArr[i];\r\n\t\t \tsendG(url,getResult,null);\r\n\t\t \treturn true;\r\n\t\t }\r\n\t  }\t \r\n\t}else if(flag=='yesonly'){//只能选组织\r\n\t  var orgIdString=window.parent.rightTopFrame.document.getElementById(\"orgIdString\").value;\r\n \t  var orgIds=window.document.getElementById(\"orgIds\").value;\r\n \t  var orgIdsArr=orgIds.substring(1,orgIds.length-1).split('\\**');\r\n");
      out.write("\t  for(var i=0;i<orgIdsArr.length;i++){\r\n\t\t if(orgIdString.indexOf('$'+orgIdsArr[i]+'$')>=0){\r\n\t\t \tvar url=\"/jsoa/selectObj.do?method=getOrgName&orgId=\"+orgIdsArr[i];\r\n\t\t \tsendG(url,getResult,null);\r\n\t\t \treturn true;\r\n\t\t }\r\n\t  }\r\n\t}else{\r\n\t\treturn false;\r\n\t}\r\n}\r\n\r\nfunction getResult(cartXML){\r\n   var orgName;\r\n   if(window.parent.leftBottonFrame){//人员组织都能选时\r\n   \t orgName=window.parent.leftBottonFrame.document.getElementById(\"orgName\").value;\r\n   }else{//只能选择人员时\r\n   \t orgName=window.parent.rightTopFrame.document.getElementById(\"orgName\").value;\r\n   }\r\n   var cart = cartXML.getElementsByTagName(\"result\")[0];\r\n   var name = cart.getElementsByTagName(\"name\")[0].firstChild.nodeValue;\r\n   alert(name+' 已包含 '+orgName);\r\n   return true;\r\n}\r\n/**\r\n* 删除子部门元素\r\n* flag 选择类型\r\n* orgId 部门id\r\n*/\r\nfunction delSelectedChildOrg(flag,orgId){\r\n\tif(flag=='yes'||flag=='yesonly'){\r\n\t\torgId=orgId.substring(1,orgId.length-1);\r\n\t\tvar url=\"/jsoa/selectObj.do?method=getChildOrg&orgId=\"+orgId;\r\n\t \tsendG(url,getResultTemp,null);\r\n \t}\r\n}\r\n\r\nfunction getResultTemp(cartXML){\r\n");
      out.write("   var cart = cartXML.getElementsByTagName(\"result\")[0];\r\n   var ids = cart.getElementsByTagName(\"ids\")[0].firstChild.nodeValue;\r\n   if(ids!=''&&ids!=null&&ids!='null'){\r\n   \t var orgIds=document.getElementById(\"orgIds\").value;\r\n  \t var idsArr=ids.split(',');\r\n   \t for(var i=0;i<idsArr.length;i++){\r\n   \t \tif(orgIds.indexOf('*'+idsArr[i]+'*')>=0){\r\n   \t \t\tdropDiv('*'+idsArr[i]+'*');\r\n   \t \t}\r\n   \t }\r\n   }\r\n}\r\n/**\r\n* 提示错误信息\r\n* a 错误类型\r\n*/\r\nfunction rePortError(a){\r\n var objValue;\r\n var obj=window.parent.topFrame.document.getElementsByName('radioType');\r\n if(obj){\r\n   for(var i=0;i<obj.length;i++){\r\n\t  if(window.parent.topFrame.document.getElementsByName('radioType')[i].checked){\r\n\t      objValue=window.parent.topFrame.document.getElementsByName('radioType')[i].value;\r\n\t      break;\r\n\t  } \r\n   }\r\n } \r\n  if(objValue=='0'&&a=='1'){\r\n     alert('不允许选择部门！');\r\n     return false;\r\n  }if(objValue=='1'&&a=='1'){\r\n     alert('不允许选择组！');\r\n     return false;\r\n  }if(objValue=='0'&&a=='0'){\r\n     alert('请选择一个部门！');\r\n     return false;\r\n");
      out.write("  }\r\n}  \r\n\r\n//已选类表中存预选的组织时，取消所有改组织下的人员\r\nfunction userInOrg(){\r\n if(flag!=''&&flag.indexOf('only')<0){\r\n  var selectedOrgIds=document.getElementById(\"orgIds\").value;//已选组织\r\n  var selectedGroupIds=document.getElementById(\"groupIds\").value;//已选组\r\n  var selectedUserIds=document.getElementById(\"selectIds\").value;//已选系统人员\r\n  var empIDStr=window.parent.leftBottonFrame.document.getElementById(\"empIDStr\").value;//预选人id串\r\n  var orgId=window.parent.leftBottonFrame.document.getElementById(\"orgId\").value;//预选组织ID\r\n  var orgName=window.parent.leftBottonFrame.document.getElementById(\"orgName\").value;//预选组织名称\r\n  if(orgId!=''&&selectedUserIds!=null&&selectedUserIds!=''){\r\n      var selectInnerTemp=selectedUserIds.substring(1,selectedUserIds.length-1).split('$$');\r\n\t    if(selectInnerTemp.length>0){\r\n\t      for(var i=0;i<selectInnerTemp.length;i++){\r\n\t          if(empIDStr.indexOf('$'+selectInnerTemp[i]+'$')>=0){\r\n\t             delDivByID('$'+selectInnerTemp[i]+'$');// update this\r\n\t          }\r\n\t    }\r\n     }\r\n  }\r\n  window.parent.leftBottonFrame.document.getElementById('none').checked=false;//取消全选框\r\n");
      out.write("  }\r\n  goRight();//选择\r\n}\r\n/**\r\n* 选择组织入口\r\n*/\r\nfunction goRightTemp(){\r\n  var select=window.parent.leftTopFrame.document.getElementById(\"selectType\").value;\r\n  var selectType=window.parent.leftTopFrame.document.getElementById(\"selectType\").value;\r\n  var root,deptIdBuffer,deptNameBuffer,column;//\r\n  var allDeptIdBuffer,allDeptNameBuffer;\r\n  var flagl=window.parent.leftBottonFrame;//选人&&选组织\r\n  var flagr=window.parent.rightTopFrame;//只能选组织\r\n  if(flagl){\r\n\troot=flagl.document.getElementById(\"orgId\").value;\r\n\tdeptIdBuffer=flagl.document.getElementById(\"deptIdBuffer\").value;\r\n\tdeptNameBuffer=flagl.document.getElementById(\"deptNameBuffer\").value;\r\n    allDeptIdBuffer=flagl.document.getElementById(\"allDeptIdBuffer\").value;\r\n\tallDeptNameBuffer=flagl.document.getElementById(\"allDeptNameBuffer\").value;\r\n    if(selectType.indexOf('org')>=0){\r\n\t    column='*';\r\n    }else if(selectType.indexOf('group')>=0){\r\n\t    column='@';\r\n    }\r\n    //alert(root);alert(deptIdBuffer);alert(deptNameBuffer);alert(allDeptIdBuffer);alert(allDeptNameBuffer);\r\n");
      out.write("  }else if(flagr){\r\n    root=flagr.document.getElementById(\"orgId\").value;\r\n\tdeptIdBuffer=flagr.document.getElementById(\"deptIdBuffer\").value;\r\n\tdeptNameBuffer=flagr.document.getElementById(\"deptNameBuffer\").value;\r\n\tallDeptIdBuffer=flagr.document.getElementById(\"allDeptIdBuffer\").value;\r\n\tallDeptNameBuffer=flagr.document.getElementById(\"allDeptNameBuffer\").value;\r\n\tif(selectType.indexOf('org')>=0){\r\n\t    column='*';\r\n    }else if(selectType.indexOf('group')>=0){\r\n\t    column='@';\r\n    }\r\n  }\r\n  if(select=='zhiWu'){\r\n     alert('不允许选择职务！');\r\n     return false;\r\n  }else if(select=='gangWei'){\r\n     alert('不允许选择岗位！');\r\n     return false;\r\n  }else if(select=='privatePerson'){\r\n     alert('不允许选择个人组！');\r\n     return false;\r\n  }else if(select=='publicPerson'){\r\n     alert('不允许选择公共组！');\r\n     return false;\r\n  }else if(root.substring(1,root.length-1)=='0'||root.substring(1,root.length-1)=='-1'){\r\n     selectAllDept(deptIdBuffer,deptNameBuffer,column,allDeptIdBuffer,allDeptNameBuffer);\r\n  }else if(select=='downEmp'){//选择下属\r\n");
      out.write("     selectDownEmp();\r\n  }else if(select=='customer'||select=='project'){//选择客户及项目\r\n  \t alert('不允许选择结构类型！');\r\n  \t return false;\r\n  }else{\r\n    if(root.substring(1,root.length-1)=='2012'){//知识管理中，栏目可查看人为存在人员人员时，定义‘其他’节点不能选择\r\n      alert('其他 不能被选择！');\r\n      return false;\r\n    }else{\r\n       userInOrg();\r\n    }\r\n  }\r\n // alert(select);\r\n}\r\n\r\n//选择下属\r\nvar selected;\r\nfunction selectDownEmp(){\r\n  var orgId;\r\n  var orgName;\r\n  selected='downEmp';\r\n  var flagl=window.parent.leftBottonFrame;//选人&&选组织 数据来源\r\n  var flagr=window.parent.rightTopFrame;//只能选组织  数据来源\r\n  if(flagl){\r\n      orgId=flagl.document.getElementById(\"orgId\").value;\r\n      orgName=flagl.document.getElementById(\"orgName\").value;\r\n      var divObj=document.getElementById(orgId);\r\n      if(divObj){\r\n         alert(\"下属  \"+orgName+\"  重复选择！\");\r\n         return false;\r\n      }else{\r\n         window.parent.leftBottonFrame.createDiv(orgId,orgName);\r\n      }\r\n  }if(flagr){\r\n      orgId=flagr.document.getElementById(\"orgId\").value;\r\n      orgName=flagr.document.getElementById(\"orgName\").value;\r\n");
      out.write("      var divObj=document.getElementById(orgId);\r\n      if(divObj){\r\n         alert(\"下属  \"+orgName+\"  重复选择！\");\r\n         return false;\r\n      }else{\r\n      \tcreateDiv(orgId,orgName);\r\n      }\r\n  }\r\n}\r\n/**\r\n* 选择根部门\r\n* deptIdBuffer 部门id串\r\n* deptNameBuffer 部门名称串\r\n* column 标志* #\r\n* allDeptIdBuffer 所有部门id串 \r\n* allDeptNameBuffer 所有部门名称串\r\n*/\r\nfunction selectAllDept(deptIdBuffer,deptNameBuffer,column,allDeptIdBuffer,allDeptNameBuffer){\r\nvar root='");
      out.print(show);
      out.write("';//*可能追加脚本元素或作为扩充元素：手机； 是否可选跟部门：root；协同串发并发\r\nvar flagl=window.parent.leftBottonFrame;//选人&&选组织 数据来源\r\nvar flagr=window.parent.rightTopFrame;//只能选组织  数据来源\r\nvar rootId,rootName;\r\nif(flag!=''&&flag!=null){\r\n   if(root=='root'){//root=='_coop_select'协同\r\n       if(flagl){\r\n          rootName=flagl.document.getElementById(\"orgName\").value;\r\n          rootId=flagl.document.getElementById(\"orgId\").value;\r\n       }if(flagr){\r\n          rootName=flagr.document.getElementById(\"orgName\").value;\r\n          rootId=flagr.document.getElementById(\"orgId\").value;\r\n       }\r\n       if(flag=='noonly'){//只能选择一个组织\r\n\t       document.getElementById(\"orgDivList\").innerText=\"\";\r\n\t       document.getElementById(\"groupDivList\").innerText=\"\";\r\n\t       document.getElementById(\"orgIds\").value=\"\";\r\n\t       document.getElementById(\"groupIds\").value=\"\";\r\n\t       createDiv(column+\"0\"+column,rootName);//组织管理，编辑组织时，处于一级组织父部门Id=0\r\n       }if(flag=='yes'||flag=='yesonly'){//yes即可选组合又可选人 yesonly只能选择组织\r\n           if(rootId.substring(1,rootId.length-1)=='-1'){\r\n");
      out.write("              window.parent.bottonFrame.clean();//选择根组织，等同于默认全部。清除其他已选择项\r\n           }\r\n           createDiv(column+\"-1\"+column,rootName);//创建已选择根组织元素\r\n       }\r\n    }else{\r\n       alert('不允许选择根部门！');\r\n       return false;\r\n     }\r\n}else{\r\n   alert('不允许选择部门！');\r\n   return false;\r\n }\r\n}\r\n//删除已选元素\r\nfunction delDivByID(objId){\r\n   window.parent.leftBottonFrame.dropDiv(objId,\"\");\r\n}\r\n\r\n/**\r\n* 创建选择元素\r\n* orgId 预选组织id\r\n* orgName 预选组织名称\r\n*/\r\nfunction createDiv(orgId,orgName){\r\n  var divId=document.getElementById(orgId);//判断div是否存在\r\n  var orgIds=document.getElementById(\"orgIds\").value;\r\n  var groupIds=document.getElementById(\"groupIds\").value;\r\n   if(!divId&&orgName!=''&&orgName!=null){//预选元素是否已经存在\r\n\t   var my=document.createElement(\"div\");\r\n\t   if(orgId.indexOf('*')>=0){//选择组织\r\n\t     document.getElementById(\"orgDivList\").appendChild(my);\r\n\t   }else if(orgId.indexOf('$')>=0){//选择人员\r\n\t     document.getElementById(\"persionList\").appendChild(my);\r\n\t   }else{//其他\r\n\t      document.getElementById(\"groupDivList\").appendChild(my);\r\n");
      out.write("\t   }\r\n\t   my.id=orgId;\r\n\t   ");
if(bflag){
      out.write("\r\n\t   my.setAttribute(\"onclick\",function(){changeDivColor(orgId);reMoveOrg(orgId)});//设置点击事件\r\n\t   my.setAttribute(\"ondblclick\",function(){dropDiv(orgId)});//设置双击事件\r\n\t   ");
}else{
      out.write("\r\n\t   my.onclick=function(){changeDivColor(orgId);reMoveOrg(orgId)};\r\n\t   my.ondblclick=function(){dropDiv(orgId)};");
}
      out.write("\r\n\t   my.style.backgroundColor=\"\";\r\n\t   my.style.color=\"#000000\";\r\n\t   my.style.cursor=\"pointer\";\r\n\t   my.style.styleFloat=\"left\";\r\n\t   my.style.fontSize = \"13px\"; \r\n\t   my.title=\"双击移出\";\r\n\t   my.style.width=\"100%\";\r\n\t   //my.innerText=orgName+',';\r\n\t    if(orgId.indexOf('*')>=0){//组织\r\n\t       if(flag=='noonly'){\r\n\t           document.getElementById(\"orgIds\").value+=orgId.substring(1,orgId.length-1);\r\n\t           ");
if(bflag){
      out.write("my.innerText=orgName;");
}else{
      out.write("my.textContent=orgName;");
}
      out.write("\r\n\t       }else{\r\n\t           document.getElementById(\"orgIds\").value+=orgId;\r\n\t           ");
if(bflag){
      out.write("my.innerText=orgName+',';");
}else{
      out.write("my.textContent=orgName+',';");
}
      out.write("\r\n\t       }\r\n\t    }else if(orgId.indexOf('$')>=0){//人员\r\n\t    \t//选择下属\r\n\t    \tif(selected=='downEmp'){\r\n\t    \t\t//alert(selected);\r\n\t    \t\t//alert(document.getElementById(\"selectIds\").value);\r\n\t    \t\tdocument.getElementById(\"selectIds\").value+=orgId;\r\n\t    \t}else{\r\n\t           document.getElementById(\"orgIds\").value+=orgId;\r\n\t        }\r\n\t        ");
if(bflag){
      out.write("my.innerText=orgName+',';");
}else{
      out.write("my.textContent=orgName+',';");
}
      out.write("\r\n\t    }else{\r\n\t       document.getElementById(\"groupIds\").value+=orgId;\r\n\t       ");
if(bflag){
      out.write("my.innerText=orgName+',';");
}else{
      out.write("my.textContent=orgName+',';");
}
      out.write("\r\n\t       //my.innerText=orgName+',';\r\n\t    }\r\n   }else{//不存在\r\n       document.getElementById(\"orgIds\").value=orgIds;\r\n       document.getElementById(\"groupIds\").value=groupIds;\r\n   }\r\n}\r\n\r\n\r\nfunction changeDivColor(orgId){\r\n   var obj;\r\n   var objDiv=window.parent.rightFrame.document.getElementsByTagName(\"div\");\r\n     obj=window.parent.rightFrame.document.getElementById(orgId);\r\n     changeColor(objDiv,obj,orgId);\r\n}\r\n\r\nfunction changeColor(objDiv,obj,orgId){\r\n   if(objDiv.length>1){\r\n        for(var i=1;i<objDiv.length;i++){\r\n           if(objDiv[i].id==orgId){\r\n              objDiv[i].style.backgroundColor=\"#316ac5\";\r\n              objDiv[i].style.color=\"#FFFFFF\";\r\n           }else{\r\n             objDiv[i].style.backgroundColor=\"\";\r\n              objDiv[i].style.color=\"#000000\";\r\n           }\r\n        }\r\n      }\r\n}\r\n//删除已选元素\r\nfunction dropDiv(orgId){\r\n    var orgIds=document.getElementById(\"orgIds\").value;\r\n    var groupIds=document.getElementById(\"groupIds\").value;\r\n    var sb=new StringBuffer();\r\n   if(orgId.indexOf('*')>=0&&orgIds.indexOf(orgId)>=0){//过滤重复并删除\r\n");
      out.write("       var selectTemp=orgIds.substring(1,orgIds.length-1).split('\\**');\r\n       for(var k=0;k<selectTemp.length;k++){\r\n          if(selectTemp[k]!=orgId.substring(1,orgId.length-1).split('\\**')[0]){\r\n            sb.append('*'+selectTemp[k]+'*');\r\n          }\r\n       }\r\n    }\r\n    if(orgId.indexOf('@')>=0&&groupIds.indexOf(orgId)>=0){//过滤重复并删除\r\n       groupIds=groupIds.replaceAll(orgId,'');\r\n    }\r\n    if(orgId.indexOf('$')>=0&&orgIds.indexOf(orgId)>=0){//过滤重复并删除\r\n       var selectTemp=orgIds.substring(1,orgIds.length-1).split('$$');\r\n       for(var k=0;k<selectTemp.length;k++){\r\n          if(selectTemp[k]!=orgId.substring(1,orgId.length-1).split('$$')[0]){\r\n            sb.append('$'+selectTemp[k]+'$');\r\n          }\r\n       }\r\n    }\r\n   ");
if(bflag){
      out.write("\r\n    window.parent.rightFrame.document.getElementById(orgId).removeNode(true);//删除元素\r\n    ");
}else{
      out.write("\r\n    var lis=window.parent.rightFrame.document.getElementById(\"orgDivList\");//groupDivList\r\n    if(orgId.indexOf('@')>=0){\r\n    \tlis=window.parent.rightFrame.document.getElementById(\"groupDivList\");\r\n    }\r\n    var org=window.parent.rightFrame.document.getElementById(orgId);\r\n    lis.removeChild(org);\r\n    ");
}
      out.write("\r\n    document.getElementById(\"orgIds\").value=sb.toString();//重置组织删除后传递值\r\n    document.getElementById(\"groupIds\").value=groupIds;//重置组删除后传递值\r\n}\r\n\r\nvar orgID=\"\";\r\nfunction reMoveOrg(obj){\r\norgID=obj;\r\n}\r\nfunction delOrgDiv(){\r\ndropDiv(orgID);\r\norgID=\"\";\r\n}\r\n\r\nfunction StringBuffer(){\r\n     this.__strings=new Array();\r\n }\r\n \r\nStringBuffer.prototype.append=function(str){\r\n      this.__strings.push(str);\r\n }\r\nStringBuffer.prototype.toString=function(){\r\n     return this.__strings.join(\"\");\r\n }\r\n\r\n\r\nString.prototype.replaceAll  = function(s1,s2){    \r\n    return this.replace(new RegExp(s1,\"g\"),s2);    \r\n  } \r\n  \r\n\r\n//objID,allowName,selectType\r\nvar k=0;\r\n//初始化。选人框中存在元素\r\nfunction initDiv(){\r\n  var selected,selectedOther,orgSelected,groupSelected;\r\n  var mobileList, mobile;\r\n  if(objID!=null&&objID!=''&&allowName!=null&&allowName!=''){\r\n    var objValue;\r\n    if(allowName.indexOf(',')>=0){\r\n      //objValue=allowName.substring(0,allowName.lastIndexOf(\",\")).split(\",\");\r\n   \t  objValue=rtrim(allowName).split(\",\");\r\n    }else{\r\n");
      out.write("      objValue=allowName.split(',');\r\n    }\r\n    var selectedDivArry;\r\n    var selectedOtherDivArry;\r\n    var orgDivArry;\r\n    var groupDivArry;\r\n    if(flag!='noonly'){\r\n      if(objID.indexOf(\"*\")>=0){\r\n  \t      orgSelected=objID.substring(objID.indexOf(\"*\"),objID.lastIndexOf(\"*\")+1);\r\n  \t      orgDivArry=objID.substring(objID.indexOf(\"*\")+1,objID.lastIndexOf(\"*\")).split(\"\\**\");\r\n  \t   }\r\n  \t }else{\r\n  \t      orgSelected=objID;\r\n  \t      orgDivArry=objID.substring(0,objID.length).split(\"\\**\");\r\n  \t }\r\n  \t  \r\n  \t //公共个人组无选状态\r\n  \t if(objID.indexOf(\"@\")>=0){\r\n  \t      groupSelected=objID.substring(objID.indexOf(\"@\"),objID.lastIndexOf(\"@\")+1);\r\n  \t      groupDivArry=objID.substring(objID.indexOf(\"@\")+1,objID.lastIndexOf(\"@\")).split(\"\\@@\");\r\n  \t }\r\n  \t if(selectType!='yes'){\r\n\t  \tif(objID.indexOf(\"$\")>=0){\r\n\t\t    selected=objID.substring(objID.indexOf(\"$\"),objID.lastIndexOf(\"$\")+1);\r\n\t\t    selectedDivArry=objID.substring(objID.indexOf(\"$\")+1,objID.lastIndexOf(\"$\")).split(\"$$\");\r\n\t\t    document.getElementById('selectIds').value=selected;\r\n");
      out.write("\t   \t}\r\n\t }else{\r\n\t     selected=objID;\r\n\t     selectedDivArry=objID.substring(0,objID.length).split(\"$$\");\r\n\t     document.getElementById('selectIds').value=selected;\r\n\t }\r\n\t \r\n\t //外部人员无单选状态\r\n   \t if(objID.indexOf(\"#\")>=0){\r\n  \t      selectedOther=objID.substring(objID.indexOf(\"#\"),objID.lastIndexOf(\"#\")+1);\r\n  \t      selectedOtherDivArry=objID.substring(objID.indexOf(\"#\")+1,objID.lastIndexOf(\"#\")).split(\"##\");\r\n  \t      document.getElementById('otherSelectIds').value=selectedOther;\r\n  \t }\r\n\t//创建元素\r\n  \t if(orgDivArry!=null&&orgDivArry!=''){\r\n  \t     for(var a=0;a<orgDivArry.length;a++){\r\n  \t        createDiv('*'+orgDivArry[a]+'*',objValue[k]);\r\n  \t        k++;\r\n  \t     }\r\n  \t }if(groupDivArry!=null&&groupDivArry!=''){\r\n  \t     for(var d=0;d<groupDivArry.length;d++){\r\n  \t        createDiv('@'+groupDivArry[d]+'@',objValue[k]);\r\n  \t        k++;\r\n  \t     }\r\n  \t }\r\n\r\n  \t if(personMobile){\r\n  \t    document.getElementById(\"personMobile\").value=personMobile.value;\r\n  \t    mobileList=personMobile.value.substring(0,personMobile.value.lastIndexOf(',')).split(',');\r\n");
      out.write("  \t }\r\n  \t \r\n  \t if(selectedDivArry!=null&&selectedDivArry!=''){\r\n  \t     var name;\r\n\t     for(var b=0;b<selectedDivArry.length;b++){\r\n\t\t     if(mobileList==undefined){\r\n\t  \t      mobile='123';\r\n\t  \t     }else{\r\n\t  \t        mobile=mobileList[k];\r\n\t  \t     }\r\n\t\t   //确保其他模块人员选择页面中，能移出第一个人员 \r\n\t\t     if(mobile==\"\"){\r\n\t\t    \tmobile=\"123\";\r\n\t\t     }\r\n\t\t   //--------------------------------\r\n\t\t     if(selectType!='yes'){\r\n\t  \t       name=objValue[k]+',';\r\n\t  \t     }else{\r\n\t  \t       name=objValue[k];\r\n\t  \t     }\r\n\t  \t    \r\n\t  \t    if(objValue[k]!=undefined){\r\n\t        var htmlDiv=\"<div id='$\"+selectedDivArry[b]+\"$' title='双击移出' ondblclick='drop(\"+selectedDivArry[b]+\",2,\"+mobile+\")' onclick='changePerson(\"+selectedDivArry[b]+\",2,\"+mobile+\")' style='cursor:pointer;float:left;width:100%;fontSize:13px;'>\" +name+\"</div>\";\r\n\t        document.getElementById(\"persionList\").innerHTML += htmlDiv;\r\n\t        }\r\n\t        k++;\r\n\t     }\r\n  \t }\r\n  \t //外部人员无单选状态\r\n  \t if(selectedOtherDivArry!=null&&selectedOtherDivArry!=''){\r\n  \t   var name1;\r\n");
      out.write("  \t     for(var c=0;c<selectedOtherDivArry.length;c++){\r\n  \t       if(mobileList==undefined){\r\n\t  \t      mobile='123';\r\n\t  \t     }else{\r\n\t  \t        mobile=mobileList[k];\r\n\t  \t     }\r\n  \t       //确保其他模块人员选择页面中，能移出第一个人员\r\n  \t     \tif(mobile==\"\"){\r\n\t\t    \tmobile=\"123\";\r\n\t\t     }\r\n  \t     \t//------------------------------\r\n  \t       if(selectType!='yes'){\r\n\t  \t       name1=objValue[k]+',';\r\n\t  \t     }else{\r\n\t  \t       name1=objValue[k];\r\n\t  \t     }\r\n\t  \t    if(objValue[k]!=undefined){\r\n  \t        var htmlDiv=\"<div id='#\"+selectedOtherDivArry[c]+\"#' title='双击移出' ondblclick='drop(\"+selectedOtherDivArry[c]+\",3,\"+mobile+\")' onclick='changePerson(\"+selectedOtherDivArry[c]+\",3,\"+mobile+\")'  style='cursor:pointer;float:left;width:100%;fontSize:12px;'>\" +name1+\"</div>\";\r\n  \t        document.getElementById(\"persionList\").innerHTML += htmlDiv;\r\n  \t        }\r\n  \t        k++;\r\n  \t     }\r\n  \t }\r\n  \t \r\n  }\r\n}\r\nfunction rtrim(str){\r\n\tvar reg=/,$/gi; \r\n\tstr=str.replace(reg,\"\"); \r\n\treturn str;\r\n}\r\n\r\nfunction delDiv(){\r\n  if(orgID==undefined||orgID==\"\"){\r\n");
      out.write("     window.parent.leftBottonFrame.delPersonDiv();\r\n  }else{\r\n     delOrgDiv();\r\n  }\r\n}\r\n\r\nfunction changePerson(obj,flag,mobile){\r\nvar char;\r\nif(flag=='2'){\r\nchar='$';\r\n}if(flag=='3'){\r\nchar='#';\r\n}\r\nif(window.parent.leftBottonFrame){\r\n\twindow.parent.leftBottonFrame.changeDivColor(char+obj+char);\r\n\twindow.parent.leftBottonFrame.reMovePerson(char+obj+char,mobile);\r\n}else{//选择下属时\r\n\tchangeDivColor(char+obj+char);\r\n\t//reMoveOrg(char+obj+char);\r\n}\r\n}\r\n\r\nfunction drop(obj,flag,mobile){\r\nvar char;\r\nif(flag=='2'){\r\nchar='$';\r\n}if(flag=='3'){\r\nchar='#';\r\n}\r\nif(window.parent.leftBottonFrame){\r\n\twindow.parent.leftBottonFrame.dropDiv(char+obj+char,mobile);\r\n}else{//选择下属时\r\n\tdropDiv(char+obj+char);\r\n\tvar selectIds=document.getElementById(\"selectIds\").value;\r\n\tvar idStr=new StringBuffer();\r\n    if(selectIds!=''&&selectIds!=null&&selectIds!='null'){\r\n    \tvar selectTemp=selectIds.substring(1,selectIds.length-1).split('$$');\r\n    \tfor(var i=0;i<selectTemp.length;i++){\r\n    \t\tif(selectTemp[i]!=obj){\r\n    \t\t\tidStr.append(char+selectTemp[i]+char);\r\n");
      out.write("    \t\t}\r\n    \t}\r\n    }\r\n    document.getElementById(\"selectIds\").value=idStr.toString();\r\n}\r\n\r\n}\r\n\r\n\r\n</script>\r\n<body leftmargin=\"0\" rightmargin=\"0\" bottommargin=\"0\" style=\"background:#e6eff8; margin:0px; padding:0px;\" onLoad=\"initDiv()\">\r\n<form name=\"orgTreeBar\" target=\"mainFrame\" method=\"post\" style=\"margin:0px; padding-left:12px;\">\r\n <table border=\"0\" height=\"360\"  style=\"margin-right:10px;\">\r\n <tr>\r\n <td valign=\"top\" width=\"30\" style=\"font-size:12px;\"><br/><br/><br/><br/><br/>\r\n");
      out.write("\r\n <img style=\"cursor:pointer;\" src='/jsoa/images/toolbar/right.gif' align='absmiddle' onClick=\"goRightTemp()\">\r\n <br/><br/>\r\n");
      out.write("\r\n<img style=\"cursor:pointer;\" src='/jsoa/images/toolbar/left.gif' align='absmiddle' onClick=\"delDiv()\">\r\n </td>\r\n <td valign=\"top\" width=\"255\" height=\"360\" style=\"background:#FFF; border:1px solid #ADADAD;\">\r\n   \t<div align=\"left\"  style=\"font-size:12px;width:100%;height:100%;overflow-x:auto;overflow-y:auto; white-space:nowrap;\">\r\n   \t  \t<div id=\"orgDivList\" align=\"top\"></div>\r\n   \t  \t<div id=\"groupDivList\" align=\"top\"></div>\r\n   \t  \t<div id=\"persionList\" align=\"top\"></div>\r\n   \t</div>\r\n </td>\r\n </tr>\r\n <input type=\"hidden\" id=\"selectIds\">\r\n <input type=\"hidden\" id=\"orgIds\">\r\n <input type=\"hidden\" id=\"groupIds\">\r\n <input type=\"hidden\" id=\"otherSelectIds\">\r\n <input type=\"hidden\" id=\"personMobile\">\r\n </table>\r\n</form>\r\n</body>\r\n</html>");
    } catch (java.lang.Throwable t) {
      if (!(t instanceof javax.servlet.jsp.SkipPageException)){
        out = _jspx_out;
        if (out != null && out.getBufferSize() != 0)
          try {
            if (response.isCommitted()) {
              out.flush();
            } else {
              out.clearBuffer();
            }
          } catch (java.io.IOException e) {}
        if (_jspx_page_context != null) _jspx_page_context.handlePageException(t);
        else throw new ServletException(t);
      }
    } finally {
      _jspxFactory.releasePageContext(_jspx_page_context);
    }
  }
}
