/*
 * Generated by the Jasper component of Apache Tomcat
 * Version: JspC/ApacheTomcat8
 * Generated at: 2023-01-06 10:05:04 UTC
 * Note: The last modified time of this file was set to
 *       the last modified time of the source file after
 *       generation to assist with modification tracking.
 */
package org.apache.jsp.doc.doc;

import javax.servlet.*;
import javax.servlet.http.*;
import javax.servlet.jsp.*;
import com.js.doc.doc.service.SenddocumentBD;
import com.js.doc.doc.service.SendFileBD;
import com.js.oa.jsflow.service.WorkFlowBD;
import com.js.util.config.SystemCommon;
import java.util.*;

public final class receivefile_005fprint_005ftemp_jsp extends org.apache.jasper.runtime.HttpJspBase
    implements org.apache.jasper.runtime.JspSourceDependent,
                 org.apache.jasper.runtime.JspSourceImports {

  private static final javax.servlet.jsp.JspFactory _jspxFactory =
          javax.servlet.jsp.JspFactory.getDefaultFactory();

  private static java.util.Map<java.lang.String,java.lang.Long> _jspx_dependants;

  static {
    _jspx_dependants = new java.util.HashMap<java.lang.String,java.lang.Long>(6);
    _jspx_dependants.put("/WEB-INF/tag-lib/struts-nested.tld", Long.valueOf(1499751390000L));
    _jspx_dependants.put("/WEB-INF/tag-lib/struts-tiles.tld", Long.valueOf(1499751390000L));
    _jspx_dependants.put("/WEB-INF/tag-lib/struts-logic.tld", Long.valueOf(1499751390000L));
    _jspx_dependants.put("/WEB-INF/tag-lib/struts-html.tld", Long.valueOf(1499751390000L));
    _jspx_dependants.put("/WEB-INF/tag-lib/struts-template.tld", Long.valueOf(1499751390000L));
    _jspx_dependants.put("/WEB-INF/tag-lib/struts-bean.tld", Long.valueOf(1499751390000L));
  }

  private static final java.util.Set<java.lang.String> _jspx_imports_packages;

  private static final java.util.Set<java.lang.String> _jspx_imports_classes;

  static {
    _jspx_imports_packages = new java.util.HashSet<>();
    _jspx_imports_packages.add("javax.servlet");
    _jspx_imports_packages.add("java.util");
    _jspx_imports_packages.add("javax.servlet.http");
    _jspx_imports_packages.add("javax.servlet.jsp");
    _jspx_imports_classes = new java.util.HashSet<>();
    _jspx_imports_classes.add("com.js.doc.doc.service.SenddocumentBD");
    _jspx_imports_classes.add("com.js.util.config.SystemCommon");
    _jspx_imports_classes.add("com.js.doc.doc.service.SendFileBD");
    _jspx_imports_classes.add("com.js.oa.jsflow.service.WorkFlowBD");
  }

  private org.apache.jasper.runtime.TagHandlerPool _005fjspx_005ftagPool_005fhtml_005fhtml;
  private org.apache.jasper.runtime.TagHandlerPool _005fjspx_005ftagPool_005fhtml_005fform_0026_005fmethod_005faction;
  private org.apache.jasper.runtime.TagHandlerPool _005fjspx_005ftagPool_005fhtml_005fhidden_0026_005fproperty_005fnobody;
  private org.apache.jasper.runtime.TagHandlerPool _005fjspx_005ftagPool_005fhtml_005fhidden_0026_005fvalue_005fproperty_005fnobody;

  private volatile javax.el.ExpressionFactory _el_expressionfactory;
  private volatile org.apache.tomcat.InstanceManager _jsp_instancemanager;

  public java.util.Map<java.lang.String,java.lang.Long> getDependants() {
    return _jspx_dependants;
  }

  public java.util.Set<java.lang.String> getPackageImports() {
    return _jspx_imports_packages;
  }

  public java.util.Set<java.lang.String> getClassImports() {
    return _jspx_imports_classes;
  }

  public javax.el.ExpressionFactory _jsp_getExpressionFactory() {
    if (_el_expressionfactory == null) {
      synchronized (this) {
        if (_el_expressionfactory == null) {
          _el_expressionfactory = _jspxFactory.getJspApplicationContext(getServletConfig().getServletContext()).getExpressionFactory();
        }
      }
    }
    return _el_expressionfactory;
  }

  public org.apache.tomcat.InstanceManager _jsp_getInstanceManager() {
    if (_jsp_instancemanager == null) {
      synchronized (this) {
        if (_jsp_instancemanager == null) {
          _jsp_instancemanager = org.apache.jasper.runtime.InstanceManagerFactory.getInstanceManager(getServletConfig());
        }
      }
    }
    return _jsp_instancemanager;
  }

  public void _jspInit() {
    _005fjspx_005ftagPool_005fhtml_005fhtml = org.apache.jasper.runtime.TagHandlerPool.getTagHandlerPool(getServletConfig());
    _005fjspx_005ftagPool_005fhtml_005fform_0026_005fmethod_005faction = org.apache.jasper.runtime.TagHandlerPool.getTagHandlerPool(getServletConfig());
    _005fjspx_005ftagPool_005fhtml_005fhidden_0026_005fproperty_005fnobody = org.apache.jasper.runtime.TagHandlerPool.getTagHandlerPool(getServletConfig());
    _005fjspx_005ftagPool_005fhtml_005fhidden_0026_005fvalue_005fproperty_005fnobody = org.apache.jasper.runtime.TagHandlerPool.getTagHandlerPool(getServletConfig());
  }

  public void _jspDestroy() {
    _005fjspx_005ftagPool_005fhtml_005fhtml.release();
    _005fjspx_005ftagPool_005fhtml_005fform_0026_005fmethod_005faction.release();
    _005fjspx_005ftagPool_005fhtml_005fhidden_0026_005fproperty_005fnobody.release();
    _005fjspx_005ftagPool_005fhtml_005fhidden_0026_005fvalue_005fproperty_005fnobody.release();
  }

  public void _jspService(final javax.servlet.http.HttpServletRequest request, final javax.servlet.http.HttpServletResponse response)
      throws java.io.IOException, javax.servlet.ServletException {

    final java.lang.String _jspx_method = request.getMethod();
    if (!"GET".equals(_jspx_method) && !"POST".equals(_jspx_method) && !"HEAD".equals(_jspx_method) && !javax.servlet.DispatcherType.ERROR.equals(request.getDispatcherType())) {
      response.sendError(HttpServletResponse.SC_METHOD_NOT_ALLOWED, "JSPs only permit GET, POST or HEAD. Jasper also permits OPTIONS");
      return;
    }

    final javax.servlet.jsp.PageContext pageContext;
    javax.servlet.http.HttpSession session = null;
    final javax.servlet.ServletContext application;
    final javax.servlet.ServletConfig config;
    javax.servlet.jsp.JspWriter out = null;
    final java.lang.Object page = this;
    javax.servlet.jsp.JspWriter _jspx_out = null;
    javax.servlet.jsp.PageContext _jspx_page_context = null;


    try {
      response.setContentType("text/html; charset=GBK");
      pageContext = _jspxFactory.getPageContext(this, request, response,
      			null, true, 8192, true);
      _jspx_page_context = pageContext;
      application = pageContext.getServletContext();
      config = pageContext.getServletConfig();
      session = pageContext.getSession();
      out = pageContext.getOut();
      _jspx_out = out;

      out.write("\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n");


 SendFileBD  sendB=new SendFileBD();
 String docFormFontSize=SystemCommon.getDocFormFontSize();
 String orgId2=session.getAttribute("orgId")==null?"":session.getAttribute("orgId").toString();
 String workStatus ="1010000";
 String domainId = session.getAttribute("domainId")==null?"0":session.getAttribute("domainId").toString();
 String userId=session.getAttribute("userId").toString();
 String receiveStatus=request.getAttribute("receiveStatus")==null?"":request.getAttribute("receiveStatus").toString();

java.util.List officelist = new WorkFlowBD().getOffiDict(userId, domainId);

java.util.List commentList;
if(com.js.util.config.SystemCommon.getShowBackFordoc()==1){
	commentList= new com.js.oa.jsflow.service.WorkFlowBD().getDealWithCommentFordoc(request.getParameter("table"),request.getParameter("record"),request.getParameter("workType"));
}else{
	commentList= new com.js.oa.jsflow.service.WorkFlowBD().getDealWithCommentNotBackFordoc(request.getParameter("table"),request.getParameter("record"),request.getParameter("workType"));
}

String  read_tableId=request.getParameter("table");
String  read_processId=request.getParameter("processId");
String  read_recordId=request.getParameter("record");

int   read_inWorkType = ("null".equals(request.getParameter("workType")) || request.getParameter("workType")==null)?-1:Integer.parseInt(request.getParameter("workType"));//流程类型
String  read_option=request.getParameter("option")==null?"":request.getParameter("option").toString();
String  read_submitPerson=request.getParameter("submitPerson")==null?"":request.getParameter("submitPerson").toString();
String  read_submitTime=request.getParameter("submitTime")==null?"":request.getParameter("submitTime").toString();
String  read_moduleId=request.getParameter("moduleId")==null?"":request.getParameter("moduleId").toString();
String  read_activity=request.getParameter("activity")==null?"":request.getParameter("activity").toString();
String noDisplayFields=new com.js.oa.jsflow.util.NewWorkflowUtil().getNoDisplayField(request.getParameter("initActivity"),request.getParameter("work"),read_processId);

com.js.doc.doc.action.GovReceiveFileActionForm myform = (com.js.doc.doc.action.GovReceiveFileActionForm)request.getAttribute("myform") ;
com.js.oa.jsflow.util.WorkflowCommon workflowCommon = new com.js.oa.jsflow.util.WorkflowCommon();

String curModifyField =" ";//当前活动可写字段
String curCommField = request.getAttribute("curCommField").toString();//批示意见对应字段
String curProcCommField = request.getAttribute("curProcCommField")==null?"":request.getAttribute("curProcCommField").toString();//当前流程所有
String curPassRoundCommField = request.getAttribute("curPassRoundCommField").toString();//阅办意见对应字段

boolean handSignInUse = false;//是否使用了手写签名
boolean signatureInUse=false; //是否使用了电子签章
java.util.Map sysMap = com.js.system.util.SysSetupReader.getInstance().getSysSetupMap(session.getAttribute("domainId").toString());
if(sysMap != null && sysMap.get("使用手写意见") != null && "1".equals(sysMap.get("使用手写意见").toString())){
    handSignInUse = true;
}
if(sysMap != null && sysMap.get("电子签章") != null && "1".equals(sysMap.get("电子签章").toString())){
	signatureInUse = true;//电子签章
}
//电子签章div的位置
String inc_divId = java.util.Calendar.getInstance().getTimeInMillis() + "";

String  receiveFileDoComment_modify="";//  批示内容

String receiveFileLeaderComment_modify="";//  拟办意见
String receiveFileSettleLeaderComment_modify="";//  领导批示
String receiveFileSettleComment_modify="";// 督察意见
String field9_modify="";//   阅办
String receiveFileTransAuditComment_modify="";//  办理情况
String receiveFileMemo_modify="";// 备注

String displayName[]={"拟办意见","领导批示","督察意见","阅办","办理情况","备注" };
/*String modifyContent[]={"","","","","",""};
String commentName[] ={"receiveFileLeaderComment","receiveFileSettleLeaderComment","receiveFileSettleComment","field9","receiveFileTransAuditComment","receiveFileMemo"};
*/

String modifyContent[]={"","","","","",""};
String commentName[]=(String [])request.getAttribute("commentName");

String modiButton = "none";

if(request.getParameter("isEdit")!=null&&"1".equals(request.getParameter("isEdit").toString())){
  
  if(receiveStatus.equals("1")){
 modiButton=",Back,Print,Printcomm,Tosend,Saveclose";
 }else{
 
  modiButton=",Wait,Back,Print,Printcomm,Tosend,Saveclose";
 }

}else if(request.getParameter("viewOnly")!=null&&"1".equals(request.getParameter("viewOnly").toString())){
 modiButton="";

}

if(request.getParameter("processId")==null||request.getParameter("processId").toString().equals("")||request.getParameter("processId").toString().equals("null")){
 modiButton="";
}

if(workStatus.equals("-1")){
modiButton="";
}

if(workStatus.equals("2")){
modiButton="none";
//modiButton=",End,Viewtran";

}

        Map mapinfo = (Map)request.getAttribute("mapinfo");
		Object[] receiveFileType_Arr = (Object[])mapinfo.get("receiveFileType");//文件归类
		Object[] pigeonholeTypeObj = (Object[])mapinfo.get("pigeonholeType");//归档类型
		Object[] zjkyType_Arr= (Object[])mapinfo.get("decumentKind");//文种
		Object[] receiveFileSafetyGrade_Arr = (Object[])mapinfo.get("receiveSecretLevel");//秘密级别
		Object[] field4_Arr = (Object[])mapinfo.get("urgencyLevel");//紧急程度
		Object[] zjkykeepTerm_Arr = (Object[])mapinfo.get("keepTerm");//
		Object[] receiveDropDownSelect1_Arr = (Object[])mapinfo.get("receiveDropDownSelect1");//
		Object[] receiveDropDownSelect2_Arr = (Object[])mapinfo.get("receiveDropDownSelect2");//

        String  transmit=request.getAttribute("transmit")==null?"":request.getAttribute("transmit").toString();
	    String  accessoryName1=request.getAttribute("accessory1")==null?"":request.getAttribute("accessory1").toString();
	    String  accessorySaveName1=request.getAttribute("accessorySave1")==null?"":request.getAttribute("accessorySave1").toString();
        String  accessoryName2=request.getAttribute("accessory2")==null?"":request.getAttribute("accessory2").toString();
	    String  accessorySaveName2=request.getAttribute("accessorySave2")==null?"":request.getAttribute("accessorySave2").toString();
	    String sendFileId=request.getAttribute("sendFileId")==null?"":request.getAttribute("sendFileId").toString();
        String sendFileLink=request.getAttribute("sendFileLink")==null?"":request.getAttribute("sendFileLink").toString();
	    String sendFileTitle1=request.getAttribute("sendFileTitle")==null?"":request.getAttribute("sendFileTitle").toString();

		String  oseqId=request.getAttribute("seqId")==null?"":request.getAttribute("seqId").toString();

		java.util.Date serverDate = new java.util.Date() ;
        String serverY = serverDate.getYear() + 1900 +"";
        String serverM = serverDate.getMonth() + 1 +"";
        String serverD = serverDate.getDate() +"";

        java.util.Date ed = new java.util.Date() ;
        if(null!=request.getAttribute("createdDate"))
        ed = (java.util.Date)request.getAttribute("createdDate") ;
        int edy = ed.getYear() + 1900 ;
        int edm = ed.getMonth() + 1  ;
        int edd = ed.getDate() ;
        String fileServer ="";
        if(session.getAttribute("fileServer")!=null)
             fileServer=session.getAttribute("fileServer").toString();
        String isEdit = request.getParameter("isEdit")==null?"":request.getParameter("isEdit");


	   boolean canModify = true;
	   String buttonName="上传";
	   String[] realFileArray ;
	   String[] saveFileArray ;
	   Object accName;
	   Object accSName;
	   String path = "govdocumentmanager" ;
	   String tableName="";
	   String fileName = "" ;
	   String saveName = "";
	   int fileMaxSize = 0;
	   int fileMaxNum  = 20 ;
	   int fileMaxWidth = 0 ;
	   int fileMaxHeight = 0;
	   int fileMinWidth = 0;
	   int fileMinHeight = 0;
	   String fileType = "" ;

	   String  comment_variableName="";
       String  comment_variableModifyContent="";
 
      out.write("                     \r\n");

String resubmit="";
if(request.getAttribute("resubmit")!=null)
resubmit=request.getAttribute("resubmit").toString();
if(resubmit.equals("1")){//刷新父页面

      out.write("\r\n  <script language=\"javascript\">\r\n    window.opener.location.reload();\r\n     window.close();\r\n  </script>\r\n");
}
      out.write("\r\n\r\n");

String transmitSu="";
if(request.getAttribute("transmitSu")!=null){
  transmitSu=request.getAttribute("transmitSu").toString();
  if(transmitSu.equals("1")){
      out.write(" \r\n   <script>\r\n      alert(\"发送成功\");\r\n      window.close();\r\n   </script> \r\n ");
}else{
      out.write(" \r\n  <script>\r\n\t alert(\"发送失败\");\r\n     window.close();\r\n  </script>\r\n  \r\n");
}}
      out.write("\r\n\r\n");
      //  html:html
      org.apache.struts.taglib.html.HtmlTag _jspx_th_html_005fhtml_005f0 = (org.apache.struts.taglib.html.HtmlTag) _005fjspx_005ftagPool_005fhtml_005fhtml.get(org.apache.struts.taglib.html.HtmlTag.class);
      boolean _jspx_th_html_005fhtml_005f0_reused = false;
      try {
        _jspx_th_html_005fhtml_005f0.setPageContext(_jspx_page_context);
        _jspx_th_html_005fhtml_005f0.setParent(null);
        int _jspx_eval_html_005fhtml_005f0 = _jspx_th_html_005fhtml_005f0.doStartTag();
        if (_jspx_eval_html_005fhtml_005f0 != javax.servlet.jsp.tagext.Tag.SKIP_BODY) {
          do {
            out.write("\r\n<head>\r\n<title>收文</title>\r\n<meta http-equiv=\"Content-Type\" content=\"text/html; charset=gb2312\">\r\n\r\n<script  src=\"/jsoa/js/checkText.js\"  language=\"javascript\" ></script>\r\n<SCRIPT language=\"javascript\" src=\"/jsoa/js/openEndow.js\"></SCRIPT>\r\n<script  src=\"/jsoa/js/checkQuery.js\"  language=\"javascript\" ></script>\r\n\r\n<link href=\"/jsoa/skin/");
            out.print(session.getAttribute("skin"));
            out.write("/style-");
            out.print(session.getAttribute("browserVersion"));
            out.write(".css\" rel=\"stylesheet\" type=\"text/css\"/>\r\n<link rel=stylesheet type=\"text/css\" href=\"/jsoa/public/date_picker/DateObject2.css\">\r\n<SCRIPT language=javascript src=\"/jsoa/public/date_picker/DateObject.js\"></SCRIPT>\r\n<SCRIPT language=javascript src=\"/jsoa/public/date_picker/DatePicker.js\"></SCRIPT>\r\n<SCRIPT language=javascript src=\"/jsoa/public/date_picker/editlib.js\"></SCRIPT>\r\n<SCRIPT language=javascript src=\"/jsoa/public/date_picker/tree.js\"></SCRIPT>\r\n<script src=\"clsPupMenu.js\" type=\"text/javascript\"></script>\r\n");
if("1".equals(request.getParameter("resubmit"))){
            out.write("\r\n<script src=\"/jsoa/js/toolbar/standardAdd.js\" language=\"javascript\"></script>\r\n<script src=\"/jsoa/js/toolbar/govsendfileAdd.js\" language=\"javascript\"></script>\r\n<script src=\"/jsoa/js/clsPullXMenu.js\" language=\"javascript\"></script>\r\n<script src=\"/jsoa/public/jsp/cmdbutton.jsp?button=Close,Send\">\r\n</script>\r\n");
}else{
            out.write("\r\n<script src=\"/jsoa/js/toolbar/standardModi.js\" language=\"javascript\"></script>\r\n<script src=\"/jsoa/js/toolbar/govsendfileModi.js\" language=\"javascript\"></script>\r\n<script src=\"/jsoa/js/clsPullXMenu.js\" language=\"javascript\"></script>\r\n");
}
            out.write("\r\n<script>\r\nfunction openPupWin(url,w,h){\r\n    window.open(url,\"_blank\",\"width=\"+w+\",height=\"+h+\",location=no,resizable=no,status=no\");\r\n}\r\n\r\nfunction MM_openBrWindow(theURL,winName,features) { \r\n  window.open(theURL,winName,features);\r\n}\r\n</script>\r\n<script>\r\nvar noteTimer=null;\r\nfunction getNote(index){\r\n var sTop=document.getElementById(\"mainContent\").scrollTop;\r\n var noteDiv=\"noteDiv_\"+index;\r\n  var d=document.getElementById(noteDiv);\r\n  d.style.left=event.x-200;\r\n  d.style.top=event.y+sTop-30;\r\n  d.style.display=\"inline\";\r\n}\r\nfunction hiddenNote(dd){\r\n\tvar dealFunct=\"closeNote('\"+dd+\"')\";\r\n  noteTimer=window.setTimeout(dealFunct,500);\r\n}\r\nfunction closeNote(dd){\r\n\t  var noteDiv=\"noteDiv_\"+dd;\r\n  var d=document.getElementById(noteDiv);\r\n  d.style.display=\"none\";\r\n}\r\nfunction lockedNote(){\r\n  window.clearTimeout(noteTimer);\r\n}\r\nfunction setNote(obj,dd){\r\n\r\n\tdocument.getElementById(dd).value+=obj.innerText;\r\n}\r\nfunction setNoteValue(obj,dd){\r\n  document.getElementById(dd).value=obj.value;\r\n}\r\nfunction addDivContent(){\r\n");
            out.write("\r\n\tvar adddivcontent=document.all.addDivContent.value;\r\n\r\n    ");

	if(commentName!=null&&commentName.length>0){
	for(int i=0;i<commentName.length;i++){	
	
            out.write("\r\n   ");
if((workStatus.equals("0") && (curCommField.indexOf("$"+commentName[i]+"$")>=0 || curCommField.equals(commentName[i].toString())))|| (workStatus.equals("2") && (curPassRoundCommField.equals(commentName[i].toString()) || curPassRoundCommField.indexOf("$"+commentName[i]+"$") >= 0))){
            out.write("\r\n\r\n\tdocument.getElementById(\"noteDiv_");
            out.print(commentName[i].toString());
            out.write("\").innerHTML= \"\"+\"<div class='divOut' onmouseover='lockedNote();this.className=\\\"divOver\\\"' onmouseout='this.className=\\\"divOut\\\"' onclick=\\\"setNote(this,\\'");
            out.print(commentName[i]);
            out.write("\\');\\\">\"+adddivcontent+\"<\\/div>\"+document.getElementById(\"noteDiv_");
            out.print(commentName[i]);
            out.write("\").innerHTML;\r\n\t");
}
            out.write("\r\n    ");
}}
            out.write("\r\n}\r\n</script>\r\n\r\n<style type=\"text/css\">\r\n<!--\r\n#noteDiv_receiveFileLeaderComment {\r\n\tposition:absolute;\r\n\twidth:220px;\r\n\theight:126px;\r\n\tz-index:1;\r\n\toverflow:auto;\r\n\tborder:1px solid #829FBB;\r\n\tdisplay:none;\r\n}\r\n\r\n#noteDiv_receiveFileSettleLeaderComment {\r\n\tposition:absolute;\r\n\twidth:220px;\r\n\theight:126px;\r\n\tz-index:1;\r\n\toverflow:auto;\r\n\tborder:1px solid #829FBB;\r\n\tdisplay:none;\r\n}\r\n#noteDiv_receiveFileSettleComment {\r\n\tposition:absolute;\r\n\twidth:220px;\r\n\theight:126px;\r\n\tz-index:1;\r\n\toverflow:auto;\r\n\tborder:1px solid #829FBB;\r\n\tdisplay:none;\r\n}\r\n#noteDiv_field9 {\r\n\tposition:absolute;\r\n\twidth:220px;\r\n\theight:126px;\r\n\tz-index:1;\r\n\toverflow:auto;\r\n\tborder:1px solid #829FBB;\r\n\tdisplay:none;\r\n}\r\n#noteDiv_receiveFileTransAuditComment {\r\n\tposition:absolute;\r\n\twidth:220px;\r\n\theight:126px;\r\n\tz-index:1;\r\n\toverflow:auto;\r\n\tborder:1px solid #829FBB;\r\n\tdisplay:none;\r\n}\r\n#noteDiv_receiveFileMemo {\r\n\tposition:absolute;\r\n\twidth:220px;\r\n\theight:126px;\r\n\tz-index:1;\r\n\toverflow:auto;\r\n\tborder:1px solid #829FBB;\r\n\tdisplay:none;\r\n");
            out.write("}\r\n.divOver{\r\n    background-color:#003399;\r\n\tcolor:#FFFFFF;\r\n\tborder-bottom:1px dashed #cccccc;\r\n    width:100%;\r\n\theight:20px;\r\n\tline-height:20px;\r\n\tcursor:default;\r\n\tpadding-left:5px;\r\n}\r\n.divOut{\r\n    background-color:#ffffff;\r\n\tcolor:#000000;\r\n\tborder-bottom:1px dashed #cccccc;\r\n    width:100%;\r\n\theight:20px;\r\n\tline-height:20px;\r\n\tcursor:default;\r\n\tpadding-left:5px;\r\n}\r\n-->\r\n</style>\r\n\r\n<script language=\"javascript\">\r\n<!--\r\nself.moveTo(0,0);\r\nself.resizeTo(screen.availWidth,screen.availHeight);\r\n//-->\r\n//初始化页面\r\n");

/*归档*/
String close="";
if(request.getAttribute("close")!=null)
close=request.getAttribute("close").toString();
String wantPigeonhole="";/*是否要归档*/
if(request.getParameter("wantPigeonhole")!=null)
wantPigeonhole=request.getParameter("wantPigeonhole").toString();

            out.write("\r\n\r\nfunction init() {\r\n    /*归档*/\r\n    ");
if(!"".equals(wantPigeonhole)&&"true".equals(wantPigeonhole)){
            out.write("\r\n        var htmlBody=document.body.innerHTML;\r\n        document.all.field10.value=htmlBody;/*field10做为BODY的内容传递使用*/\r\n        GovReceiveFileActionForm.action = \"/jsoa/GovReceiveFileLoadAction.do?action=pigeonhole\";\r\n        GovReceiveFileActionForm.submit() ;\r\n    ");
}
            out.write("\r\n    ");
if(!"".equals(close)&&"yes".equals(close)){
            out.write("\r\n        parent.window.alert(\"操作成功！\");\r\n        parent.window.close();\r\n    ");
}
            out.write("\r\n    var done = \"");
            out.print(request.getParameter("done"));
            out.write("\" ;\r\n    if(done==\"done\") {\r\n        ");
if("1".equals(request.getParameter("back"))) {
            out.write("\r\n            hhref = \"/jsoa/FileDealWithAction.do?workStatus=0\";\r\n            opener.location.href  = hhref ;\r\n        ");
}
            out.write("\r\n        ");
if(!"yes".equals(close)){
            out.write("\r\n            window.close();\r\n        ");
}
            out.write("\r\n    }\r\n  \r\n   /*显示批示意见到指定字段中 */\r\n   ");

	if(!"0".equals(request.getParameter("workType"))){
		if(commentList!=null && commentList.size() > 0){
			com.js.system.service.usermanager.UserBD _userBD = new com.js.system.service.usermanager.UserBD();
			String[] str3 = null;
			String commentStr = "";
			String dbrInfo;
			for(int i = 0; i < commentList.size(); i ++){
				str3 = (String[]) commentList.get(i);
				if(noDisplayFields.indexOf("$"+str3[8]+"$")>=0){
					continue;
				}
				boolean sx = false;
				try{
					Long.parseLong(str3[3]);
					sx = true;
				}catch(Exception e){}
				
				//设置时间格式
				if(str3[4].indexOf(".")>0){
					str3[4]=str3[4].substring(0,str3[4].indexOf("."));
				}
				if(str3[4].indexOf(":")>0){
					str3[4]=str3[4].substring(0,str3[4].lastIndexOf(":"));
				}
				//用户是否有图片签名
				String userShowHTML=_userBD.getSignature(str3[12]);
				if("".equals(userShowHTML)){
					userShowHTML=str3[2];
				}else{
					if(userShowHTML!=null && userShowHTML.length()>6 && userShowHTML.substring(4,5).equals("_")){
						userShowHTML="<IMG SRC='/jsoa/upload/"+userShowHTML.substring(0,4)+"/peopleinfo/"+userShowHTML+"'>";
					}else{
						userShowHTML="<IMG SRC='/jsoa/upload/0000/peopleinfo/"+userShowHTML+"'>";
					}
				}
				//代办人信息
				if("1".equals(SystemCommon.getDocShowDbrName()) && str3[6] != null && !str3[6].toString().equals("")){
					dbrInfo="("+str3[6]+"代办)";
				}else{
					dbrInfo="";
				} 		
			
				if(sx && str3.length>=9){
				//使用手写签名
					if(str3[8]!=null && !"-1".equals(str3[8]) && str3[8].trim().length()>0 && !str3[8].trim().toUpperCase().equals("NULL")){
            out.write("\r\n\t\t\t\t\t\tif(document.all.");
            out.print(str3[8]+"_tr");
            out.write("){\r\n\t\t\t\t\t\t\t");
if(commentStr.indexOf(str3[8])<0){
            out.write("\r\n\t\t\t\t\t\t\t\t/*if(document.all.");
            out.print(str3[8]+"_tr");
            out.write(".innerHTML.indexOf('name=')<0){\r\n\t\t\t\t\t\t\t\t\tdocument.all.");
            out.print(str3[8]+"_tr");
            out.write(".innerHTML = \"\";\r\n\t\t\t\t\t\t\t\t}*/\r\n\t\t\t\t\t\t\t");

							}
							commentStr+=str3[8];
							
            out.write("\r\n\t\t\t\t\t\t\tdocument.all.");
            out.print(str3[8]+"_tr");
            out.write(".innerHTML += \"<div><div><OBJECT name=\\\"incSig");
            out.print(i);
            out.write("\\\" classid=\\\"clsid:2294689C-9EDF-40BC-86AE-0438112CA439\\\" codebase=\\\"/jsoa/iWebRevision.jsp/iWebRevision.cab#version=6,0,0,0\\\" width=\\\"100%\\\" height=\\\"200\\\">\"\r\n                                        \t\t\t+\"<param name=\\\"weburl\\\" value=\\\"http://");
            out.print(request.getServerName());
            out.write(':');
            out.print(request.getServerPort());
            out.write("/jsoa/iWebRevision.jsp/iWebServer.jsp\\\">\"\r\n                                        \t\t\t+\"<param name=\\\"recordid\\\" value=\\\"");
            out.print(str3[3]);
            out.write("\\\">\"\r\n                                        \t\t\t+\"<param name=\\\"fieldname\\\" value=\\\"SendOut\\\">\"\r\n                                        \t\t\t+\"<param name=\\\"username\\\" value=\\\"\\\">\"\r\n                                        \t\t\t+\"<param name=\\\"Enabled\\\" value=\\\"0\\\">\"\r\n                                        \t\t\t+\"<param name=\\\"PenColor\\\" value=\\\"00000000\\\">\"\r\n                                        \t\t\t+\"<param name=\\\"BorderStyle\\\" value=\\\"0\\\">\"\r\n                                    \t\t\t\t+\"</OBJECT></div>\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t+\"<div style=\\\"text-align:right;\\\">");
            out.print(userShowHTML);
            out.write("&nbsp;");
            out.print(str3[4]);
            out.print(dbrInfo);
            out.write("&nbsp;</div>\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t+\"</div>\";\r\n                                                        //alert(document.all.");
            out.print(str3[8]+"_tr");
            out.write(".innerHTML);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\teval(\"document.all.incSig");
            out.print(i);
            out.write(".LoadSignature()\");\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t");
 if((workStatus.equals("0") && (curCommField.indexOf("$"+str3[8]+"$")>=0 || curCommField.equals(""+str3[8])))|| (workStatus.equals("2") && (curPassRoundCommField.equals(""+str3[8]) || curPassRoundCommField.indexOf("$"+str3[8]+"$") >= 0))){
            out.write("\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t //eval(\"");
            out.print(str3[8]);
            out.write("_changeSignature()\");\t\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t");
}
            out.write("\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t");
}
				}else{ 
				//普通意见
				if(str3[8]!=null && !"-1".equals(str3[8]) && str3[8].trim().length()>0 && !str3[8].trim().toUpperCase().equals("NULL")){
				
            out.write("\r\n\t\t\t\tvar comm_comment=\"");
            out.print(str3[3]);
            out.write("\";\r\n\t\t\t\tif(comm_comment==\"\"){\r\n\t\t\t\t\tcomm_comment=\"</br>\";\r\n\t\t\t\t}\r\n\t\t\t\tif(comm_comment==\"null\"){\r\n\t\t\t\t\tcomm_comment=\"\";\r\n\t\t\t\t}\r\n\t\t\t\t");

 				String projectType = session.getServletContext().getInitParameter("projectType");
					String brHtml = "";
 				if(projectType!=null&&"tjgzw".equals(projectType)){//是天津国资委项目 批示意见 格式为 "部门姓名 <换行>日期时间"
 					brHtml = "</br>";
 				}
				
            out.write("\t\r\n\t\t\t\tdocument.all.");
            out.print(str3[8]+"_tr");
            out.write(".innerHTML +=\"<div><div style='font-size:");
            out.print(com.js.util.config.SystemCommon.getDocCommentFontSize());
            out.write(";'>\"+comm_comment+\"</div>\"\r\n\t\t\t\t                                          +\"<div style=\\\"text-align:right;font-size:");
            out.print(com.js.util.config.SystemCommon.getDocCommentFontSize());
            out.write(";\\\">");
            out.print(userShowHTML);
            out.write("&nbsp;");
            out.print(brHtml+str3[4]);
            out.print(dbrInfo);
            out.write("&nbsp;</div>\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t  +\"</div>\";\t\t\t\t\r\n\t\t\t\t");
}} //end of 普通意见
            out.write("\t\t\t\t\r\n\t\t\t\t");
}
            out.write("\r\n\t\t\t");
}}
            out.write("\r\n    /*显示批示意见到指定字段中 */\r\n   window.print();\r\n}\r\n\r\n\r\n</script>\r\n");
if(signatureInUse){
            out.write("\r\n<OBJECT id=\"SignatureControl\" classid=\"clsid:D85C89BE-263C-472D-9B6B-5264CD85B36E\" codebase=\"/jsoa/iSignatureHTML.jsp/iSignatureHTML.cab#version=5,0,2,18\" width=\"0\" height=\"0\" VIEWASTEXT>\r\n<param name=\"ServiceUrl\" value=\"http://");
            out.print(request.getServerName());
            out.write(':');
            out.print(request.getServerPort());
            out.write("/jsoa/iSignatureHTML.jsp/Service.jsp\"><!--读去数据库相关信息-->\r\n<param name=\"WebAutoSign\" value=\"0\">             <!--是否自动数字签名(0:不启用，1:启用)-->\r\n<!--param name=\"Weburl\"  value=\"\">        <签章服务器响应-->\r\n</OBJECT>\r\n");
}
            out.write("\r\n</head>\r\n\r\n<body leftmargin=\"0\" topmargin=\"0\"  onload=\"init();\"  class=\"MainFrameBox Pupwin\" >\r\n");

boolean banli=(request.getParameter("option")!=null&&"banli".equals(request.getParameter("option")))?true:false;
if(banli){

            out.write("\r\n<script src=\"/jsoa/js/js.js\" language=\"javascript\"></script>\r\n<script language=\"javascript\">\r\nresizeWin(700,600);\r\n</script>\r\n");

}

            out.write('\r');
            out.write('\n');
String weburl="http://"+request.getServerName()+":"+request.getServerPort()+ "/jsoa/iWebSignature.jsp/iWebServer.jsp";
            out.write("\r\n\r\n ");
            //  html:form
            org.apache.struts.taglib.html.FormTag _jspx_th_html_005fform_005f0 = (org.apache.struts.taglib.html.FormTag) _005fjspx_005ftagPool_005fhtml_005fform_0026_005fmethod_005faction.get(org.apache.struts.taglib.html.FormTag.class);
            boolean _jspx_th_html_005fform_005f0_reused = false;
            try {
              _jspx_th_html_005fform_005f0.setPageContext(_jspx_page_context);
              _jspx_th_html_005fform_005f0.setParent((javax.servlet.jsp.tagext.Tag) _jspx_th_html_005fhtml_005f0);
              // /doc/doc/receivefile_print_temp.jsp(528,1) name = action type = null reqTime = true required = true fragment = false deferredValue = false expectedTypeName = null deferredMethod = false methodSignature = null
              _jspx_th_html_005fform_005f0.setAction("/GovReceiveFileAction.do?action=add");
              // /doc/doc/receivefile_print_temp.jsp(528,1) name = method type = null reqTime = true required = false fragment = false deferredValue = false expectedTypeName = null deferredMethod = false methodSignature = null
              _jspx_th_html_005fform_005f0.setMethod("post");
              int _jspx_eval_html_005fform_005f0 = _jspx_th_html_005fform_005f0.doStartTag();
              if (_jspx_eval_html_005fform_005f0 != javax.servlet.jsp.tagext.Tag.SKIP_BODY) {
                do {
                  out.write("\r\n    <govHiddenField>\r\n\t<input type=\"hidden\" name=\"processType\" value=\"\">\r\n\t<input type=\"hidden\" name=\"editId\" value=\"");
                  out.print(request.getParameter("record"));
                  out.write("\">\r\n\t");
                  if (_jspx_meth_html_005fhidden_005f0(_jspx_th_html_005fform_005f0, _jspx_page_context))
                    return;
                  out.write("\r\n\t<input type=\"hidden\" name=\"oldTitle\" >\r\n\t<input type=\"hidden\" name=\"isTitleChange\" value=\"0\">\r\n\t<input type=\"hidden\" name=\"done\"/>\r\n\t<!--存放办理人和办理时间-->\r\n\t<input type=\"hidden\" name=\"noPostilUser\"  value=\"none\">\r\n\t<input type=\"hidden\" name=\"noPostilDate\" >\r\n\t<input type=\"hidden\" name=\"noPostilHour\" >\r\n\t<input type=\"hidden\" name=\"noPostilMin\" >\r\n\t<!--存放办理方式-->\r\n\t<input type=\"hidden\" name=\"commentType\"  value=\"");
                  out.print(""+request.getAttribute("commentType"));
                  out.write("\" >\r\n\t<input type=\"hidden\" name=\"createdDate1\">\r\n\t<input type=\"hidden\" name=\"fromReceiveFileLink\" value=\"/jsoa/GovReceiveFileLoadAction.do?");
                  out.print(request.getQueryString());
                  out.write("\">\r\n\t<input type=\"hidden\" name=\"sendFileId\"  value=\"");
                  out.print(sendFileId);
                  out.write("\">\r\n\t<input type=\"hidden\" name=\"sendFileLink\"  value=\"");
                  out.print(sendFileLink);
                  out.write("\">\r\n\t<input type=\"hidden\" name=\"sendFileTitle\"  value=\"");
                  out.print(sendFileTitle1);
                  out.write("\">\r\n\t<input type=\"hidden\" name=\"receiveAccType\" value=\"1\"> \r\n\t<input type=\"hidden\" name=\"candidate\">\r\n\t<input type=\"hidden\" name=\"candidateId\">\r\n\t<input type=\"hidden\" name=\"addDivContent\" value=\"\">\r\n\t<input type=\"hidden\" name=\"whichBatch\" value=\"\"><!--记录哪个是批示意见-->\r\n\t<input type=\"hidden\" name=\"isInModify\" value=\"\">\r\n\t<input type=\"hidden\" name=\"isChangeSeq\" value=\"\">\r\n\t");
if(request.getParameter("resubmit")!=null&&request.getParameter("resubmit").toString().equals("1")&&request.getParameter("work") != null){
                  out.write("\r\n\t<input type=\"hidden\" name=\"resubmitWorkId\" value=\"");
                  out.print(request.getParameter("work").toString());
                  out.write("\">\r\n\t");
}
                  out.write('\r');
                  out.write('\n');
                  out.write('	');
                  if (_jspx_meth_html_005fhidden_005f1(_jspx_th_html_005fform_005f0, _jspx_page_context))
                    return;
                  out.write('\r');
                  out.write('\n');
                  out.write('	');
                  if (_jspx_meth_html_005fhidden_005f2(_jspx_th_html_005fform_005f0, _jspx_page_context))
                    return;
                  out.write('\r');
                  out.write('\n');
                  out.write('	');
                  if (_jspx_meth_html_005fhidden_005f3(_jspx_th_html_005fform_005f0, _jspx_page_context))
                    return;
                  out.write('\r');
                  out.write('\n');
                  out.write('	');
                  if (_jspx_meth_html_005fhidden_005f4(_jspx_th_html_005fform_005f0, _jspx_page_context))
                    return;
                  out.write("\r\n\t<input type=\"hidden\" name=\"seqId\" value=\"");
                  out.print(oseqId);
                  out.write("\">\r\n\t<input type=\"hidden\" name=\"receiveFileSendFileUnitId\" >\r\n\r\n<table width=\"100%\" height=\"100%\" border=\"0\" cellpadding=\"0\" cellspacing=\"0\">\r\n\r\n  <tr>\r\n  <td valign=\"top\" style=\"padidng:1px;padding-top:0px;\">\r\n<div id=\"mainContent\" >\r\n\r\n\r\n<table width=\"100%\" border=\"0\" cellpadding=\"10\" cellspacing=\"0\" class=\"docBoxNo\">\r\n<!-- <tr id=\"printTr\"  bgcolor=\"#FFFFFF\">\r\n\t<td height=\"27\" >\r\n\t <input type=\"button\" id=\"printBt\" value=\"打印\" onclick=\"doPrintDoc()\">\r\n\t</td>\r\n  </tr> -->\r\n    <tr><td height=\"312\" valign=\"top\"> \r\n\t <div id=\"docinfo0\" >\r\n           \r\n\t\t<table width=\"95%\" border=\"0\" align=\"center\" cellpadding=\"1\" cellspacing=\"1\">\r\n\t\t");
if("1".equals(SystemCommon.getShowDocumentProcessTitle())){ 
                  out.write("\r\n                    <tr ");
                  out.print(banli?"style='display:none'":"");
                  out.write(">\r\n                      <td width=\"100%\" align=\"center\" class=big0><font color=\"#000000\" style=\"font-size:30\"><b>");
                  out.print(request.getParameter("processName")==null?"":request.getParameter("processName"));
                  out.write("</b></font></td>\r\n                    </tr>\r\n        ");
} 
                  out.write("\r\n                    <tr>\r\n                      <td align=\"left\"  valign=\"top\"><div align=\"left\"><font color=\"#0000FF\">&nbsp;\r\n                          </font>\t\t\t\t\t    \r\n                           ");
//文件送审签转收文
                            if(request.getAttribute("fromFileSendCheckLink")!= null&&!request.getAttribute("fromFileSendCheckLink").equals("")&&!request.getAttribute("fromFileSendCheckLink").toString().equals("null")){
                  out.write("\r\n                                <input type=\"hidden\" name=\"fromFileSendCheckId\" value=\"");
                  out.print(request.getAttribute("fromFileSendCheckId"));
                  out.write("\">\r\n                                <input type=\"hidden\" name=\"fromFileSendCheckLink\" value=\"");
                  out.print(request.getAttribute("fromFileSendCheckLink"));
                  out.write("\">\r\n                                <tr>\r\n                                    <td height=\"28\">\r\n                                        <span style=\"cursor:pointer;color:blue\" onClick=\"window.open('");
                  out.print(request.getAttribute("fromFileSendCheckLink"));
                  out.write("','','TOP=0,LEFT=0,scrollbars=yes,resizable=yes,width=800,height=580');\" >查询相关文件送审签</span>\r\n                                    </td>\r\n                                </tr>\r\n                            ");
}
                  out.write("\r\n\t\t\t\t\t\t\t");
if(request.getAttribute("exchangeFileLink") != null){
                  out.write("\r\n                          \t    <input type=\"hidden\" name=\"exchangeFileId\" value=\"");
                  out.print(request.getAttribute("exchangeFileId"));
                  out.write("\">\r\n                                <input type=\"hidden\" name=\"exchangeFileLink\" value=\"");
                  out.print(request.getAttribute("exchangeFileLink"));
                  out.write("\">\r\n                                <input type=\"hidden\" name=\"exchangeFileTitle\" value=\"");
                  out.print(request.getAttribute("exchangeFileTitle"));
                  out.write("\">\r\n                          \t    <tr>\r\n                                    <td width=\"13%\" height=\"25\">链接：<span style=\"cursor:pointer;color:blue\" onClick=\"window.open('");
                  out.print(request.getAttribute("exchangeFileLink"));
                  out.write("&fromExchangeFile=1','','TOP=0,LEFT=0,scrollbars=yes,resizable=yes,width=800,height=580');\">");
                  out.print(request.getAttribute("exchangeFileTitle"));
                  out.write("</span></td>\r\n                            \t</tr>\r\n                          ");
}
                  out.write("\r\n\r\n\t\t\t\t\t     <tr><td>\r\n\t\t\t\t\t         <govContent>\r\n\t\t\t\t\t     </td></tr>\r\n\t\t\t\t\t\t ");

						 if(com.js.util.config.SystemCommon.getShowBackFordoc()==1){
						 String backComment=new com.js.oa.jsflow.service.WorkFlowButtonBD().getBackComment(read_processId,read_tableId,read_recordId)==null?"":new com.js.oa.jsflow.service.WorkFlowButtonBD().getBackComment(read_processId,read_tableId,read_recordId);
				        if(backComment!=null&&!backComment.equals("")&&!backComment.equals("null")){
                  out.write("\r\n\t\t\t\t\t\t<tr><td><font color=\"#FF0000\">退回意见：</font > ");
out.print(backComment);
                  out.write("</td></tr>\r\n\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t<td height=\"28\" ><hr color=\"#FF0000\" size=\"1\"></td>\r\n\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t");
 }
						}
                  out.write("\r\n\t\t\t\t\t\r\n\t\t\t\t\t\t</div></td>\r\n                        </tr>\r\n\r\n                       </table>\r\n                          <font color=\"#0000FF\">&nbsp; </font> \r\n\r\n            </div>\r\n\t\t\t</td></tr>\r\n</table><br>\r\n</div>\r\n</td>\r\n</tr>\r\n</table>\r\n\r\n");
                  int evalDoAfterBody = _jspx_th_html_005fform_005f0.doAfterBody();
                  if (evalDoAfterBody != javax.servlet.jsp.tagext.BodyTag.EVAL_BODY_AGAIN)
                    break;
                } while (true);
              }
              if (_jspx_th_html_005fform_005f0.doEndTag() == javax.servlet.jsp.tagext.Tag.SKIP_PAGE) {
                return;
              }
              _005fjspx_005ftagPool_005fhtml_005fform_0026_005fmethod_005faction.reuse(_jspx_th_html_005fform_005f0);
              _jspx_th_html_005fform_005f0_reused = true;
            } finally {
              org.apache.jasper.runtime.JspRuntimeLibrary.releaseTag(_jspx_th_html_005fform_005f0, _jsp_getInstanceManager(), _jspx_th_html_005fform_005f0_reused);
            }
            out.write("\r\n<SCRIPT LANGUAGE=\"JavaScript\">\r\n<!--\r\n\r\n  \r\n\t\r\n\t//window.close();\r\n//电子签章\r\nvar wnd;\r\n//作用：进行甲方签章\r\nfunction include_signature() {\r\n\tif( wnd != undefined ){\r\n\t\tvar results = wnd.split(\";\");\r\n\t\tdocument.all.SignatureControl.CharSetName = results[0];\t\t//多语言集\r\n\t\tdocument.all.SignatureControl.WebAutoSign = results[1];\t\t//自动数字签名\r\n\t\tdocument.all.SignatureControl.WebCancelOrder = results[2];\t\t//撤消顺序\r\n\t\tdocument.all.SignatureControl.PassWord = results[3];\t\t\t//签章密码\r\n\t\tvar tmp = document.all.SignatureControl.WebSetFontOther((results[4]==\"1\"?true:false),results[5],results[6],results[7],results[8],results[9],(results[10]==\"1\"?true:false));\t\t\t\t//设置签章附加文字格式\r\n\t\tdocument.all.SignatureControl.WebIsProtect=results[11];\t\t//保护表单数据， 0不保护  1保护表单数据，可操作  2保存表单数据，并不能操作  默认值1\r\n    }else{\r\n\t\tdocument.all.SignatureControl.WebIsProtect=1;\t\t\t    //保护表单数据， 0不保护  1保护表单数据，可操作  2保存表单数据，并不能操作  默认值1\r\n\t}\r\n\tdocument.all.SignatureControl.FieldsList=\"test\"       //所保护字段\r\n\tdocument.all.SignatureControl.DivId=\"signPosi_");
            out.print(inc_divId+"0000");
            out.write("\";                     //签章所在的层\r\n\tdocument.all.SignatureControl.Position(100,0);                     //签章位置\r\n\tdocument.all.SignatureControl.SaveHistory=\"False\";                    //是否自动保存历史记录,true保存  false不保存  默认值false\r\n\tdocument.all.SignatureControl.UserName=\"lyj\";                         //文件版签章用户\r\n\tdocument.all.SignatureControl.WebCancelOrder=1;\t\t\t    //签章撤消原则设置, 0无顺序 1先进后出  2先进先出  默认值0\r\n\tdocument.all.SignatureControl.RunSignature();                          //执行签章操作\r\n}\r\n\r\n//作用：进行手写签名\r\nfunction include_signature2() {\r\n\tdocument.all.SignatureControl.FieldsList=\"\"       //所保护字段\r\n\tif( wnd != undefined ){\r\n\t\tvar results = wnd.split(\";\");\r\n\t\tdocument.all.SignatureControl.CharSetName = results[0];\t\t//多语言集\r\n\t\tdocument.all.SignatureControl.WebAutoSign = results[1];\t\t//自动数字签名\r\n\t\tdocument.all.SignatureControl.WebCancelOrder = results[2];\t\t//撤消顺序\r\n\t\tdocument.all.SignatureControl.PassWord = results[3];\t\t\t//签章密码\r\n\t\tdocument.all.SignatureControl.WebIsProtect=results[11];\t\t//保护表单数据， 0不保护  1保护表单数据，可操作  2保存表单数据，并不能操作  默认值1\r\n");
            out.write("\t}else {\r\n        document.all.SignatureControl.WebCancelOrder=0;\t\t\t            //签章撤消原则设置, 0无顺序 1先进后出  2先进先出  默认值0\r\n\t\tdocument.all.SignatureControl.WebIsProtect=1;\t\t\t    //保护表单数据， 0不保护  1保护表单数据，可操作  2保存表单数据，并不能操作  默认值1\r\n\t}\r\n\tdocument.all.SignatureControl.FieldsList=\"test\"       //所保护字段\r\n\tdocument.all.SignatureControl.DivId=\"signPosi_");
            out.print(inc_divId+"0000");
            out.write("\";                   //签章所在的层\r\n\tdocument.all.SignatureControl.Position(0,0);                       //手写签名位置\r\n\t\r\n\t//document.all.SignatureControl.SaveHistory=\"false\";                   //是否自动保存历史记录,true保存  false不保存  默认值false\r\n\tdocument.all.SignatureControl.RunHandWrite();                          //执行手写签名\r\n}\r\n");
if(signatureInUse){
            out.write("\r\n\tdocument.all.SignatureControl.ShowSignature('");
            out.print(request.getParameter("table"));
            out.write('-');
            out.print(request.getParameter("record"));
            out.write("');\r\n");
}
            out.write("\r\n\r\n\r\n\r\n//-->\r\n</SCRIPT>\r\n");
            int evalDoAfterBody = _jspx_th_html_005fhtml_005f0.doAfterBody();
            if (evalDoAfterBody != javax.servlet.jsp.tagext.BodyTag.EVAL_BODY_AGAIN)
              break;
          } while (true);
        }
        if (_jspx_th_html_005fhtml_005f0.doEndTag() == javax.servlet.jsp.tagext.Tag.SKIP_PAGE) {
          return;
        }
        _005fjspx_005ftagPool_005fhtml_005fhtml.reuse(_jspx_th_html_005fhtml_005f0);
        _jspx_th_html_005fhtml_005f0_reused = true;
      } finally {
        org.apache.jasper.runtime.JspRuntimeLibrary.releaseTag(_jspx_th_html_005fhtml_005f0, _jsp_getInstanceManager(), _jspx_th_html_005fhtml_005f0_reused);
      }
      out.write('\r');
      out.write('\n');
    } catch (java.lang.Throwable t) {
      if (!(t instanceof javax.servlet.jsp.SkipPageException)){
        out = _jspx_out;
        if (out != null && out.getBufferSize() != 0)
          try {
            if (response.isCommitted()) {
              out.flush();
            } else {
              out.clearBuffer();
            }
          } catch (java.io.IOException e) {}
        if (_jspx_page_context != null) _jspx_page_context.handlePageException(t);
        else throw new ServletException(t);
      }
    } finally {
      _jspxFactory.releasePageContext(_jspx_page_context);
    }
  }

  private boolean _jspx_meth_html_005fhidden_005f0(javax.servlet.jsp.tagext.JspTag _jspx_th_html_005fform_005f0, javax.servlet.jsp.PageContext _jspx_page_context)
          throws java.lang.Throwable {
    javax.servlet.jsp.PageContext pageContext = _jspx_page_context;
    javax.servlet.jsp.JspWriter out = _jspx_page_context.getOut();
    //  html:hidden
    org.apache.struts.taglib.html.HiddenTag _jspx_th_html_005fhidden_005f0 = (org.apache.struts.taglib.html.HiddenTag) _005fjspx_005ftagPool_005fhtml_005fhidden_0026_005fproperty_005fnobody.get(org.apache.struts.taglib.html.HiddenTag.class);
    boolean _jspx_th_html_005fhidden_005f0_reused = false;
    try {
      _jspx_th_html_005fhidden_005f0.setPageContext(_jspx_page_context);
      _jspx_th_html_005fhidden_005f0.setParent((javax.servlet.jsp.tagext.Tag) _jspx_th_html_005fform_005f0);
      // /doc/doc/receivefile_print_temp.jsp(532,1) name = property type = null reqTime = true required = true fragment = false deferredValue = false expectedTypeName = null deferredMethod = false methodSignature = null
      _jspx_th_html_005fhidden_005f0.setProperty("receiveFileLink");
      int _jspx_eval_html_005fhidden_005f0 = _jspx_th_html_005fhidden_005f0.doStartTag();
      if (_jspx_th_html_005fhidden_005f0.doEndTag() == javax.servlet.jsp.tagext.Tag.SKIP_PAGE) {
        return true;
      }
      _005fjspx_005ftagPool_005fhtml_005fhidden_0026_005fproperty_005fnobody.reuse(_jspx_th_html_005fhidden_005f0);
      _jspx_th_html_005fhidden_005f0_reused = true;
    } finally {
      org.apache.jasper.runtime.JspRuntimeLibrary.releaseTag(_jspx_th_html_005fhidden_005f0, _jsp_getInstanceManager(), _jspx_th_html_005fhidden_005f0_reused);
    }
    return false;
  }

  private boolean _jspx_meth_html_005fhidden_005f1(javax.servlet.jsp.tagext.JspTag _jspx_th_html_005fform_005f0, javax.servlet.jsp.PageContext _jspx_page_context)
          throws java.lang.Throwable {
    javax.servlet.jsp.PageContext pageContext = _jspx_page_context;
    javax.servlet.jsp.JspWriter out = _jspx_page_context.getOut();
    //  html:hidden
    org.apache.struts.taglib.html.HiddenTag _jspx_th_html_005fhidden_005f1 = (org.apache.struts.taglib.html.HiddenTag) _005fjspx_005ftagPool_005fhtml_005fhidden_0026_005fvalue_005fproperty_005fnobody.get(org.apache.struts.taglib.html.HiddenTag.class);
    boolean _jspx_th_html_005fhidden_005f1_reused = false;
    try {
      _jspx_th_html_005fhidden_005f1.setPageContext(_jspx_page_context);
      _jspx_th_html_005fhidden_005f1.setParent((javax.servlet.jsp.tagext.Tag) _jspx_th_html_005fform_005f0);
      // /doc/doc/receivefile_print_temp.jsp(558,1) name = property type = null reqTime = true required = true fragment = false deferredValue = false expectedTypeName = null deferredMethod = false methodSignature = null
      _jspx_th_html_005fhidden_005f1.setProperty("field1");
      // /doc/doc/receivefile_print_temp.jsp(558,1) name = value type = null reqTime = true required = false fragment = false deferredValue = false expectedTypeName = null deferredMethod = false methodSignature = null
      _jspx_th_html_005fhidden_005f1.setValue("-1");
      int _jspx_eval_html_005fhidden_005f1 = _jspx_th_html_005fhidden_005f1.doStartTag();
      if (_jspx_th_html_005fhidden_005f1.doEndTag() == javax.servlet.jsp.tagext.Tag.SKIP_PAGE) {
        return true;
      }
      _005fjspx_005ftagPool_005fhtml_005fhidden_0026_005fvalue_005fproperty_005fnobody.reuse(_jspx_th_html_005fhidden_005f1);
      _jspx_th_html_005fhidden_005f1_reused = true;
    } finally {
      org.apache.jasper.runtime.JspRuntimeLibrary.releaseTag(_jspx_th_html_005fhidden_005f1, _jsp_getInstanceManager(), _jspx_th_html_005fhidden_005f1_reused);
    }
    return false;
  }

  private boolean _jspx_meth_html_005fhidden_005f2(javax.servlet.jsp.tagext.JspTag _jspx_th_html_005fform_005f0, javax.servlet.jsp.PageContext _jspx_page_context)
          throws java.lang.Throwable {
    javax.servlet.jsp.PageContext pageContext = _jspx_page_context;
    javax.servlet.jsp.JspWriter out = _jspx_page_context.getOut();
    //  html:hidden
    org.apache.struts.taglib.html.HiddenTag _jspx_th_html_005fhidden_005f2 = (org.apache.struts.taglib.html.HiddenTag) _005fjspx_005ftagPool_005fhtml_005fhidden_0026_005fvalue_005fproperty_005fnobody.get(org.apache.struts.taglib.html.HiddenTag.class);
    boolean _jspx_th_html_005fhidden_005f2_reused = false;
    try {
      _jspx_th_html_005fhidden_005f2.setPageContext(_jspx_page_context);
      _jspx_th_html_005fhidden_005f2.setParent((javax.servlet.jsp.tagext.Tag) _jspx_th_html_005fform_005f0);
      // /doc/doc/receivefile_print_temp.jsp(559,1) name = property type = null reqTime = true required = true fragment = false deferredValue = false expectedTypeName = null deferredMethod = false methodSignature = null
      _jspx_th_html_005fhidden_005f2.setProperty("field2");
      // /doc/doc/receivefile_print_temp.jsp(559,1) name = value type = null reqTime = true required = false fragment = false deferredValue = false expectedTypeName = null deferredMethod = false methodSignature = null
      _jspx_th_html_005fhidden_005f2.setValue("1");
      int _jspx_eval_html_005fhidden_005f2 = _jspx_th_html_005fhidden_005f2.doStartTag();
      if (_jspx_th_html_005fhidden_005f2.doEndTag() == javax.servlet.jsp.tagext.Tag.SKIP_PAGE) {
        return true;
      }
      _005fjspx_005ftagPool_005fhtml_005fhidden_0026_005fvalue_005fproperty_005fnobody.reuse(_jspx_th_html_005fhidden_005f2);
      _jspx_th_html_005fhidden_005f2_reused = true;
    } finally {
      org.apache.jasper.runtime.JspRuntimeLibrary.releaseTag(_jspx_th_html_005fhidden_005f2, _jsp_getInstanceManager(), _jspx_th_html_005fhidden_005f2_reused);
    }
    return false;
  }

  private boolean _jspx_meth_html_005fhidden_005f3(javax.servlet.jsp.tagext.JspTag _jspx_th_html_005fform_005f0, javax.servlet.jsp.PageContext _jspx_page_context)
          throws java.lang.Throwable {
    javax.servlet.jsp.PageContext pageContext = _jspx_page_context;
    javax.servlet.jsp.JspWriter out = _jspx_page_context.getOut();
    //  html:hidden
    org.apache.struts.taglib.html.HiddenTag _jspx_th_html_005fhidden_005f3 = (org.apache.struts.taglib.html.HiddenTag) _005fjspx_005ftagPool_005fhtml_005fhidden_0026_005fproperty_005fnobody.get(org.apache.struts.taglib.html.HiddenTag.class);
    boolean _jspx_th_html_005fhidden_005f3_reused = false;
    try {
      _jspx_th_html_005fhidden_005f3.setPageContext(_jspx_page_context);
      _jspx_th_html_005fhidden_005f3.setParent((javax.servlet.jsp.tagext.Tag) _jspx_th_html_005fform_005f0);
      // /doc/doc/receivefile_print_temp.jsp(560,1) name = property type = null reqTime = true required = true fragment = false deferredValue = false expectedTypeName = null deferredMethod = false methodSignature = null
      _jspx_th_html_005fhidden_005f3.setProperty("field3");
      int _jspx_eval_html_005fhidden_005f3 = _jspx_th_html_005fhidden_005f3.doStartTag();
      if (_jspx_th_html_005fhidden_005f3.doEndTag() == javax.servlet.jsp.tagext.Tag.SKIP_PAGE) {
        return true;
      }
      _005fjspx_005ftagPool_005fhtml_005fhidden_0026_005fproperty_005fnobody.reuse(_jspx_th_html_005fhidden_005f3);
      _jspx_th_html_005fhidden_005f3_reused = true;
    } finally {
      org.apache.jasper.runtime.JspRuntimeLibrary.releaseTag(_jspx_th_html_005fhidden_005f3, _jsp_getInstanceManager(), _jspx_th_html_005fhidden_005f3_reused);
    }
    return false;
  }

  private boolean _jspx_meth_html_005fhidden_005f4(javax.servlet.jsp.tagext.JspTag _jspx_th_html_005fform_005f0, javax.servlet.jsp.PageContext _jspx_page_context)
          throws java.lang.Throwable {
    javax.servlet.jsp.PageContext pageContext = _jspx_page_context;
    javax.servlet.jsp.JspWriter out = _jspx_page_context.getOut();
    //  html:hidden
    org.apache.struts.taglib.html.HiddenTag _jspx_th_html_005fhidden_005f4 = (org.apache.struts.taglib.html.HiddenTag) _005fjspx_005ftagPool_005fhtml_005fhidden_0026_005fproperty_005fnobody.get(org.apache.struts.taglib.html.HiddenTag.class);
    boolean _jspx_th_html_005fhidden_005f4_reused = false;
    try {
      _jspx_th_html_005fhidden_005f4.setPageContext(_jspx_page_context);
      _jspx_th_html_005fhidden_005f4.setParent((javax.servlet.jsp.tagext.Tag) _jspx_th_html_005fform_005f0);
      // /doc/doc/receivefile_print_temp.jsp(561,1) name = property type = null reqTime = true required = true fragment = false deferredValue = false expectedTypeName = null deferredMethod = false methodSignature = null
      _jspx_th_html_005fhidden_005f4.setProperty("receiveFileFileNoCount");
      int _jspx_eval_html_005fhidden_005f4 = _jspx_th_html_005fhidden_005f4.doStartTag();
      if (_jspx_th_html_005fhidden_005f4.doEndTag() == javax.servlet.jsp.tagext.Tag.SKIP_PAGE) {
        return true;
      }
      _005fjspx_005ftagPool_005fhtml_005fhidden_0026_005fproperty_005fnobody.reuse(_jspx_th_html_005fhidden_005f4);
      _jspx_th_html_005fhidden_005f4_reused = true;
    } finally {
      org.apache.jasper.runtime.JspRuntimeLibrary.releaseTag(_jspx_th_html_005fhidden_005f4, _jsp_getInstanceManager(), _jspx_th_html_005fhidden_005f4_reused);
    }
    return false;
  }
}
