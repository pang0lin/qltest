/*
 * Generated by the Jasper component of Apache Tomcat
 * Version: JspC/ApacheTomcat8
 * Generated at: 2023-01-06 09:56:37 UTC
 * Note: The last modified time of this file was set to
 *       the last modified time of the source file after
 *       generation to assist with modification tracking.
 */
package org.apache.jsp.public_;

import javax.servlet.*;
import javax.servlet.http.*;
import javax.servlet.jsp.*;
import com.js.util.util.BrowserJudge;
import java.util.*;
import com.js.system.util.StaticParam;

public final class leftBottonType_jsp extends org.apache.jasper.runtime.HttpJspBase
    implements org.apache.jasper.runtime.JspSourceDependent,
                 org.apache.jasper.runtime.JspSourceImports {

  private static final javax.servlet.jsp.JspFactory _jspxFactory =
          javax.servlet.jsp.JspFactory.getDefaultFactory();

  private static java.util.Map<java.lang.String,java.lang.Long> _jspx_dependants;

  static {
    _jspx_dependants = new java.util.HashMap<java.lang.String,java.lang.Long>(1);
    _jspx_dependants.put("/WEB-INF/tag-lib/struts-logic.tld", Long.valueOf(1499751390000L));
  }

  private static final java.util.Set<java.lang.String> _jspx_imports_packages;

  private static final java.util.Set<java.lang.String> _jspx_imports_classes;

  static {
    _jspx_imports_packages = new java.util.HashSet<>();
    _jspx_imports_packages.add("javax.servlet");
    _jspx_imports_packages.add("java.util");
    _jspx_imports_packages.add("javax.servlet.http");
    _jspx_imports_packages.add("javax.servlet.jsp");
    _jspx_imports_classes = new java.util.HashSet<>();
    _jspx_imports_classes.add("com.js.system.util.StaticParam");
    _jspx_imports_classes.add("com.js.util.util.BrowserJudge");
  }

  private org.apache.jasper.runtime.TagHandlerPool _005fjspx_005ftagPool_005flogic_005fnotEmpty_0026_005fname;
  private org.apache.jasper.runtime.TagHandlerPool _005fjspx_005ftagPool_005flogic_005fiterate_0026_005fname_005fid;

  private volatile javax.el.ExpressionFactory _el_expressionfactory;
  private volatile org.apache.tomcat.InstanceManager _jsp_instancemanager;

  public java.util.Map<java.lang.String,java.lang.Long> getDependants() {
    return _jspx_dependants;
  }

  public java.util.Set<java.lang.String> getPackageImports() {
    return _jspx_imports_packages;
  }

  public java.util.Set<java.lang.String> getClassImports() {
    return _jspx_imports_classes;
  }

  public javax.el.ExpressionFactory _jsp_getExpressionFactory() {
    if (_el_expressionfactory == null) {
      synchronized (this) {
        if (_el_expressionfactory == null) {
          _el_expressionfactory = _jspxFactory.getJspApplicationContext(getServletConfig().getServletContext()).getExpressionFactory();
        }
      }
    }
    return _el_expressionfactory;
  }

  public org.apache.tomcat.InstanceManager _jsp_getInstanceManager() {
    if (_jsp_instancemanager == null) {
      synchronized (this) {
        if (_jsp_instancemanager == null) {
          _jsp_instancemanager = org.apache.jasper.runtime.InstanceManagerFactory.getInstanceManager(getServletConfig());
        }
      }
    }
    return _jsp_instancemanager;
  }

  public void _jspInit() {
    _005fjspx_005ftagPool_005flogic_005fnotEmpty_0026_005fname = org.apache.jasper.runtime.TagHandlerPool.getTagHandlerPool(getServletConfig());
    _005fjspx_005ftagPool_005flogic_005fiterate_0026_005fname_005fid = org.apache.jasper.runtime.TagHandlerPool.getTagHandlerPool(getServletConfig());
  }

  public void _jspDestroy() {
    _005fjspx_005ftagPool_005flogic_005fnotEmpty_0026_005fname.release();
    _005fjspx_005ftagPool_005flogic_005fiterate_0026_005fname_005fid.release();
  }

  public void _jspService(final javax.servlet.http.HttpServletRequest request, final javax.servlet.http.HttpServletResponse response)
      throws java.io.IOException, javax.servlet.ServletException {

    final java.lang.String _jspx_method = request.getMethod();
    if (!"GET".equals(_jspx_method) && !"POST".equals(_jspx_method) && !"HEAD".equals(_jspx_method) && !javax.servlet.DispatcherType.ERROR.equals(request.getDispatcherType())) {
      response.sendError(HttpServletResponse.SC_METHOD_NOT_ALLOWED, "JSPs only permit GET, POST or HEAD. Jasper also permits OPTIONS");
      return;
    }

    final javax.servlet.jsp.PageContext pageContext;
    javax.servlet.http.HttpSession session = null;
    final javax.servlet.ServletContext application;
    final javax.servlet.ServletConfig config;
    javax.servlet.jsp.JspWriter out = null;
    final java.lang.Object page = this;
    javax.servlet.jsp.JspWriter _jspx_out = null;
    javax.servlet.jsp.PageContext _jspx_page_context = null;


    try {
      response.setContentType("text/html;charset=gbk");
      pageContext = _jspxFactory.getPageContext(this, request, response,
      			null, true, 8192, true);
      _jspx_page_context = pageContext;
      application = pageContext.getServletContext();
      config = pageContext.getServletConfig();
      session = pageContext.getSession();
      out = pageContext.getOut();
      _jspx_out = out;

      out.write("\r\n\r\n\r\n\r\n\r\n");

boolean bflag=true;
if(!BrowserJudge.isMSIE(request))bflag=false;
String orgId=(String)request.getAttribute("orgId");//当前部门id
String orgName=(String)request.getAttribute("orgName");//当前部门名称
String condition=(String)request.getAttribute("condition");//选择条件，可以为""
String inorQuery=(String)request.getAttribute("inorQuery");
//linux下选择组织乱码，由此转码
//orgName=new String(orgName.getBytes("ISO-8859-1"), "GBK");
//System.out.println("---orgName---->>>"+orgName);
String allowId=(String)request.getAttribute("allowId");
if(allowId==null||allowId.equals("")){
allowId="";
}

String inputTemp="notAllow";
//单选、多选
String inputType=(String)request.getAttribute("inputType");
if(inputType!=null&&!inputType.equals("null")){
if(inputType.equals("yes")){
inputTemp="radio";
}else{
inputTemp="checkbox";
}
}
//点击选择部门id及名称
String deptIdBuffer=(String)request.getAttribute("deptIdBuffer");
String deptNameBuffer=(String)request.getAttribute("deptNameBuffer");
//所有部门id及名称---现已无作用
String allDeptIdBuffer=(String)request.getAttribute("allDeptIdBuffer");
String allDeptNameBuffer=(String)request.getAttribute("allDeptNameBuffer");
//部门id串
String orgIdString=(String)request.getAttribute("orgIdString");
//点击选择组id及名称
String groupIdBuffer=(String)request.getAttribute("groupIdBuffer");
String groupNameBuffer=(String)request.getAttribute("groupNameBuffer");
String OGType=(String)request.getAttribute("OGtype");


StringBuffer empStr=new StringBuffer();//人员id串
StringBuffer empNameStr=new StringBuffer();//人员名称串
StringBuffer orgStr=new StringBuffer();//部门组id串
StringBuffer orgNameStr=new StringBuffer();//人员名称串

String a="";//人员
String b="";//部门
String value=(String)request.getAttribute("type");
if(value!=null&&!value.equals("")){
if(value.indexOf("org")>=0||value.equals("downEmp")||
   value.indexOf("group")>=0||value.indexOf("zhiWu")>=0||
   value.indexOf("gangWei")>=0||value.equals("customer")||value.equals("project")){
    a="$";//组织联系人
}else{
    a="#";//其他联系人
 }
if(value.indexOf("org")>=0||value.indexOf("zhiWu")>=0||value.indexOf("gangWei")>=0){
 b="*";//组织
}if(value.indexOf("group")>=0){
 b="@";//组
}if(value.equals("downEmp")||value.equals("customer")||value.equals("project")){
 b="$";//个人
}
}

String text = request.getParameter("text")==null?"":request.getParameter("text");

      out.write("\r\n<!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.01 Transitional//EN\">\r\n<html>\r\n<head>\r\n<link rel=stylesheet type=\"text/css\" href=\"/jsoa/style/cssmain.css\">\r\n<script src=\"/jsoa/js/util.js\"></script>\r\n<script src=\"/jsoa/webmail/ajax_util.js\"></script>\r\n</head>\r\n<script type=\"text/javascript\">\r\nvar objID=parent.opener.document.all.");
      out.print(allowId);
      out.write(".value;\r\nvar a='");
      out.print(a);
      out.write("';\r\nvar selectType='");
      out.print(inputTemp);
      out.write("';//选择类型，多、单\r\n");
      out.write("\r\n\r\n/**\r\n* 选择人员入口\r\n* selectId 用户id\r\n* temp 用户姓名\r\n* orgid 所属组织id\r\n*/\r\nfunction judeSelectUser(selectId,temp,orgid){\r\n var orgHiddenValue=window.parent.rightFrame.document.getElementById(\"orgIds\").value;//已选组织\r\n  if(selectType.indexOf('only')>=0){\r\n     alert('只能选择组织！');\r\n     document.getElementById(selectId).checked=false;//全选复选框\r\n     return false;\r\n  }else if(selectType=='notAllow'){\r\n     alert('不允许选择人员！');\r\n     document.getElementById(selectId).checked=false;\r\n     return false;\r\n  }else{\r\n    if(orgHiddenValue.indexOf('*'+'-1'+'*')<0){//判断是否已选择跟组织\r\n    ");
if(value.indexOf("org")>=0){
      out.write("\r\n      userInOrg(selectId,temp,'single','',orgid);//预选人员\r\n    ");
}else if(value.indexOf("group")>=0){
      out.write("\r\n      userInGroup(selectId,temp,'single','',orgid);//预选人员\r\n    ");
}else if(value.indexOf("zhiWu")>=0||value.indexOf("gangWei")>=0){
      out.write("\r\n        selectUser(selectId,temp);\r\n    ");
}else{
      out.write("\r\n       selectUser(selectId,temp);\r\n    ");
}
      out.write("\r\n    }else{\r\n       alert('已经选择了全部组织及人员！');\r\n       document.getElementById(selectId).checked=false;\r\n       return false;\r\n    }\r\n  }\r\n}\r\n\r\nfunction judeSelectDIV(selectId,temp,orgid){\r\n   var boolean=document.getElementById(selectId).checked;\r\n  // alert(3333);\r\n\t   if(boolean){\r\n\t      document.getElementById(selectId).checked=false;\r\n\t   }else{\r\n\t      document.getElementById(selectId).checked=true;\r\n\t   }\r\n   judeSelectUser(selectId,temp,orgid);\r\n}\r\n/**\r\n* 组织中选择用户\r\n* selectId 用户id\r\n* temp 用户姓名\r\n* typeTemp 选择类型\r\n* a 选择组织*、人员$、组标志#\r\n* orgid 所属组织id\r\n*/\r\nfunction userInOrg(selectId,temp,typeTemp,a,orgid){\r\n  var selectedOrgIds=window.parent.rightFrame.document.getElementById(\"orgIds\").value;//已选组织\r\n  var selectedGroupIds=window.parent.rightFrame.document.getElementById(\"groupIds\").value;//已选组\r\n  var selectedUserIds=window.parent.rightFrame.document.getElementById(\"selectIds\").value;//已选系统人员\r\n  var orgId=document.getElementById(\"orgId\").value;//预选组织ID\r\n  var orgName=document.getElementById(\"orgName\").value;//预选组织名称\r\n");
      out.write("\r\n  var orgIDStr=document.getElementById(\"orgIDStr\").value;\r\n  var orgNameStr=document.getElementById(\"orgNameStr\").value;\r\n  var empIDStr=document.getElementById(\"empIDStr\").value;\r\n  var empNameStr=document.getElementById(\"empNameStr\").value;\r\n\r\n  var orgIDStrArr,empIDStrArr,empNameStrArr;\r\n  orgIDStrArr=orgIDStr.substring(1,orgIDStr.length-1).split('\\**');\r\n  orgNameStrArr=orgNameStr.substring(1,orgNameStr.length-1).split('\\**');\r\n  empIDStrArr=empIDStr.substring(1,empIDStr.length-1).split('$$');\r\n  empNameStrArr=empNameStr.substring(1,empNameStr.length-1).split('$$');\r\n \r\n  //if(orgName=='')orgName='已选部门或组中';\r\n  if(orgId!=''){\r\n    orgId=orgId.substring(1,orgId.length-1).split('\\**');\r\n   }else{\r\n     orgId=orgid;\r\n   } \r\n   if(typeTemp=='single'){\r\n     if(selectedOrgIds!=''||selectedGroupIds!=''){\r\n\t  if(selectedOrgIds.indexOf('*'+orgId+'*')>=0||selectedGroupIds.indexOf('*'+orgId+'*')>=0){//先选组织，后选人\r\n\t     document.getElementById(selectId).checked=false;\r\n\t     if(orgName!=''){\r\n\t        alert(orgName+\" 已包含 \"+temp);\r\n");
      out.write("\t     }else{\r\n\t         for(var j=0;j<orgNameStrArr.length;j++){\r\n\t            if(orgId==orgIDStrArr[j]){\r\n\t              alert(orgNameStrArr[j]+\" 已包含 \"+temp);\r\n\t              break;\r\n\t            }\r\n\t         }     \r\n\t     }\r\n\t  }else{\r\n\t    selectUser(selectId,temp);\r\n\t  }\r\n\t}else{\r\n\t     selectUser(selectId,temp);\r\n\t  }\r\n   }else{\r\n     if(selectedOrgIds!=''){\r\n     if(orgId==''){//查询时\r\n       if(orgIDStrArr.length>0){\r\n         for(var i=0;i<orgIDStrArr.length;i++){\r\n           if(selectedOrgIds.indexOf('*'+orgIDStrArr[i]+'*')<0){//判断是否包含\r\n               document.getElementById('$'+empIDStrArr[i]+'$').checked=true;\r\n               //createDiv('$'+empIDStrArr[i]+'$',empNameStrArr[i]);\r\n               selectAll(a);//全选\r\n           }else{\r\n              document.getElementById('none').checked=false;\r\n              alert(orgNameStrArr[i]+\" 已包含 \"+empNameStrArr[i]);\r\n           }\r\n         }\r\n        }\r\n      }else{//点击组织时\r\n         if(selectedOrgIds.indexOf('*'+orgId+'*')>=0){\r\n               document.getElementById('none').checked=false;\r\n");
      out.write("               alert(orgName+\" 已包含 全部人员\");\r\n         }else{\r\n           selectAll(a);//全选\r\n         }\r\n      }\r\n     }else{\r\n\t     selectAll(a);//全选\r\n\t  }\r\n   }\r\n}\r\n/**\r\n* 组中选择用户\r\n* selectId 用户id\r\n* temp 用户姓名\r\n* typeTemp 选择类型\r\n* a 选择组织*、人员$、组标志#\r\n* orgid 所属组织id\r\n*/\r\nfunction userInGroup(selectId,temp,typeTemp,a,orgid){\r\n  var selectedOrgIds=window.parent.rightFrame.document.getElementById(\"orgIds\").value;//已选组织\r\n  var selectedGroupIds=window.parent.rightFrame.document.getElementById(\"groupIds\").value;//已选组\r\n  var selectedUserIds=window.parent.rightFrame.document.getElementById(\"selectIds\").value;//已选系统人员\r\n  var orgId=document.getElementById(\"orgId\").value;//预选组织ID\r\n  var orgName=document.getElementById(\"orgName\").value;//预选组织名称\r\n  \r\n  var orgIDStr=document.getElementById(\"orgIDStr\").value;\r\n  var orgNameStr=document.getElementById(\"orgNameStr\").value;\r\n  var empIDStr=document.getElementById(\"empIDStr\").value;\r\n  var empNameStr=document.getElementById(\"empNameStr\").value;\r\n  var orgIDStrArr,empIDStrArr,empNameStrArr;\r\n");
      out.write("  orgIDStrArr=orgIDStr.substring(1,orgIDStr.length-1).split('\\@@');\r\n  orgNameStrArr=orgNameStr.substring(1,orgNameStr.length-1).split('\\@@');\r\n  empIDStrArr=empIDStr.substring(1,empIDStr.length-1).split('$$');\r\n  empNameStrArr=empNameStr.substring(1,empNameStr.length-1).split('$$');\r\n  //if(orgName=='')orgName='已选部门或组中';\r\n  if(orgId!=''){\r\n    orgId=orgId.substring(1,orgId.length-1).split('\\@@');\r\n   }else{\r\n     orgId=orgid;\r\n   } \r\n   if(typeTemp=='single'){\r\n     if(selectedGroupIds!=''){\r\n\t  if(selectedGroupIds.indexOf('@'+orgId+'@')>=0){//先选组织，后选人\r\n\t     document.getElementById(selectId).checked=false;\r\n\t     if(orgName!=''){\r\n\t        alert(orgName+\" 已包含 \"+temp);\r\n\t     }else{\r\n\t         for(var j=0;j<orgNameStrArr.length;j++){\r\n\t            if(orgId==orgIDStrArr[j]){\r\n\t              alert(orgNameStrArr[j]+\" 已包含 \"+temp);\r\n\t              break;\r\n\t            }\r\n\t         }     \r\n\t     }\r\n\t  }else{\r\n\t    selectUser(selectId,temp);\r\n\t  }\r\n\t}else{\r\n\t     selectUser(selectId,temp);\r\n\t  }\r\n   }else{\r\n     if(selectedGroupIds!=''){\r\n");
      out.write("     if(orgId==''){//查询时\r\n       if(orgIDStrArr.length>0){\r\n         for(var i=0;i<orgIDStrArr.length;i++){\r\n           if(selectedGroupIds.indexOf('@'+orgIDStrArr[i]+'@')<0){//判断重复\r\n               document.getElementById('$'+empIDStrArr[i]+'$').checked=true;\r\n               //createDiv('$'+empIDStrArr[i]+'$',empNameStrArr[i]);\r\n               selectAll(a);//全选\r\n           }else{\r\n              document.getElementById('none').checked=false;\r\n              alert(orgNameStrArr[i]+\" 已包含 \"+empNameStrArr[i]);\r\n           }\r\n         }\r\n        }\r\n      }else{//点击组织时\r\n         if(selectedGroupIds.indexOf('@'+orgId+'@')>=0){\r\n               document.getElementById('none').checked=false;\r\n               alert(orgName+\" 已包含 全部人员\");\r\n         }else{\r\n           selectAll(a);//全选\r\n         }\r\n      }\r\n     }else{\r\n\t     selectAll(a);//全选\r\n\t  }\r\n   }\r\n}\r\n/**\r\n* 职务岗位中选择用户\r\n* selectId 用户id\r\n* temp 用户姓名\r\n* typeTemp 选择类型\r\n* a 选择组织*、人员$、组标志#\r\n* orgid 所属组织id\r\n*/\r\nfunction userInZGW(selectId,temp,typeTemp,a,orgid){\r\n  var selectedOrgIds=window.parent.rightFrame.document.getElementById(\"orgIds\").value;//已选组织\r\n");
      out.write("  var selectedGroupIds=window.parent.rightFrame.document.getElementById(\"groupIds\").value;//已选组\r\n  var selectedUserIds=window.parent.rightFrame.document.getElementById(\"selectIds\").value;//已选系统人员\r\n  \r\n  var orgId=document.getElementById(\"orgId\").value;//预选组织ID\r\n  var orgName=document.getElementById(\"orgName\").value;//预选组织名称\r\n  \r\n  var orgIDStr=document.getElementById(\"orgIDStr\").value;\r\n  var orgNameStr=document.getElementById(\"orgNameStr\").value;\r\n  var empIDStr=document.getElementById(\"empIDStr\").value;\r\n  var empNameStr=document.getElementById(\"empNameStr\").value;\r\n\r\n  var orgIDStrArr,empIDStrArr,empNameStrArr;\r\n  if(orgIDStr.indexOf('*')>=0){\r\n    orgIDStrArr=orgIDStr.substring(1,orgIDStr.length-1).split('\\**');\r\n    orgNameStrArr=orgNameStr.substring(1,orgNameStr.length-1).split('\\**');\r\n  }if(orgIDStr.indexOf('@')>=0){\r\n    orgIDStrArr=orgIDStr.substring(1,orgIDStr.length-1).split('\\@@');\r\n    orgNameStrArr=orgNameStr.substring(1,orgNameStr.length-1).split('\\@@');\r\n  }\r\n  empIDStrArr=empIDStr.substring(1,empIDStr.length-1).split('$$');\r\n");
      out.write("  empNameStrArr=empNameStr.substring(1,empNameStr.length-1).split('$$');\r\n\r\n  if(orgId!=''){\r\n    orgId=orgId.substring(1,orgId.length-1).split('\\**');\r\n   }else{\r\n     orgId=orgid;\r\n   }\r\n   if(typeTemp=='single'){\r\n     if(selectedOrgIds!=''){\r\n        if(orgIDStrArr!=''){\r\n            if(selectedOrgIds.indexOf('*'+orgid+'*')>=0){\r\n                for(var i=0;i<selectedOrgIds.length;i++){\r\n                alert(orgid);alert(orgIDStrArr[i]);\r\n                   if(orgIDStrArr[i]==orgid){\r\n                       document.getElementById(selectId).checked=false;\r\n\t                   alert(orgNameStrArr[i]+' 已包含 '+temp);\r\n\t                   break;\r\n                   }\r\n                }\r\n            }else{\r\n               selectUser(selectId,temp);\r\n            }\r\n        }\r\n\t }else{\r\n\t   selectUser(selectId,temp);\r\n\t }\r\n   }else{\r\n      if(selectedOrgIds!=''||selectedGroupIds!=''){\r\n         if(orgIDStrArr.length>0){\r\n            for(var i=0;i<orgIDStrArr.length;i++){\r\n              if(selectedOrgIds.indexOf('*'+orgIDStrArr[i]+'*')<0){\r\n");
      out.write("                document.getElementById('$'+empIDStrArr[i]+'$').checked=true;\r\n                selectUser('$'+empIDStrArr[i]+'$',empNameStrArr[i]);\r\n              }else{\r\n                 document.getElementById('none').checked=false;\r\n                 alert(orgNameStrArr[i]+' 已包含 '+empNameStrArr[i]);\r\n              }\r\n            }\r\n         }\r\n      }else{\r\n        selectAll(a);\r\n      }\r\n   }\r\n}\r\n\r\n/**\r\n* 选择人员\r\n* selectId 人员id\r\n* temp 姓名\r\n*/\r\nfunction selectUser(selectId,temp){\r\n var checkObj=document.getElementById(selectId).checked;\r\n if(checkObj){//只能单选人\r\n    if(selectType=='radio'&&parent.rightFrame.document.getElementById(selectId)){\r\n       dropDiv(selectId,'');\r\n       createDiv(selectId,temp);\r\n       document.getElementById(selectId).checked=true;\r\n    }else{//多选组织多选人\r\n       isContainPeopele(selectId,temp);\r\n       //createDiv(selectId,temp);\r\n    }\r\n }else{\r\n    dropDiv(selectId,'');//删除元素\r\n }\r\n}\r\n\r\n//父组织是否包含子组织人员\r\nvar selectedUserId,selectedUserName;\r\nfunction isContainPeopele(selectId,temp){\r\n\tselectedUserName=temp;\r\n");
      out.write("\tselectedUserId=selectId;\r\n\tvar orgId=document.getElementById(\"orgId\").value;\r\n\tvar selectedOrgIds=window.parent.rightFrame.document.getElementById(\"orgIds\").value;//已选组织\r\n\tif(selectedOrgIds!=null&&selectedOrgIds!='null'&&selectedOrgIds!=''){\r\n\t\torgId=orgId.substring(1,orgId.length-1).split('\\**');\r\n\t    var url=\"/jsoa/selectObj.do?method=getOrgIdString&orgId=\"+orgId;\r\n\t\tsendG(url,getResult,null);\r\n\t}else{\r\n\t\tcreateDiv(selectId,temp);\r\n\t}\r\n}\r\n\r\nvar flagStr='';\r\nfunction getResult(cartXML){\r\n   flagStr='';\r\n   var cart = cartXML.getElementsByTagName(\"result\")[0];\r\n   var ids = cart.getElementsByTagName(\"ids\")[0].firstChild.nodeValue;\r\n   var orgIDStr=window.parent.rightFrame.document.getElementById(\"orgIds\").value;//已选组织\r\n   var orgIDStrArr;\r\n   if(orgIDStr.indexOf('*')>=0){\r\n    \torgIDStrArr=orgIDStr.substring(1,orgIDStr.length-1).split('\\**');\r\n    \tfor(var i=0;i<orgIDStrArr.length;i++){\r\n    \t\tif(ids.indexOf('$'+orgIDStrArr[i]+'$')>=0){\r\n    \t\t\tvar url=\"/jsoa/selectObj.do?method=getOrgName&orgId=\"+orgIDStrArr[i];\r\n");
      out.write("    \t\t\tflagStr+=false;\r\n\t\t\t\tsendG(url,getResultTemp,null);\r\n\t\t\t\tbreak;\r\n    \t\t}else{\r\n    \t\t\tflagStr+=true;\r\n    \t\t}\r\n    \t}\r\n    \t//alert(flagStr);\r\n    \tif(flagStr.indexOf(false)<0){\r\n    \t\tcreateDiv(selectedUserId,selectedUserName);\r\n    \t}\r\n    }\r\n}\r\n\r\nfunction getResultTemp(cartXML){\r\n   var cart = cartXML.getElementsByTagName(\"result\")[0];\r\n   var name = cart.getElementsByTagName(\"name\")[0].firstChild.nodeValue;\r\n   if(name!=null&&name!=''){\r\n   \t\talert(name+\" 已包含 \"+selectedUserName);\r\n   \t\tdocument.getElementById(selectedUserId).checked=false;\r\n   \t\treturn false;\r\n   }\r\n}\r\n\r\nfunction judeSelectAll(a){\r\n if(selectType.indexOf('only')>=0){\r\n   document.getElementById('none').checked=false;\r\n   alert('只能选择组织！');\r\n   return false;\r\n }else if(selectType=='notAllow'){\r\n     document.getElementById('none').checked=false;\r\n     alert('不允许选择人员！');\r\n     return false;\r\n }else{\r\n    ");
if(value.indexOf("org")>=0){
      out.write("\r\n     //userInOrg('','','all',a,'');//预选人员\r\n     checkSelectAll(a,'userInOrg');\r\n    ");
}else if(value.indexOf("group")>=0){
      out.write("\r\n     //userInGroup('','','all',a,'');//预选人员\r\n     checkSelectAll(a,'userInGroup');\r\n    ");
} else if(value.indexOf("zhiWu")>=0||value.indexOf("gangWei")>=0){
      out.write("\r\n       selectAll(a);\r\n    ");
}else{
      out.write("\r\n       selectAll(a);\r\n    ");
}
      out.write("\r\n }\r\n}\r\n\r\nfunction isSelectRootDept(a){\r\n   var orgHiddenValue=window.parent.rightFrame.document.getElementById(\"orgIds\").value;//已选组织\r\n    if(orgHiddenValue.indexOf('*'+'-1'+'*')<0){\r\n        judeSelectAll(a);\r\n    }else{\r\n        alert('已经选择了全部组织及人员！');\r\n        document.getElementById('none').checked=false;\r\n        return false;\r\n    }\r\n}\r\n\r\n/**\r\n* 全选人员时，已选组织中是否包含人员的父组织\r\n* a 字符标志 *=组织，#=组，$=人员 \r\n* type 选择人员来自哪 userInOrg=组织中选择 userInGroup=组中选择\r\n*/\r\nvar selectAction='',charFlag='';\r\nfunction checkSelectAll(a,type){\r\n\tselectAction='';\r\n\tcharFlag='';\r\n\tvar selectedOrgIds=window.parent.rightFrame.document.getElementById(\"orgIds\").value;//已选组织\r\n\tvar orgId=document.getElementById(\"orgId\").value;//当前选中组织\r\n\tif(selectedOrgIds!=null&&selectedOrgIds!='null'&&selectedOrgIds!=''){\r\n\t\tselectAction=type;\r\n\t\tcharFlag=a;\r\n\t\torgId=orgId.substring(1,orgId.length-1).split('\\**');\r\n\t    var url=\"/jsoa/selectObj.do?method=getOrgIdString&orgId=\"+orgId;\r\n\t\tsendG(url,getResultAll,null);\r\n\t}else{\r\n\t\tif(type=='userInOrg'){//组织中选择\r\n\t\t\tuserInOrg('','','all',a,'');//预选人员\r\n");
      out.write("\t\t}else if(type=='userInGroup'){//组中选择\r\n\t\t\tuserInGroup('','','all',a,'');//预选人员\r\n\t\t}\r\n\t}\r\n}\r\nvar selectAllFlag='';\r\nfunction getResultAll(cartXML){\r\n   selectAllFlag=\"\";\r\n   var cart = cartXML.getElementsByTagName(\"result\")[0];\r\n   var ids = cart.getElementsByTagName(\"ids\")[0].firstChild.nodeValue;\r\n   var orgIDStr=window.parent.rightFrame.document.getElementById(\"orgIds\").value;//已选组织\r\n   var orgIDStrArr=orgIDStr.substring(1,orgIDStr.length-1).split('\\**');\r\n   var orgId=document.getElementById(\"orgId\").value;//当前选中组织\r\n   if(orgIDStr.indexOf(orgId)>=0){\r\n   \t\talert('已选组织中已包含所选人员！');\r\n   \t\tdocument.getElementById('none').checked=false;\r\n   \t\treturn false;\r\n   }else{\r\n\t   for(var i=0;i<orgIDStrArr.length;i++){\r\n\t \t\tif(ids.indexOf('$'+orgIDStrArr[i]+'$')>=0){\r\n\t \t\t\talert('已选组织中已包含所选人员！');\r\n\t \t\t\tdocument.getElementById('none').checked=false;\r\n\t \t\t\tselectAllFlag+=false;\r\n\t\t\t\tbreak;\r\n\t \t\t}else{\r\n\t \t\t\tselectAllFlag+=true;\r\n\t \t\t}\r\n\t   }\r\n\t   if(selectAllFlag.indexOf(false)<0){\r\n\t   \tif(selectAction=='userInOrg'){\r\n\t\t\tuserInOrg('','','all',charFlag,'');//预选人员\r\n");
      out.write("\t\t}else if(selectAction=='userInGroup'){\r\n\t\t\tuserInGroup('','','all',charFlag,'');//预选人员\r\n\t\t}\r\n\t   }\r\n  }\t\r\n}\r\n\r\n/**\r\n* 全选\r\n* a 字符标志 *=组织，#=组，$=人员\r\n*/\r\nfunction selectAll(a){\r\nvar selectObj=document.getElementById('none').checked;\r\nvar countSelect=document.getElementsByName(\"chEmployee\");\r\n  if(countSelect.length>0){\r\n    if(selectObj==true){//全选时\r\n     for(var i=0;i<countSelect.length;i++){\r\n       var selectID=countSelect[i].value;\r\n       var selectValue=document.getElementById('temp_'+selectID).value;\r\n       if(a=='$'){\r\n           selectID='$'+selectID+'$'; \r\n       }if(a=='#'){\r\n          selectID='#'+selectID+'#'; \r\n       }\r\n       document.getElementById(selectID).checked=true;//复选框打钩\r\n       createDiv(selectID,selectValue);//创建已选择div\r\n     }\r\n    }else{//取消全选\r\n      for(var i=0;i<countSelect.length;i++){\r\n         var selectID=countSelect[i].value;\r\n         var selectValue=document.getElementById('temp_'+selectID).value;\r\n         if(a=='$'){\r\n           selectID='$'+selectID+'$'; \r\n         }if(a=='#'){\r\n");
      out.write("          selectID='#'+selectID+'#'; \r\n         }\r\n         document.getElementsByName(\"chEmployee\")[i].checked=false;//取消复选框打钩\r\n         dropDiv(selectID,'');\r\n      }\r\n    } \r\n  }else{\r\n    alert('无人员可选！');\r\n    document.getElementById('none').checked=false;\r\n  }\r\n\r\n}\r\n\r\n\r\n</script>\r\n<body style=\"background:#e6eff8; margin:0px; padding:0px;font-size:12px;\" topmargin=\"0\" leftmargin=\"0\" rightmargin=\"0\" bottommargin=\"0\" onLoad=\"init()\">\r\n  &nbsp;&nbsp;&nbsp;<input  type=\"");
      out.print(inputTemp.equals("checkbox")||inputTemp.equals("notAllow")?"checkbox":"radio" );
      out.write("\" id=\"none\" name=\"select\" onClick=\"isSelectRootDept('");
      out.print(a);
      out.write("')\" ");
      out.print(inputTemp.equals("notAllow")||inputTemp.equals("checkbox")?"style='font-size:12px;'":"style='display=none;font-size:12px;'");
      out.write('>');
      out.print(inputTemp.equals("notAllow")||inputTemp.equals("checkbox")?"全选":"");
      out.write("\r\n<form name=\"orgTreeBar\" method=\"post\" style=\"margin:0px; padding-left:12px; width:255px;\">\r\n <table border=\"0\" align=\"center\" cellpadding=\"0\" cellspacing=\"0\" height=\"170\" width=\"100%\" style=\"border:1px solid #ADADAD; padding-bottom:1px; background:#FFF;\">\r\n  <tr>\r\n   <td align=\"left\" valign=\"bottom\">\r\n   <div name=\"fromList\" style=\"height:");
      out.print(inputTemp.equals("checkbox")||inputTemp.equals("notAllow")?"172px":"177px");
      out.write(";width:241;overflow-x:auto;overflow-y:auto;white-space:nowrap;font-size:12px;\">\r\n     ");
      //  logic:notEmpty
      org.apache.struts.taglib.logic.NotEmptyTag _jspx_th_logic_005fnotEmpty_005f0 = (org.apache.struts.taglib.logic.NotEmptyTag) _005fjspx_005ftagPool_005flogic_005fnotEmpty_0026_005fname.get(org.apache.struts.taglib.logic.NotEmptyTag.class);
      boolean _jspx_th_logic_005fnotEmpty_005f0_reused = false;
      try {
        _jspx_th_logic_005fnotEmpty_005f0.setPageContext(_jspx_page_context);
        _jspx_th_logic_005fnotEmpty_005f0.setParent(null);
        // /public/leftBottonType.jsp(582,5) name = name type = null reqTime = true required = false fragment = false deferredValue = false expectedTypeName = null deferredMethod = false methodSignature = null
        _jspx_th_logic_005fnotEmpty_005f0.setName("userList");
        int _jspx_eval_logic_005fnotEmpty_005f0 = _jspx_th_logic_005fnotEmpty_005f0.doStartTag();
        if (_jspx_eval_logic_005fnotEmpty_005f0 != javax.servlet.jsp.tagext.Tag.SKIP_BODY) {
          do {
            out.write("\r\n       ");
            //  logic:iterate
            org.apache.struts.taglib.logic.IterateTag _jspx_th_logic_005fiterate_005f0 = (org.apache.struts.taglib.logic.IterateTag) _005fjspx_005ftagPool_005flogic_005fiterate_0026_005fname_005fid.get(org.apache.struts.taglib.logic.IterateTag.class);
            boolean _jspx_th_logic_005fiterate_005f0_reused = false;
            try {
              _jspx_th_logic_005fiterate_005f0.setPageContext(_jspx_page_context);
              _jspx_th_logic_005fiterate_005f0.setParent((javax.servlet.jsp.tagext.Tag) _jspx_th_logic_005fnotEmpty_005f0);
              // /public/leftBottonType.jsp(583,7) name = id type = java.lang.String reqTime = false required = true fragment = false deferredValue = false expectedTypeName = null deferredMethod = false methodSignature = null
              _jspx_th_logic_005fiterate_005f0.setId("userList");
              // /public/leftBottonType.jsp(583,7) name = name type = null reqTime = true required = false fragment = false deferredValue = false expectedTypeName = null deferredMethod = false methodSignature = null
              _jspx_th_logic_005fiterate_005f0.setName("userList");
              int _jspx_eval_logic_005fiterate_005f0 = _jspx_th_logic_005fiterate_005f0.doStartTag();
              if (_jspx_eval_logic_005fiterate_005f0 != javax.servlet.jsp.tagext.Tag.SKIP_BODY) {
                java.lang.Object userList = null;
                if (_jspx_eval_logic_005fiterate_005f0 != javax.servlet.jsp.tagext.Tag.EVAL_BODY_INCLUDE) {
                  out = org.apache.jasper.runtime.JspRuntimeLibrary.startBufferedBody(_jspx_page_context, _jspx_th_logic_005fiterate_005f0);
                }
                userList = (java.lang.Object) _jspx_page_context.findAttribute("userList");
                do {
                  out.write("\r\n         ");

				Object[] obj;
				int i=0;
				String temp="";
				String temp1="";
				String useraccount="";
				i++;
				obj=(Object[])userList;
				temp=obj[1].toString();
				temp1=obj[1].toString();
				empStr.append(a+obj[0]+a);
				orgStr.append(b+obj[9]+b);
				orgNameStr.append(b+obj[10]+b);
				if(condition!=null&&condition.equals("mobile")){
				   temp=obj[1]+"("+obj[3].toString()+")";
				   temp1=obj[1].toString();
				}else if(condition!=null&&condition.equals("email")){
					temp=obj[1]+"&lt;"+obj[2].toString()+"&gt;";
					temp1=temp;
				}
				String showOrg = "";
				if(!text.equals("")){
					showOrg ="group".equals(request.getParameter("type"))?"("+obj[11]+")":"("+obj[10]+")";
					useraccount="("+obj[7]+")";
				}
				
                  out.write("\r\n         <div style=\"\">\r\n           <input type=\"hidden\" id=\"temp_");
                  out.print(obj[0]);
                  out.write("\" name=\"empHidden\" value=\"");
                  out.print(temp1);
                  out.write("\">\r\n           <input type=\"hidden\" id=\"mobile_");
                  out.print(a+obj[0]+a);
                  out.write("\" value=\"");
                  out.print(obj[3]==null||obj[3].toString().equals("")?"123":obj[3].toString());
                  out.write("\">\r\n           <div style=\"width:100%;cursor:pointer;\">\r\n             <input id=\"");
                  out.print(a+obj[0]+a);
                  out.write("\" type=\"");
                  out.print(inputTemp.equals("notAllow")||inputTemp.equals("checkbox")?"checkbox":"radio");
                  out.write("\" name=\"chEmployee\" value=\"");
                  out.print(obj[0]);
                  out.write("\" onClick=\"judeSelectUser('");
                  out.print(a+obj[0]+a);
                  out.write('\'');
                  out.write(',');
                  out.write('\'');
                  out.print(temp1);
                  out.write('\'');
                  out.write(',');
                  out.write('\'');
                  out.print(obj[9]);
                  out.write("')\">\r\n             ");
                  out.print(condition!=null&&condition.equals("mobile")?temp:temp1);
                  out.print(useraccount );
                  out.print(showOrg );
                  out.write("</div>\r\n         </div>\r\n       ");
                  int evalDoAfterBody = _jspx_th_logic_005fiterate_005f0.doAfterBody();
                  userList = (java.lang.Object) _jspx_page_context.findAttribute("userList");
                  if (evalDoAfterBody != javax.servlet.jsp.tagext.BodyTag.EVAL_BODY_AGAIN)
                    break;
                } while (true);
                if (_jspx_eval_logic_005fiterate_005f0 != javax.servlet.jsp.tagext.Tag.EVAL_BODY_INCLUDE) {
                  out = _jspx_page_context.popBody();
                }
              }
              if (_jspx_th_logic_005fiterate_005f0.doEndTag() == javax.servlet.jsp.tagext.Tag.SKIP_PAGE) {
                return;
              }
              _005fjspx_005ftagPool_005flogic_005fiterate_0026_005fname_005fid.reuse(_jspx_th_logic_005fiterate_005f0);
              _jspx_th_logic_005fiterate_005f0_reused = true;
            } finally {
              org.apache.jasper.runtime.JspRuntimeLibrary.releaseTag(_jspx_th_logic_005fiterate_005f0, _jsp_getInstanceManager(), _jspx_th_logic_005fiterate_005f0_reused);
            }
            out.write("\r\n     ");
            int evalDoAfterBody = _jspx_th_logic_005fnotEmpty_005f0.doAfterBody();
            if (evalDoAfterBody != javax.servlet.jsp.tagext.BodyTag.EVAL_BODY_AGAIN)
              break;
          } while (true);
        }
        if (_jspx_th_logic_005fnotEmpty_005f0.doEndTag() == javax.servlet.jsp.tagext.Tag.SKIP_PAGE) {
          return;
        }
        _005fjspx_005ftagPool_005flogic_005fnotEmpty_0026_005fname.reuse(_jspx_th_logic_005fnotEmpty_005f0);
        _jspx_th_logic_005fnotEmpty_005f0_reused = true;
      } finally {
        org.apache.jasper.runtime.JspRuntimeLibrary.releaseTag(_jspx_th_logic_005fnotEmpty_005f0, _jsp_getInstanceManager(), _jspx_th_logic_005fnotEmpty_005f0_reused);
      }
      out.write("\r\n   </div></td>\r\n </tr>\r\n    <input type=\"hidden\" id=\"orgId\" value=\"");
      out.print(orgId==null?"":b+orgId+b );
      out.write("\">\r\n    <input type=\"hidden\" id=\"orgName\" value=\"");
      out.print(orgName==null?"":orgName );
      out.write("\">\r\n     <input type=\"hidden\" id=\"empIDStr\" value=\"");
      out.print(empStr.toString());
      out.write("\">\r\n     <input type=\"hidden\" id=\"orgIDStr\" value=\"");
      out.print(inorQuery!=null&&inorQuery.equals("1")?orgStr.toString():"");
      out.write("\">\r\n     <input type=\"hidden\" id=\"empNameStr\" value=\"");
      out.print(inorQuery!=null&&inorQuery.equals("1")?empNameStr.toString():"");
      out.write("\">\r\n     <input type=\"hidden\" id=\"orgNameStr\" value=\"");
      out.print(inorQuery!=null&&inorQuery.equals("1")?orgNameStr.toString():"");
      out.write("\">\r\n     <input type=\"hidden\" id=\"deptIdBuffer\" value=\"");
      out.print(deptIdBuffer==null||deptIdBuffer.equals("")?"":deptIdBuffer );
      out.write("\">\r\n     <input type=\"hidden\" id=\"deptNameBuffer\" value=\"");
      out.print(deptNameBuffer==null||deptNameBuffer.equals("")?"":deptNameBuffer );
      out.write("\">\r\n      <input type=\"hidden\" id=\"allDeptIdBuffer\" value=\"");
      out.print(allDeptIdBuffer==null||allDeptIdBuffer.equals("")?"":allDeptIdBuffer );
      out.write("\">\r\n     <input type=\"hidden\" id=\"allDeptNameBuffer\" value=\"");
      out.print(allDeptNameBuffer==null||allDeptNameBuffer.equals("")?"":allDeptNameBuffer );
      out.write("\">\r\n \t<input type=\"hidden\" id=\"orgIdString\" value=\"");
      out.print(orgIdString);
      out.write("\">\r\n </table>\r\n \r\n <div id=\"Loading\" style=\"display:none;\" >f</div>\r\n</form>\r\n</body>\r\n</html>\r\n<script type=\"text/javascript\">\r\nfunction init(){\r\n    var i=0;\r\n    var selectOut=window.parent.rightFrame.document.getElementById(\"otherSelectIds\").value;//选中外部人员id\r\n    var selectInner=window.parent.rightFrame.document.getElementById(\"selectIds\").value;//选中组织、组人员id\r\n    var mobilePhones=window.parent.rightFrame.document.getElementById(\"personMobile\").value;//选中人员的手机号:7-1\r\n    \r\n    var selectOutTemp=selectOut.substring(1,selectOut.length-1).split('##');\r\n    var selectInnerTemp=selectInner.substring(1,selectInner.length-1).split('$$');\r\n    var phonesTemp=mobilePhones.substring(0,mobilePhones.length-1).split(',');//手机号数组\r\n    \r\n    //if(document.all.chEmployee!=undefined){\r\n          if(selectInner!=null&&selectInner!=''&&selectInnerTemp!=''&&selectInner.indexOf('$')>=0){\r\n             for(var j=0;j<selectInnerTemp.length;j++){\r\n                var valueObj=window.parent.rightFrame.document.getElementById('$'+selectInnerTemp[j]+'$');\r\n");
      out.write("                \r\n                if(valueObj){\r\n                   ");
if(bflag){
      out.write("\r\n\t                   valueObj=valueObj.innerText;\r\n\t                   ");
}else{
      out.write("\r\n\t                   valueObj=valueObj.textContent;\r\n                   ");
}
      out.write("\r\n\t               //valueObj=valueObj.innerText;\r\n\t               dropDiv('$'+selectInnerTemp[j]+'$',phonesTemp[j]);//\r\n\t               createDiv('$'+selectInnerTemp[j]+'$',valueObj.substring(0,valueObj.length-1),phonesTemp[j]);\r\n                }\r\n                var obj=document.getElementById('$'+selectInnerTemp[j]+'$');\r\n\t            if(obj){\r\n\t              obj.checked=true;\r\n\t            }\r\n             }\r\n          }else{\r\n             var valueObj=window.parent.rightFrame.document.getElementById('$'+selectInner+'$');\r\n              if(valueObj){\r\n                   ");
if(bflag){
      out.write("valueObj=valueObj.innerText;");
}else{
      out.write("valueObj=valueObj.textContent;");
}
      out.write("\r\n\t               //valueObj=valueObj.innerText;\r\n\t               dropDiv('$'+selectInner+'$');\r\n\t               createDiv('$'+selectInner+'$',valueObj);\r\n                }\r\n                var obj=document.getElementById('$'+selectInner+'$');\r\n\t            if(obj){\r\n\t              obj.checked=true;\r\n\t            }\r\n          }\r\n\r\n          if(selectOut!=null&&selectOut!=''&&selectOutTemp!=''&&selectOut.indexOf('#')>=0){\r\n            for(var j=0;j<selectOutTemp.length;j++){\r\n                var valueObj0=window.parent.rightFrame.document.getElementById('#'+selectOutTemp[j]+'#');\r\n               if(valueObj0){\r\n               \t   ");
if(bflag){
      out.write("valueObj0=valueObj0.innerText;");
}else{
      out.write("valueObj0=valueObj0.textContent;");
}
      out.write("\r\n\t               //valueObj0=valueObj0.innerText;\r\n\t               dropDiv('#'+selectOutTemp[j]+'#',phonesTemp[j]);//\r\n\t               createDiv('#'+selectOutTemp[j]+'#',valueObj0.substring(0,valueObj0.length-1),phonesTemp[j]);\r\n\t            }\r\n\t           var obj=document.getElementById('#'+selectOutTemp[j]+'#');\r\n\t            if(obj){\r\n\t              obj.checked=true;\r\n\t            }\r\n            }\r\n          }else{\r\n             var valueObj=window.parent.rightFrame.document.getElementById('$'+selectOut+'$');\r\n              if(valueObj){\r\n              \t   ");
if(bflag){
      out.write("valueObj=valueObj.innerText;");
}else{
      out.write("valueObj=valueObj.textContent;");
}
      out.write("\r\n\t               dropDiv('#'+selectOut+'#');\r\n\t               createDiv('#'+selectOut+'#',valueObj);\r\n                }\r\n                var obj=document.getElementById('#'+selectOut+'#');\r\n\t            if(obj){\r\n\t              obj.checked=true;\r\n\t            }\r\n          }\r\n        //}else{\r\n        //  initState();\r\n       // }  \r\n}\r\n\r\nfunction changeDivColor(selectId){\r\n try{\r\n  var objDiv=window.parent.rightFrame.document.getElementsByTagName(\"div\");\r\n  var obj=window.parent.rightFrame.document.getElementById(selectId);\r\n  changeColor(objDiv,obj,selectId);\r\n  }catch(e){\r\n     alert(e);\r\n   }\r\n}\r\n\r\nfunction changeColor(objDiv,obj,tempId){\r\n   if(objDiv.length>1){\r\n        for(var i=1;i<objDiv.length;i++){\r\n           if(objDiv[i].id==tempId){\r\n              objDiv[i].style.color=\"#FFFFFF\";\r\n              objDiv[i].style.backgroundColor=\"#316ac5\";\r\n           }else{\r\n             objDiv[i].style.backgroundColor=\"\";\r\n             objDiv[i].style.color=\"\";\r\n           }\r\n        }\r\n    }\r\n}\r\n\r\nvar selectedID=\"\",phone;\r\n");
      out.write("function reMovePerson(obj,mobile){\r\nselectedID=obj;\r\nphone=mobile;\r\n}\r\nfunction delPersonDiv(phone){\r\n  if(selectedID!=undefined&&selectedID!=\"\"){\r\n     dropDiv(selectedID,phone);\r\n     selectedID=\"\";\r\n  }else{\r\n    alert('请选择要移出的记录！');\r\n    return false;\r\n  }\r\n}\r\n/**\r\n* 删除右边已选择元素\r\n* selectId 选中id\r\n* mobiles 手机||其他信息\r\n*/\r\nfunction dropDiv(selectId,mobiles){\r\n   var selectOut=window.parent.rightFrame.document.getElementById(\"otherSelectIds\").value;//选中外部人员id\r\n   var selectInner=window.parent.rightFrame.document.getElementById(\"selectIds\").value;//选中组织、组人员id\r\n   var tempSelect=new StringBuffer();\r\n    var obj=document.getElementById(selectId);\r\n    if(obj){\r\n      obj.checked=false;//如果右侧移出的人员出现在左侧，那么就把左侧人员的复选框设置为“未选中”\r\n    }\r\n    if(selectId.indexOf('$')>=0&&selectInner.indexOf(selectId)>=0){\r\n       var selectInnerTemp=selectInner.substring(1,selectInner.length-1).split('$$');\r\n       for(var k=0;k<selectInnerTemp.length;k++){\r\n          if(selectInnerTemp[k]!=selectId.substring(1,selectId.length-1)){\r\n            tempSelect.append('$'+selectInnerTemp[k]+'$');\r\n");
      out.write("          }\r\n       }\r\n    }\r\n    if(selectId.indexOf('$')<0&&selectId.indexOf('#')<0){\r\n        if(selectType=='radio'){\r\n          tempSelect.append(\"\");\r\n        }else{\r\n          tempSelect.append(selectInner);\r\n        }\r\n    }\r\n    if(selectId.indexOf('#')>=0&&selectOut.indexOf(selectId)>=0){\r\n       selectOut=selectOut.replaceAll(selectId,'');\r\n    }\r\n    if(window.parent.rightFrame.document.getElementById(selectId)){\r\n    \t");
if(bflag){
      out.write("\r\n        window.parent.rightFrame.document.getElementById(selectId).removeNode(true);\r\n        ");
}else{
      out.write("\r\n        var persionList=window.parent.rightFrame.document.getElementById(\"persionList\");\r\n        var selectPersion=window.parent.rightFrame.document.getElementById(selectId);;\r\n      \tpersionList.removeChild(selectPersion);");
}
      out.write("\r\n    }\r\n    //更新值\r\n    window.parent.rightFrame.document.getElementById(\"selectIds\").value=tempSelect.toString();\r\n    window.parent.rightFrame.document.getElementById(\"otherSelectIds\").value=selectOut;\r\n    reMoveMobile(selectId,mobiles);//删除手机元素\r\n}\r\n\r\n/**\r\n* 删除手机或其他元素\r\n* selectId 选中id\r\n* mobiles 手机或其他元素\r\n*/\r\nfunction reMoveMobile(selectId,mobiles){\r\nvar objMobile=window.parent.rightFrame.document.getElementById(\"personMobile\").value;\r\nvar mobile=document.getElementById('mobile_'+selectId);//获得左下角框中显示出来的某个人员的手机号\r\nif(mobile&&objMobile!=''){\r\n   if(objMobile.indexOf(mobile.value)>=0){\r\n     window.parent.rightFrame.document.getElementById(\"personMobile\").value=objMobile.replaceAll(mobile.value+',','');\r\n   }\r\n}else{\r\n  if(objMobile.indexOf(mobiles)>=0){\r\n     window.parent.rightFrame.document.getElementById(\"personMobile\").value=objMobile.replaceAll(mobiles+',','');\r\n   }\r\n}\r\n}\r\n/**\r\n* 选择类型为单选时，清楚已选择信息，更改为当前选择信息\r\n* selectInner 组织内部人员\r\n* selectOut 组成员\r\n*/\r\nfunction judeRadio(selectInner,selectOut){\r\n  if(selectType=='radio'){//类型为单选时\r\n");
      out.write("     if(selectInner!=null&&selectInner!=''){//组织人员\r\n       if(selectInner.indexOf('$')>=0){\r\n         selectInner=selectInner;\r\n       }else{\r\n         selectInner='$'+selectInner+'$';\r\n       }\r\n       var obj=window.parent.rightFrame.document.getElementById(selectInner);\r\n       if(obj){\r\n       ");
if(bflag){
      out.write("\r\n           obj.removeNode(true);//存在删除元素");
}else{
      out.write("\r\n           var plist=window.parent.rightFrame.document.getElementById(\"persionList\");\r\n           plist.removeChild(obj);\r\n           ");
}
      out.write("\r\n           window.parent.rightFrame.document.getElementById(\"selectIds\").value=\"\";//更新选中id信息\r\n       }\r\n     }\r\n     if(selectOut!=null&&selectOut!=''){//组成员\r\n       if(selectOut.indexOf('#')>=0){\r\n         selectOut=selectOut;\r\n       }else{\r\n         selectOut='#'+selectOut+'#';\r\n       }\r\n       var obj0=window.parent.rightFrame.document.getElementById(selectOut);\r\n       if(obj0){\r\n       ");
if(bflag){
      out.write("\r\n           obj0.removeNode(true);");
}else{
      out.write("\r\n           var glist=window.parent.rightFrame.document.getElementById(\"persionList\");\r\n           glist.removeChild(obj0);\r\n           ");
}
      out.write("\r\n           window.parent.rightFrame.document.getElementById(\"otherSelectIds\").value=\"\";\r\n       }\r\n     }\r\n  }\r\n}\r\n\r\n\r\n/**\r\n* 创建已选择元素的div\r\n* selectId 选中id\r\n* temp 选中名称(姓名)\r\n*/\r\nfunction createDiv(selectId,temp,phone){\r\n   var selectInner=window.parent.rightFrame.document.getElementById(\"selectIds\").value;//选中组织、组人员id\r\n   var selectOut=window.parent.rightFrame.document.getElementById(\"otherSelectIds\").value;//选中外部人员id\r\n   var divId=window.parent.rightFrame.document.getElementById(selectId);//判断div是否存在\r\n  // alert(divId);\r\n   judeRadio(selectInner,selectOut);//判断单选\r\n   if(!divId){//不存在该div\r\n\t    var my=window.parent.rightFrame.document.createElement(\"div\");\r\n\t    var persionList = window.parent.rightFrame.document.getElementById(\"persionList\");\r\n\t    my.id=selectId;\r\n\t    //my.setAttribute(\"ondblclick\",function(){dropDiv(selectId,'')});//设置div双击移出事件\r\n\t    //my.setAttribute(\"onclick\",function(){changeDivColor(selectId);reMovePerson(selectId,'')});//设置div单击改变颜色事件\r\n\t    my.ondblclick=function () { dropDiv(selectId,phone) };\r\n");
      out.write("\t    my.onclick=function (){ changeDivColor(selectId);reMovePerson(selectId,'') };\r\n\t    my.style.backgroundColor=\"\";//背景颜色\r\n\t    my.style.color=\"#000000\";//字体颜色\r\n\t    my.style.cursor=\"pointer\";//样式\r\n\t    my.title=\"双击移出\";//提示信息\r\n\t    my.style.styleFloat=\"left\";//样式\r\n\t    my.style.width=\"100%\";//宽度\r\n\t    my.style.fontSize = \"13px\";//字体大小\r\n\t    //my.innerText=temp+\",\";\r\n\t    if(selectId.indexOf('$')>=0){//选择组织人员时\r\n\t      if(selectType=='radio'){//单选时\r\n\t      \t  persionList.innerHTML=\"\";\r\n\t      \t  persionList.appendChild(my);\r\n\t          window.parent.rightFrame.document.getElementById(\"selectIds\").value=selectId.substring(1,selectId.length-1);\r\n\t          ");
if(bflag){ 
      out.write("my.innerText=temp;");
}else{
      out.write("my.textContent=temp;");
}
      out.write("\r\n\t      }else{\r\n\t      \t  persionList.appendChild(my);\r\n\t          window.parent.rightFrame.document.getElementById(\"selectIds\").value+=selectId;\r\n\t          ");
if(bflag){ 
      out.write("my.innerText=temp+\",\";");
}else{
      out.write("my.textContent=temp+\",\";");
}
      out.write("\r\n\t      }\r\n\t    }else{//组成员时\r\n\t      persionList.appendChild(my);\r\n\t      window.parent.rightFrame.document.getElementById(\"otherSelectIds\").value+=selectId;\r\n\t      ");
if(bflag){ 
      out.write("my.innerText=temp+\",\";");
}else{
      out.write("my.textContent=temp+\",\";");
}
      out.write("\r\n\t    }\r\n\t    getPersonMobile(selectId,phone); \r\n    }\r\n \r\n}\r\n/**\r\n* 短信发送时选择人员电话\r\n* selectId 选中人员id\r\n*/\r\nfunction getPersonMobile(selectId,phone){\r\n\t\r\n\tvar mobile=document.getElementById('mobile_'+selectId);\r\n\tif(mobile){//存在时，添加手机信息\r\n\t  window.parent.rightFrame.document.getElementById(\"personMobile\").value+=mobile.value+',';\r\n\t}else if( phone){\r\n\t\twindow.parent.rightFrame.document.getElementById(\"personMobile\").value+=phone+',';\r\n\t}\r\n}\r\n\r\nString.prototype.replaceAll  = function(s1,s2){    \r\n    return this.replace(new RegExp(s1,\"g\"),s2);    \r\n} \r\n\r\nfunction StringBuffer(){\r\n     this.__strings=new Array();\r\n }\r\n \r\nStringBuffer.prototype.append=function(str){\r\n      this.__strings.push(str);\r\n }\r\nStringBuffer.prototype.toString=function(){\r\n     return this.__strings.join(\"\");\r\n }\r\n\r\n</script>");
    } catch (java.lang.Throwable t) {
      if (!(t instanceof javax.servlet.jsp.SkipPageException)){
        out = _jspx_out;
        if (out != null && out.getBufferSize() != 0)
          try {
            if (response.isCommitted()) {
              out.flush();
            } else {
              out.clearBuffer();
            }
          } catch (java.io.IOException e) {}
        if (_jspx_page_context != null) _jspx_page_context.handlePageException(t);
        else throw new ServletException(t);
      }
    } finally {
      _jspxFactory.releasePageContext(_jspx_page_context);
    }
  }
}
